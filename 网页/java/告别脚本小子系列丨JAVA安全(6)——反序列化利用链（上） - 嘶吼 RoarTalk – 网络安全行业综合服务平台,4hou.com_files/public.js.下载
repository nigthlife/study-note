/*
 jQuery placeholderTypewriter plugin
 ===================================
 Author: Bjoern Diekert <https://github.com/bdiekert>
 Version: 1.0
 License: Unlicense <http://unlicense.org>
 */


(function ($) {
    "use strict";
    $.fn.placeholderTypewriter = function (options) {
        // Plugin Settings
        var settings = $.extend({
            delay: 50,
            pause: 1000,
            text: []
        }, options);
        // Type given string in placeholder
        function typeString($target, index, cursorPosition, callback) {
            // Get text
            var text = settings.text[index];

            // Get placeholder, type next character
            var placeholder = $target.attr('placeholder');
            $target.attr('placeholder', placeholder + text[cursorPosition]);

            // Type next character
            if (cursorPosition < text.length - 1) {
                setTimeout(function () {
                    typeString($target, index, cursorPosition + 1, callback);
                }, settings.delay);
                return true;
            }

            // Callback if animation is finished
            callback();
        }

        // Delete string in placeholder
        function deleteString($target, callback) {

            // Get placeholder
            var placeholder = $target.attr('placeholder');
            var length = placeholder.length;

            // Delete last character
            $target.attr('placeholder', placeholder.substr(0, length - 1));

            // Delete next character
            if (length > 1) {
                setTimeout(function () {
                    deleteString($target, callback)
                }, settings.delay);
                return true;
            }

            // Callback if animation is finished
            callback();
        }

        // Loop typing animation
        function loopTyping($target, index) {

            // Clear Placeholder
            $target.attr('placeholder', '');

            // Type string
            typeString($target, index, 0, function () {

                // Pause before deleting string
                setTimeout(function () {

                    // Delete string
                    deleteString($target, function () {
                        // Start loop over
                        loopTyping($target, (index + 1) % settings.text.length)
                    })

                }, settings.pause);
            })

        }

        // Run placeholderTypewriter on every given field
        return this.each(function () {

            loopTyping($(this), 0);
        });

    };

}(jQuery));


$(document).ready(function(){
    var leftnum=0;
    $(".navboxleft a").mouseenter(function(){
        var leftnum=$(this).index()
        $(".movebottom").stop(true,true).animate({left:leftnum*87})

    });
    $(".navboxleft").mouseleave(function(){
        var leftnum=$(this).index()
        $(".movebottom").animate({left:leftnum*87})

    });
});

$(document).ready(function(){


    $("img").lazyload({
        placeholder : "../sihou/images/lazy.gif",
        effect: "fadeIn",
        threshold: 200,
        failurelimit : 10
    });


    // 姹夊牎鍒囨崲
    var navopen=true;
    $("#burger").on("click",function(){
        if(navopen===true){
            $(".burger2").addClass("open");
            $(".navbox").removeClass("fadeOutUp").addClass("fadeInDown");
            $("#search,#submitBtn").show().removeClass("fadeOutUp").addClass("fadeInDown");;
            $("#modelbg").show();
            navopen=false;
        }
        else if(navopen===false){
            $(".burger2").removeClass("open");
            $(".navbox").removeClass("fadeInDown").addClass("fadeOutUp");
            $("#search,#submitBtn").hide().removeClass("fadeInDown").addClass("fadeOutUp");
            $("#modelbg").hide();
            navopen=true;
        }
    });
    $("#modelbg").on("click",function(){
        $(".burger2").removeClass("open");
        $(".navbox").removeClass("fadeInDown").addClass("fadeOutUp");
        $("#search,#submitBtn").hide().removeClass("fadeInDown").addClass("fadeOutUp");
        $("#modelbg").hide();
        $(".clear").click();
        navopen=true;
    });
    document.querySelector("#modelbg").addEventListener('touchmove', function (ev) {
        ev.preventDefault();
    });

    var placeholderText = ["璇疯緭鍏ユ悳绱㈠唴瀹�"];
    var placeholderText2 = [" "];
    $("#burger").one("click",function(){
        $("#search").show()
        $('#search').placeholderTypewriter({
            text: placeholderText,
            pause: 999999,
            delay: 100
        });
    });

    var winwidth=$(window).width();
    if(winwidth<650){
        var imgwidth=$(".new_img").eq(0).width();
        var imgheight=imgwidth/1.82;
        $(".new_img").css({height:imgheight})

    };
    $(window).resize(function(){
        var winwidth=$(window).width()-10;
        if(winwidth<650){

            var imgwidth=$(".new_img").eq(0).width();
            var imgheight=winwidth/1.82;
            $(".new_img").css({height:imgheight})
        }else{
            $(".new_img").attr('style','');
        }
    })

    $(".side_bottom").on("click",function(){
        $(".iconbox").stop(true,true).slideToggle();
        $(".side_bottom").toggleClass("togglebg")
    });
    // 鐐硅禐
    $(".zanbox").on("click",function(){
        $(".zanbefor").hide();
        $(".zanafter").addClass("zanafteranimate");
        $(".favorite").addClass("postlikeclick")
    });
// 鎼滅储鍒囨崲
    $("#submitBtnplace").on('click', function(event) {

        $("#submitBtnplace").css({'visibility':'hidden'});
        $(".login .contrib").hide();
        //$("#modelbg").show();
        $(".br").show();
        $(".login").addClass("active");
        $(".in-btn").addClass("inbtnclick");
        $(".clear ").addClass('clearclick');
        $("#search").addClass("searchclick")
        $(".logowrap h1").hide();
        $("#search").show().focus().attr('placeholder','鎼滅储');
        //$(".member_nav").hide();

    });
    $(".clear").on('click', function(event) {
        $("#submitBtnplace").show();
        $("#submitBtnplace").css({'visibility':'inherit'});
        $(".login .contrib").show();
        $(".br").hide();

        $(".login").removeClass("active");
        $(".in-btn").removeClass("inbtnclick");
        $(".clear ").removeClass('clearclick');
        $("#search").removeClass("searchclick")
        $(".logowrap h1").show();
        //$("#modelbg").hide();
        $("#search").hide().blur().attr('placeholder','');
        //$(".member_nav").show();
        $(".member_list").removeClass("memberlistanimate")
    });


    function checksubmit(){
        if (document.searchform.s.value=="") {
            return false;
        }
        return true;

    }
    // 闅愯棌澶撮儴
    // var scrollTops=$(window).scrollTop();
    // if (scrollTops>100) {
    //      $(".navbox").addClass('scrolltop');
    // };
    // $(window).scroll(function(){
    //   var scrollTop=$(window).scrollTop()
    //   /*console.log(scrollTop)*/
    //   if (scrollTop>100) {
    //     $(".navbox").addClass('scrolltop');
    //     $(".navbox").removeClass('scrollbottom')
    //   }
    //   else{
    //     $(".navbox").removeClass('scrolltop');
    //     $(".navbox").addClass('scrollbottom')
    //   }
    // });
// 鍒ゆ柇婊氳疆鏂瑰悜
    function mousewheelHandler(e){
        var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
        if(delta > 0){
            $(".navbox").removeClass('scrolltop');
            $(".navbox").addClass('scrollbottom');
        }
        else{
            $(".navbox").addClass('scrolltop');
            $(".navbox").removeClass('scrollbottom')
        }
    }
//for Firefox
    document.addEventListener("DOMMouseScroll", mousewheelHandler, false);
//for Chrome Safari
    document.addEventListener("mousewheel", mousewheelHandler, false);




    // var photoclick=true;
    //  $(".member_nav").on("click",function(){
    //   if(photoclick===true){
    //     $(".member_list").removeClass("memberlistanimateleave").addClass("memberlistanimate");
    //      photoclick=false;
    //   }
    //   else{
    //      photoclick=true;
    //      $(".member_list").removeClass("memberlistanimate").addClass("memberlistanimateleave")
    //   }

    // });


    $(".member_nav").mouseenter(function(){
        $(".member_list").removeClass("memberlistanimateleave").addClass("memberlistanimate");;

    });
    $(".member_nav").mouseleave(function(){
        $(".member_list").removeClass("memberlistanimate").addClass("memberlistanimateleave");

    });

    $(".wrapper-cen .class-box").hide();
    $(".my-article").addClass('coloradd')
    $(".my-comment").on("click",function(){
        $(".homenewwrap,.pagenav").hide();
        $(".wrapper-cen .class-box").show();
        $(this).addClass('coloradd').siblings("li").removeClass("coloradd")
    });
    $(".my-article").on("click",function(){
        $(".homenewwrap").show();
        $(".wrapper-cen .class-box").hide();
        $(this).addClass('coloradd').siblings("li").removeClass("coloradd")
    });
    // alt
    $(".bannerwrap").find("img").attr("alt","");
    $(".new_left").find("img").attr("alt","");
    $(".loopcontainer").find("img").attr("alt","");

    $("#readMenue").click(function(){
        //$(this).toggleClass("active");
        // alert(1);
        //console.log($(".list_nav_two").hasClass("bounceIn"));
        if(!$(".list_nav_two").hasClass("slideInDown")){
            $(".list_nav_two").show();
            $(".list_nav_two").addClass("slideInDown");
            $(".list_nav_two").removeClass("slideOutUp");
        }else{

            $(".list_nav_two").removeClass("slideInDown");
            $(".list_nav_two").addClass("slideOutUp");
            // $(".list_nav_two").hide();

        }
    })
    $("#hss").click(function(){
        $(".list_nav_two").removeClass("slideInDown");
        $(".list_nav_two").addClass("slideOutUp");
    })

});
