/*! For license information please see c__LazyBookOverview.07cd1945.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[67,186,850],{1612:function(e,t,r){"use strict";r(3249);var n=r(3189);r(3129);t.a=n.a},1957:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-card-style",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M198 24h-28c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30V54c0-16.569-13.431-30-30-30Zm-28 20h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10h-28c-5.523 0-10-4.477-10-10V54c0-5.523 4.477-10 10-10Zm28 92h-28c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30v-28c0-16.569-13.431-30-30-30Zm-28 20h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10h-28c-5.523 0-10-4.477-10-10v-28c0-5.523 4.477-10 10-10ZM86 24H58c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30V54c0-16.569-13.431-30-30-30ZM58 44h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10H58c-5.523 0-10-4.477-10-10V54c0-5.523 4.477-10 10-10Zm28 92H58c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30v-28c0-16.569-13.431-30-30-30Zm-28 20h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10H58c-5.523 0-10-4.477-10-10v-28c0-5.523 4.477-10 10-10Z",fill:"currentColor",fillRule:"nonzero"}))},1971:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-list-style",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M212 28h-28c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30V58c0-16.569-13.431-30-30-30Zm-28 20h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10h-28c-5.523 0-10-4.477-10-10V58c0-5.523 4.477-10 10-10Zm28 92h-28c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30v-28c0-16.569-13.431-30-30-30Zm-28 20h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10h-28c-5.523 0-10-4.477-10-10v-28c0-5.523 4.477-10 10-10ZM26.983 41.147l92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Zm0 77 92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Zm0 81 92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Z",fill:"currentColor",fillRule:"nonzero"}))},3191:function(e,t,r){"use strict";var n=r(13),o=r(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},a=r(40),c=function(e,t){return o.createElement(a.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:i}))};c.displayName="EditOutlined";t.a=o.forwardRef(c)},3192:function(e,t,r){"use strict";var n=r(13),o=r(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},a=r(40),c=function(e,t){return o.createElement(a.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:i}))};c.displayName="CopyOutlined";t.a=o.forwardRef(c)},3193:function(e,t,r){"use strict";var n=r(13),o=r(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},a=r(40),c=function(e,t){return o.createElement(a.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:i}))};c.displayName="EnterOutlined";t.a=o.forwardRef(c)},3203:function(e,t,r){"use strict";r(1847);var n=r(1392);r(3201);t.a=n.a},3600:function(e,t,r){"use strict";r.d(t,"c",(function(){return y})),r.d(t,"a",(function(){return w})),r.d(t,"l",(function(){return T})),r.d(t,"j",(function(){return z})),r.d(t,"h",(function(){return Q})),r.d(t,"i",(function(){return re})),r.d(t,"k",(function(){return le})),r.d(t,"f",(function(){return be})),r.d(t,"d",(function(){return Oe})),r.d(t,"e",(function(){return Se})),r.d(t,"g",(function(){return Ae})),r.d(t,"b",(function(){return He}));var n=r(101),o=r.n(n),i=r(1510),a=r(3554);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===c(i)?i:String(i)),n)}var o,i}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,r,n,a=f(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return t=c,n=[{key:"getEmptyDocument",value:function(){return{format:o.a.FORMAT.LAKE,value:null}}}],(r=[{key:"getType",value:function(){var e=this.options.targetType;return e?"".concat(e,"_comment").toLowerCase():"comment"}},{key:"getCacheKey",value:function(){var e=this.options.replyId;return this.isEditMode&&this.target&&this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(this.target.id,"/edit"):this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(e,"/new"):"autosave/".concat(this.type)}},{key:"isMiniSize",value:function(){return this.options.useMiniGuide||this.options.isMiniSize||window.h5}},{key:"getDefaultFormat",value:function(){return i.a.getDefaultDocumentFormat()}},{key:"getEnableFullEditor",value:function(){return"Artboard"!==this.targetType}}])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(a.a),y=p;function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===d(i)?i:String(i)),n)}var o,i}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(i,e);var t,r,n,o=m(i);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.attachType="Resource",e.useBelongAttach=!0,e.from="reply",o.call(this,e)}return t=i,(r=[{key:"getType",value:function(){return"area_comment"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&b(t.prototype,r),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(y),w=g;function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===O(i)?i:String(i)),n)}var o,i}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},k.apply(this,arguments)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var o=P(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(i,e);var t,r,n,o=E(i);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.attachType="Doc",e.useBelongAttach=!0,e.from="reply",o.call(this,e)}return t=i,(r=[{key:"buildOptions",value:function(e){var t,r=k(P(i.prototype),"buildOptions",this).call(this,e);return r.image.showMiniToolbarWhen="never",null===(t=r.disabledPlugins)||void 0===t||t.push("slash"),r}},{key:"getType",value:function(){return"word_comment"}},{key:"getAutoFocus",value:function(){return!1}},{key:"isMiniSize",value:function(){return!0}},{key:"getEnableFullEditor",value:function(){return!1}}])&&_(t.prototype,r),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(y),T=S,x=r(29),B=r.n(x),C=r(3582);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e,t,r){return(t=M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function M(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===R(t)?t:String(t)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=F(e);if(t){var o=F(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}var U={daily:{title:"#prefix# #day# 日报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>建议 TL 每天组织日会，将一天的重点事项安排于此</p><p>每位同学下班前，在此提交日报</p><p><br /></p><p>日报不要记流水账，尽量在 200 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的日报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},weekly:{title:"#prefix# #day# 周报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>将一周的工作总结回复于此</p><p><br /></p><p>不要记流水账，尽量在 800 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的周报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},vote:{title:"一起来投票吧",content:'<!doctype lake><meta name="doc-version" content="1" /><card type="block" name="vote" value="data:%7B%22margin%22%3Atrue%2C%22id%22%3A%22jTHWG%22%2C%22type%22%3A%22single%22%7D"></card><p><br /><cursor /></p>'},default:{title:"",content:"<!doctype lake><p></p>"}},H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(i,e);var t,r,n,o=L(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"getTemplate",value:function(e,t){var r=U[e];if(!r)return{title:null,content:null};var n=B()(new Date).format("YYYY-MM-DD"),o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);return o.title=o.title.replace("#prefix#",t),o.title=o.title.replace("#day#",n),o}}],(r=[{key:"getType",value:function(){return"thread"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(e,"&attachable_type=").concat(this.belongType||"Book","&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):this.group?"".concat(e,"&attachable_type=User&attachable_id=").concat(this.group.id,"&from=").concat(this.from):null}},{key:"getFileCopyUrl",value:function(){return this.isEditMode?"".concat("/api/upload/copy?type=attachment","&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):null}}])&&I(t.prototype,r),n&&I(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(C.a),z=H;function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==V(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===V(i)?i:String(i)),n)}var o,i}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=W(e);if(t){var o=W(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(i,e);var t,r,n,o=Y(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"getType",value:function(){return"thread_board"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var e="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode&&!this.options.useBelongAttach?"".concat(e,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(e,"&attachable_type=").concat(this.belongType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}}])&&G(t.prototype,r),n&&G(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.a),Q=q;function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==K(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===K(i)?i:String(i)),n)}var o,i}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ee(e);if(t){var o=ee(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(i,e);var t,r,n,o=$(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"getType",value:function(){return"thread_comment"}}])&&J(t.prototype,r),n&&J(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(y),re=te;function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==ne(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ne(i)?i:String(i)),n)}var o,i}function ie(){return ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ue(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ie.apply(this,arguments)}function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ae(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ue(e);if(t){var o=ue(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}(i,e);var t,r,n,o=ce(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.attachType="User",e.useBelongAttach=!0,o.call(this,e)}return t=i,(r=[{key:"buildOptions",value:function(e){var t=ie(ue(i.prototype),"buildOptions",this).call(this,e);return t.typography={mustTypography:"classic",typography:"classic",paragraphSpacing:"default"},t}},{key:"getType",value:function(){return"user_readme"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&oe(t.prototype,r),n&&oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.a);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==fe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===fe(i)?i:String(i)),n)}var o,i}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=de(e);if(t){var o=de(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(i,e);var t,r,n,o=ye(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.from="group_custom",e.attachType="User",e.useBelongAttach=!0,o.call(this,e)}return t=i,(r=[{key:"getType",value:function(){return"group_custom"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&se(t.prototype,r),n&&se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.a);function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==ve(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ve(i)?i:String(i)),n)}var o,i}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(i,e);var t,r,n,o=ge(i);function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=e.feedback;return e.attachType="User",e.useBelongAttach=!0,e.from="feedback",e.placeholder={tip:t&&t.abilities.manage?"你将要代表语雀回复用户，请使用官方口吻，慎重填写":"",emptyParagraphTip:""},o.call(this,e)}return t=i,(r=[{key:"getType",value:function(){return"feedback_comment"}},{key:"getCacheKey",value:function(){var e=this.getType();if(this.target)return"autosave/".concat(e,"/").concat(this.target.id,"/edit");var t=this.options.feedback;return t?"autosave/".concat(e,"/").concat(t.id,"/new"):"autosave/".concat(e)}},{key:"getContentObject",value:function(){var e=this.target.content||{source:"",format:"lake"};return{format:e.format,value:e.source||""}}},{key:"isMiniSize",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"getAutoFocus",value:function(){return!0}}])&&me(t.prototype,r),n&&me(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(C.a);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==_e(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===_e(i)?i:String(i)),n)}var o,i}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var o=Pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pe(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(i,e);var t,r,n,o=Ee(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.attachType="User",e.useBelongAttach=!0,e.placeholder={tip:"",emptyParagraphTip:""},e.from="feedback",o.call(this,e)}return t=i,(r=[{key:"getType",value:function(){return"feedback_remark"}},{key:"getContentObject",value:function(){return{format:"lake",value:this.target.remark||""}}},{key:"getCacheKey",value:function(){return this.target?"autosave/".concat(this.type,"/").concat(this.target.id):"autosave/".concat(this.type)}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&ke(t.prototype,r),n&&ke(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(C.a);function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Te(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Te(i)?i:String(i)),n)}var o,i}function Be(){return Be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ne(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Be.apply(this,arguments)}function Ce(e,t){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ce(e,t)}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ne(e);if(t){var o=Ne(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}var Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(i,e);var t,r,n,o=Re(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.target&&(e.attachType="Doclet"),o.call(this,e)}return t=i,(r=[{key:"getCards",value:function(){return this.options.target?Be(Ne(i.prototype),"getCards",this).call(this):["label"]}},{key:"getFullCards",value:function(){return this.options.target?Be(Ne(i.prototype),"getFullCards",this).call(this):["label"]}},{key:"getType",value:function(){return"org_board"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return!1}}])&&xe(t.prototype,r),n&&xe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.a);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ie(i)?i:String(i)),n)}var o,i}function De(){return De="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ue(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},De.apply(this,arguments)}function Le(e,t){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Le(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ue(e);if(t){var o=Ue(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Le(e,t)}(i,e);var t,r,n,o=Fe(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.attachType="Doclet",o.call(this,e)}return t=i,(r=[{key:"buildOptions",value:function(e){var t=De(Ue(i.prototype),"buildOptions",this).call(this,e);return t.disabledPlugins=["collaboration","vote","checkIn","toc","dataTable","materialLibrary","okr"],t.typography={typography:"classic",paragraphSpacing:"relax"},t}},{key:"getType",value:function(){return"book_overview"}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&Me(t.prototype,r),n&&Me(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.a)},4748:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}));var n=function(e){return e.Toc="toc",e.CreatedAt="created_at",e.UpdatedAt="updated_at",e}({}),o=function(e){return e.Book="Book",e.Card="Card",e.Column="Column",e.Custom="Custom",e}({})},4749:function(e,t,r){"use strict";t.a={containerWrapper:"BookOverview-module_containerWrapper_DgnNE",upload:"BookOverview-module_upload_oDqT-",container:"BookOverview-module_container_1XOeO",bookHead:"BookOverview-module_bookHead_+4tu8",bookTitle:"BookOverview-module_bookTitle_dJHa-",bookIcon:"BookOverview-module_bookIcon_wlbhc",editable:"BookOverview-module_editable_qciTg",bookName:"BookOverview-module_bookName_+UPrt",bookNameInput:"BookOverview-module_bookNameInput_mnrNe",action:"BookOverview-module_action_Syxj1",bookAction:"BookOverview-module_bookAction_ROIf-",bookActionItem:"BookOverview-module_bookActionItem_sbPH8",needSave:"BookOverview-module_needSave_pVuxm",update:"BookOverview-module_update_HbybS",star:"BookOverview-module_star_uvjUk",share:"BookOverview-module_share_gT2zn",statistics:"BookOverview-module_statistics_uHBns",docCount:"BookOverview-module_docCount_rTm77",wordCount:"BookOverview-module_wordCount_-Mcic",count:"BookOverview-module_count_4RxbQ",bookContributor:"BookOverview-module_bookContributor_yQxOn",editor:"BookOverview-module_editor_T56aC",viewer:"BookOverview-module_viewer_wHZhn",none:"BookOverview-module_none_Ec8cF",togglePanel:"BookOverview-module_togglePanel_mPWOh",title:"BookOverview-module_title_ok4h8",desc:"BookOverview-module_desc_mHhnV",toggleItem:"BookOverview-module_toggleItem_c4bNf",catalogHeaderTitle:"BookOverview-module_catalogHeaderTitle_6yl+P",tocContainer:"BookOverview-module_tocContainer_GR86Z",headerSwitch:"BookOverview-module_headerSwitch_xlCUf",switchBtnBg:"BookOverview-module_switchBtnBg_Gj+Gg",treeSelected:"BookOverview-module_treeSelected_tqaat",cardSelected:"BookOverview-module_cardSelected_S9EbS",columnSelected:"BookOverview-module_columnSelected_5Qn-T",switchButtons:"BookOverview-module_switchButtons_tH51-",switchBtn:"BookOverview-module_switchBtn_IVGhh",switchIcon:"BookOverview-module_switchIcon_5iInw",switchBtnSelected:"BookOverview-module_switchBtnSelected_IfORb",catalogModule:"BookOverview-module_catalogModule_xPRJ4",catalogMoreIcon:"BookOverview-module_catalogMoreIcon_tV7z9",empty:"BookOverview-module_empty_CmmT6",mt_26:"BookOverview-module_mt_26_iuvqB",selectPanel:"BookOverview-module_selectPanel_iQlU8",selectTitle:"BookOverview-module_selectTitle_nHGBR",selectItem:"BookOverview-module_selectItem_kWvPj",divider:"BookOverview-module_divider_FyGF3"}},5164:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return ae}));r(3201);var n=r(3203),o=(r(3129),r(1612)),i=(r(95),r(38)),a=(r(418),r(112)),c=(r(145),r(42)),u=(r(183),r(104)),l=(r(394),r(259)),f=(r(61),r(23)),s=(r(98),r(37)),p=(r(55),r(22)),y=(r(430),r(173)),d=r(0),b=r.n(d),v=r(429),m=r(3635),h=r(754),g=r(890),w=r(889),O=r(1439),_=r(1924),k=r(1957),j=r(1971),E=r(1456),P=r(11),S=r.n(P),T=r(5165),x=r.n(T),B=r(196),C=r(139),R=r(182),N=r(567),A=r(24),I=r(905),M=r(3600),D=r(4748),L=r(4749);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(){z=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),c=new E(o||[]);return n(a,"_invoke",{value:O(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var s={};function p(){}function y(){}function d(){}var b={};u(b,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(P([])));m&&m!==t&&r.call(m,i)&&(b=m);var h=d.prototype=p.prototype=Object.create(b);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var u=f(e[n],e,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==F(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function O(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=_(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function _(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),s;var o=f(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,s;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return y.prototype=d,n(h,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,c,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(h),u(h,c,"Generator"),u(h,i,(function(){return this})),u(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}function V(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function G(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){V(i,n,o,a,c,"next",e)}function c(e){V(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==F(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===F(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var q=Object(I.b)((function(){return Promise.resolve().then(r.bind(null,4600))}),{suspense:!0}),Q=Object(I.b)((function(){return Promise.all([r.e(1),r.e(4),r.e(1180)]).then(r.bind(null,5170))}),{suspense:!0}),K=Object(I.b)((function(){return r.e(1176).then(r.bind(null,3938))}),{suspense:!0}),J=Object(I.b)((function(){return r.e(1177).then(r.bind(null,3900))}),{suspense:!0}),X=Object(I.b)((function(){return r.e(33).then(r.bind(null,3723)).then((function(e){return e.ShareButton}))}),{suspense:!0}),$=Object(I.b)((function(){return Promise.all([r.e(0),r.e(8),r.e(31)]).then(r.bind(null,3609))}),{suspense:!0}),ee=Object(I.b)((function(){return Promise.all([r.e(6),r.e(1187)]).then(r.bind(null,1490))}),{suspense:!0}),te=Object(I.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(5),r.e(1178)]).then(r.bind(null,5167))}),{suspense:!0}),re=function(e){var t=e.sections;return b.a.createElement("div",{className:L.a.selectPanel},t.map((function(e,r){return b.a.createElement("div",{key:r},t.length>1&&r>0&&r<t.length&&b.a.createElement(y.a,{className:L.a.divider}),b.a.createElement("div",{className:L.a.selectSection},e.title&&b.a.createElement("div",{className:L.a.selectTitle},e.title),e.content))})))},ne=function(e){var t=e.order,r=e.onChangeOrder;return b.a.createElement(re,{sections:[{title:__("排序"),content:b.a.createElement("div",{className:L.a.selectList},[{name:__("按目录顺序"),value:D.b.Toc},{name:__("按创建时间"),value:D.b.CreatedAt},{name:__("按更新时间"),value:D.b.UpdatedAt}].map((function(e){return b.a.createElement("div",{className:L.a.selectItem,onClick:function(){return r(e.value)},key:e.value},b.a.createElement("span",null,e.name),t===e.value&&b.a.createElement(h.default,null))})))}]})},oe=function(e){var t,r=e.layout,n=e.maxLevel,o=e.displayValue,i=e.onChangeLevel,a=e.tailType,c=e.onChangeTailType,u=e.onChangeOrder,l=e.order;return(t={},W(t,D.a.Book,b.a.createElement(re,{sections:[{title:__("默认展示"),content:b.a.createElement("div",{className:L.a.selectList},[{name:__("全部层级"),value:"all"}].concat(Array.from({length:n},(function(e,t){return{name:__("第 {level} 级",{level:t+1}),value:t.toString()}}))).map((function(e){return b.a.createElement("div",{className:L.a.selectItem,onClick:function(){return i(e.value)},key:e.value},b.a.createElement("span",null,e.name),o===e.value&&b.a.createElement(h.default,null))})))},{title:__("显示"),content:b.a.createElement("div",{className:L.a.selectList},[{name:__("创建时间"),value:R.TOC_TAIL_TYPES.CREATED_AT},{name:__("更新时间"),value:R.TOC_TAIL_TYPES.UPDATED_AT},{name:__("作者"),value:R.TOC_TAIL_TYPES.AUTHOR},{name:__("文档路径"),value:R.TOC_TAIL_TYPES.SLUG}].map((function(e){return b.a.createElement("div",{className:L.a.selectItem,onClick:function(){return c(e.value)},key:e.value},b.a.createElement("span",null,e.name),a===e.value&&b.a.createElement(h.default,null))})))}]})),W(t,D.a.Card,b.a.createElement(ne,{order:l,onChangeOrder:u})),W(t,D.a.Column,b.a.createElement(ne,{order:l,onChangeOrder:u})),t)[r]},ie=function(e){var t=e.enable,r=e.editable,n=e.editComponent,o=e.viewComponent,i=e.className;if(!t)return null;var a=r?n:o;return b.a.createElement("div",{className:i},a)};function ae(){var e,t,r,y,h,P,T,R=Object(v.e)(),I=Object(v.f)((function(e){return{book:e.book,me:e.me,group:e.group}})),F=I.book,U=I.me,V=I.group,Y=Object(d.useRef)(null),re=Object(d.useRef)(null),ne="bookOverview/doclet/".concat(F.id),ae=Z(Object(d.useState)(!0),2),ce=ae[0],ue=ae[1],le=Z(Object(d.useState)(!0),2),fe=le[0],se=le[1],pe=Z(Object(d.useState)(!1),2),ye=pe[0],de=pe[1],be=Z(Object(d.useState)(null),2),ve=be[0],me=be[1],he=Z(Object(d.useState)(""),2),ge=he[0],we=he[1],Oe=Z(Object(d.useState)(!1),2),_e=Oe[0],ke=Oe[1],je=Z(Object(d.useState)(D.a.Book),2),Ee=je[0],Pe=je[1],Se=Z(Object(d.useState)(!1),2),Te=Se[0],xe=Se[1],Be=Z(Object(d.useState)(!1),2),Ce=Be[0],Re=Be[1],Ne=Z(Object(d.useState)(!1),2),Ae=Ne[0],Ie=Ne[1],Me=Z(Object(d.useState)(F.name),2),De=Me[0],Le=Me[1],Fe=Z(Object(d.useState)(!1),2),Ue=Fe[0],He=Fe[1],ze=Z(Object(d.useState)({wordCount:0,enableCustomBody:!0,enableCatalog:!0,order:D.b.Toc}),2),Ve=ze[0],Ge=ze[1],Ze=Ve.wordCount,Ye=Ve.enableCustomBody,We=Ve.enableCatalog,qe=Ve.order,Qe=Z(Object(d.useState)([]),2),Ke=Qe[0],Je=Qe[1],Xe={order:qe,book:F,inTocDocs:Ke,catalogLoading:fe,layout:Ee,group:V,isEdit:_e};Object(d.useEffect)((function(){G(z().mark((function e(){var t,r,n,o,i,a,c,u,l,f;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.webProxy.books.getOverviewInfo({id:F.id});case 2:return t=e.sent,r=t.wordCount,n=t.contributors,o=t.enableCustomBody,i=t.enableCatalog,a=t.layout,c=t.customIndex,u=t.order,l=t.enableUserFeed,window.appData.enableUserFeed=l,Ge({wordCount:r,enableCustomBody:o,enableCatalog:i,order:u}),a===D.a.Custom?Pe(D.a.Book):Pe(a),me(c),we(c.body_asl),Y.current=new M.b({defaultValue:c.body_asl,target:c}),R({type:"book/update",payload:{contributors:n}}),a===D.a.Book&&(ue(!1),se(!1)),e.next=21,B.webProxy.docs.find({book_id:F.id});case 21:f=e.sent,R({type:"book/update",payload:{docs:f}}),Je(ut(f.filter((function(e){return!Object(N.isDocNotInToc)(e,F.toc)})).filter(Boolean),u)),ue(!1),se(!1);case 26:case"end":return e.stop()}}),e)})))()}),[]),Object(d.useEffect)((function(){G(z().mark((function e(){var t,r;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,!U.id){e.next=6;break}return e.next=4,B.webProxy.mine.marks.findOne({target_type:"Book",id:F.id});case 4:r=e.sent,t=r.markAction;case 6:R({type:"book/update",payload:{mark:t}});case 7:case"end":return e.stop()}}),e)})))()}),[]);var $e=Object(d.useMemo)((function(){var e,t=F.catalog_display_level||10,r=1;return null===(e=F.toc)||void 0===e||e.forEach((function(e){r=Math.max(r,e.level)})),r<2&&(r=Math.max(r,2)),"all"!==t&&(r=Math.max(t,r)),r}),[F.toc,F.catalog_display_level]),et=function(){var e=G(z().mark((function e(){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=Y&&Y.current){e.next=2;break}return e.abrupt("return");case 2:C.a.set(ne,null==Y||null===(t=Y.current)||void 0===t?void 0:t.getValue()),Re(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=G(z().mark((function e(){var t,r;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ve){e.next=2;break}return e.abrupt("return");case 2:if(C.a.remove(ne),Y.current){e.next=5;break}return e.abrupt("return");case 5:if((t=Y.current.getValue())!==ge){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,B.webProxy.doclets.updateContent({id:null==ve?void 0:ve.id,body_asl:t,format:"lake",draft_version:null==ve?void 0:ve.draft_version});case 10:return e.next=12,B.webProxy.doclets.publish({id:ve.id});case 12:return e.next=14,B.webProxy.doclets.findOne({id:ve.id});case 14:r=e.sent,we(r.body_asl),me(r),Y.current=new M.b({defaultValue:r.body_asl,target:r});case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt=function(){var e=G(z().mark((function e(){var t,r;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=Y&&Y.current){e.next=2;break}return e.abrupt("return");case 2:t=C.a.get(ne),r=t||ge,Y.current.setValue(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=G(z().mark((function e(){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt().finally((function(){ke(!1),Re(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=G(z().mark((function e(t){var r;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.webProxy.books.update({id:F.id,cover:t});case 2:return Ie(!1),e.next=5,B.webProxy.books.findOne({id:F.id,find_by_id:!0});case 5:r=e.sent,R({type:"book/update",payload:{cover:r.cover}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=G(z().mark((function e(t){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R({type:"book/updateSettingProps",payload:{book_icon:t}}),e.next=3,B.webProxy.books.update({id:F.id,book_icon:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=G(z().mark((function e(t){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(!1),R({type:"book/update",payload:H(H({},F),{},{catalog_display_level:t})}),e.next=4,B.webProxy.catalogNodes.updateSettings({book_id:F.id,catalog_display_level:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=G(z().mark((function e(t){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(!1),R({type:"book/update",payload:H(H({},F),{},{catalog_tail_type:t})}),e.next=4,B.webProxy.catalogNodes.updateSettings({book_id:F.id,catalog_tail_type:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ut=function(e,t){if(D.b.Toc===t){var r,n=x()(e.map((function(e){return[e.id,e]})));return null===(r=F.toc)||void 0===r?void 0:r.filter((function(e){return"DOC"===e.type})).map((function(e){return n[e.doc_id]})).filter(Boolean)}return D.b.CreatedAt===t?e.sort((function(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()})):D.b.UpdatedAt===t?e.sort((function(e,t){return new Date(t.content_updated_at).getTime()-new Date(e.content_updated_at).getTime()})):[]},lt=function(){var e=G(z().mark((function e(t){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(!1),Ge(H(H({},Ve),{},{order:t})),Je(ut(Ke,t)),e.next=5,B.webProxy.books.updateSettings({id:F.id,order:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=G(z().mark((function e(t){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ge(H(H({},Ve),{},{enableCustomBody:t})),e.next=3,B.webProxy.books.updateSettings({id:F.id,enable_custom_body:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=G(z().mark((function e(t){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ge(H(H({},Ve),{},{enableCatalog:t})),e.next=3,B.webProxy.books.updateSettings({id:F.id,enable_catalog:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=function(){var e=G(z().mark((function e(t){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pe(t),e.next=3,B.webProxy.books.updateSettings({id:F.id,layout:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yt=function(){var e=G(z().mark((function e(t){var r;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.webProxy.books.update(t,{ignoreGlobalMessage:!0});case 2:return r=e.sent,R({type:"book/update",payload:{public:r.public,password:r.password,indexed_level:r.indexed_level}}),Object.keys(t).includes("public")&&(r.public===A.PRIVACY.private?p.a.success(__("已关闭分享知识库里的所有内容")):p.a.success(__("已对知识库里所有内容生效"))),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dt=function(){var e=G(z().mark((function e(t,r){var n;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.webProxy.books.update({id:t.id,name:r});case 2:return n=e.sent,R({type:"book/update",payload:{name:r}}),p.a.success(__("操作成功"),3),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),bt=function(){var e=G(z().mark((function e(){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=De&&De.trim()||__("无标题"),e.next=3,dt(F,t);case 3:He(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return b.a.createElement("div",{className:L.a.containerWrapper},_e&&b.a.createElement("div",{className:L.a.upload,onClick:function(){return Ie(!0)}},b.a.createElement("span",null,__("替换背景"))),b.a.createElement("div",{className:L.a.container},b.a.createElement(a.a,{avatar:{shape:"square",size:36},title:{width:200},paragraph:{rows:2},active:!0,loading:ce},b.a.createElement("div",{className:L.a.bookHead},b.a.createElement("div",{className:L.a.bookTitle},b.a.createElement(m.a,{className:S()(L.a.bookIcon,W({},L.a.editable,_e)),value:F.book_icon,updateIcon:it,width:38,height:38,disabled:!_e}),Ue?b.a.createElement(s.a,{className:L.a.bookNameInput,autoFocus:!0,type:"text",size:"large",value:De,onChange:function(e){return Le(e.target.value)},onFocus:function(e){return Ue&&e.target.select()},onBlur:bt,onPressEnter:bt}):b.a.createElement("span",{className:L.a.bookName},F.name)),b.a.createElement("div",{className:L.a.action},b.a.createElement("div",{className:L.a.bookAction},!_e&&b.a.createElement(J,{className:S()(L.a.bookActionItem,L.a.star),iconSize:16,book:F}),((null===(e=F.abilities)||void 0===e?void 0:e.share)||(null===(t=F.abilities)||void 0===t?void 0:t.create_collaborator))&&!_e&&b.a.createElement(b.a.Fragment,null,b.a.createElement(X,{shareViewType:"BOOK",key:"share-book-".concat(F.id),targetResource:F,onChangeShare:yt,organization:window.appData.organization,book:F,group:V,me:U,canShare:null===(r=F.abilities)||void 0===r?void 0:r.share,canCollaborator:null===(y=F.abilities)||void 0===y?void 0:y.create_collaborator},b.a.createElement(f.a,{className:S()(L.a.bookActionItem,L.a.share)},b.a.createElement("span",null,__("分享"))))),_e&&b.a.createElement(u.a,{trigger:"click",placement:"bottomRight",content:b.a.createElement("div",{className:L.a.togglePanel},b.a.createElement("div",{className:L.a.title},__("页面设置")),b.a.createElement("p",{className:L.a.desc},__("选择是否显示以下模块，打开即为显示")),b.a.createElement("div",{className:L.a.toggleItem},b.a.createElement("span",null,__("自定义模块")),b.a.createElement(l.a,{checked:Ye,onChange:ft})),b.a.createElement("div",{className:L.a.toggleItem},b.a.createElement("span",null,__("目录模块")),b.a.createElement(l.a,{checked:We,onChange:st})))},b.a.createElement("div",{className:S()(L.a.bookActionItem,L.a.setting)},b.a.createElement(g.default,{width:18,height:18}))),(null===(h=F.abilities)||void 0===h?void 0:h.create_doc)&&!_e&&b.a.createElement(q,{book:F,group:V,placement:"bottomRight",className:L.a.bookActionItem,prepend:(null===(P=F.abilities)||void 0===P?void 0:P.modify_setting)&&b.a.createElement(b.a.Fragment,null,b.a.createElement(c.a.Item,{key:"rename",onClick:function(){Le(F.name),He(!0)},icon:b.a.createElement(w.default,{width:16,height:16})},__("重命名")),b.a.createElement(c.a.Item,{key:"edit",onClick:function(){return ke(!0)},icon:b.a.createElement(O.default,{width:16,height:16})},__("编辑首页"))),showBasicSettings:!1,showDelete:!0}),_e&&b.a.createElement("div",{className:S()(L.a.bookActionItem,L.a.update,Ce?L.a.needSave:""),onClick:nt},__("更新"))))),b.a.createElement("div",{className:L.a.statistics},b.a.createElement("span",{className:L.a.docCount},b.a.createElement("b",{className:L.a.count},Ke.length||0)," ",__("文档")),b.a.createElement("span",{className:L.a.wordCount},b.a.createElement("b",{className:L.a.count},Ze)," ",__("字"))),b.a.createElement(K,{className:L.a.bookContributor,users:F.contributors,canEdit:F.abilities.modify_setting&&_e,bookId:F.id})),b.a.createElement(ie,{editable:(null==Y?void 0:Y.current)&&_e,enable:Ye,editComponent:b.a.createElement("div",{className:L.a.editor},b.a.createElement($,{editor:Y.current,tplDoc:{type:"repoHomePage"},placeholder:{tip:__("直接输入正文，也可选择一个模板："),emptyParagraphTip:__("输入 / 唤起更多")},needCreateGuide:!0,onChange:et,onSubmit:tt,onLoad:rt})),viewComponent:b.a.createElement(a.a,{className:L.a.viewer,title:!1,paragraph:{rows:3},active:!0,loading:ce},b.a.createElement("div",{className:S()(L.a.viewer,W({},L.a.none,ye))},b.a.createElement(ee,{forwardedRef:re,content:ge,genOutline:!1,genAnchor:!1,simpleUI:!0,onReady:function(){var e,t,r;_e&&de(null==Y||null===(r=Y.current)||void 0===r?void 0:r.isEmpty());de((null==re||null===(e=re.current)||void 0===e||null===(t=e.viewer)||void 0===t?void 0:t.queryCommandValue("isEmpty"))||!1)}})))}),b.a.createElement(ie,{className:L.a.catalogModule,editable:_e,enable:We,editComponent:b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:L.a.headerSwitch},b.a.createElement("div",{className:S()(L.a.switchBtnBg,(T={},W(T,L.a.treeSelected,Ee===D.a.Book),W(T,L.a.cardSelected,Ee===D.a.Card),W(T,L.a.columnSelected,Ee===D.a.Column),T))}),b.a.createElement("div",{className:L.a.switchButtons},b.a.createElement(i.a,{placement:"bottom",title:__("目录视图")},b.a.createElement("div",{className:S()(L.a.switchBtn,W({},L.a.switchBtnSelected,Ee===D.a.Book)),onClick:function(){return pt(D.a.Book)}},b.a.createElement(_.default,{className:L.a.switchIcon}))),b.a.createElement(i.a,{placement:"bottom",title:__("卡片视图")},b.a.createElement("div",{className:S()(L.a.switchBtn,W({},L.a.switchBtnSelected,Ee===D.a.Card)),onClick:function(){return pt(D.a.Card)}},b.a.createElement(k.default,{className:L.a.switchIcon}))),b.a.createElement(i.a,{placement:"bottom",title:__("专栏视图")},b.a.createElement("div",{className:S()(L.a.switchBtn,W({},L.a.switchBtnSelected,Ee===D.a.Column)),onClick:function(){return pt(D.a.Column)}},b.a.createElement(j.default,{className:L.a.switchIcon}))))),b.a.createElement(u.a,{trigger:"click",placement:"bottomRight",visible:Te,onVisibleChange:function(e){return xe(e)},content:b.a.createElement(oe,{layout:Ee,maxLevel:$e,displayValue:F.catalog_display_level,onChangeLevel:at,tailType:F.catalog_tail_type,onChangeTailType:ct,order:qe,onChangeOrder:lt})},b.a.createElement("div",{className:L.a.catalogMoreIcon,onClick:function(){return xe(!0)}},b.a.createElement(E.default,{width:16,height:16})," "))),viewComponent:b.a.createElement("div",{className:L.a.catalogHeaderTitle})}),b.a.createElement(ie,{enable:We,viewComponent:b.a.createElement(te,Xe)}),_e||Ye||We?null:b.a.createElement(n.a,{className:L.a.empty,image:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*wPMVTriBo40AAAAAAAAAAAAAARQnAQ",description:b.a.createElement(o.a,null,__("暂无内容"))})),Ae&&b.a.createElement(Q,{cover:F.cover,bookId:F.id,visible:Ae,onCancel:function(){return Ie(!1)},onSubmit:ot}))}},5165:function(e,t){e.exports=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n}}}]);