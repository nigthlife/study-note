/*! For license information please see 1397.d553eb33.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1397,28,140,243,257,480,807,970,1075,1138,1195],{1607:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-delete-solid",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm46.1 67.1c-4.028-4.028-10.512-4.1-14.628-.216l-.222.216-30.651 30.65-30.65-30.65c-4.027-4.028-10.512-4.1-14.627-.216l-.222.216c-4.028 4.027-4.1 10.512-.216 14.627l.216.222 30.65 30.65L83.1 159.25c-4.028 4.028-4.1 10.512-.216 14.628l.216.222c4.027 4.027 10.512 4.099 14.627.215l.222-.215 30.65-30.652L159.25 174.1c4.028 4.027 10.512 4.099 14.628.215l.222-.215c4.027-4.028 4.099-10.512.215-14.628l-.215-.222-30.652-30.651 30.652-30.65c4.027-4.027 4.099-10.512.215-14.627l-.215-.222Z",fill:"currentColor",fillRule:"evenodd"}))},1625:function(e,t,r){var n,o;n="undefined"!=typeof window?window:this,o=function(){var e,t;return function(r,n){e&&t||(e=document.createElement("canvas"),t=e.getContext("2d")),n=function(e){return Object.assign({width:250,height:80,color:"#ebebeb",alpha:.8,font:"10px Arial"},e)}(n);var o=n.width,i=n.height;return e.width=o,e.height=i,t.clearRect(0,0,o,i),t.globalAlpha=0,t.fillRect(0,0,o,i),t.globalAlpha=n.alpha,t.fillStyle=n.color,t.font=n.font,t.textAlign="left",t.textBaseline="bottom",t.translate(.1*o,.9*i),t.rotate(-Math.PI/12),t.fillText(r,0,0),e.toDataURL()}},e.exports?(e.exports=o(),e.exports.default=e.exports):n.alimask=o()},1881:function(e,t,r){"use strict";r.d(t,"d",(function(){return p.b})),r.d(t,"a",(function(){return p.a})),r.d(t,"e",(function(){return $})),r.d(t,"g",(function(){return te})),r.d(t,"b",(function(){return re})),r.d(t,"f",(function(){return ne})),r.d(t,"c",(function(){return oe}));r(537);var n=r(265),o=(r(61),r(23),r(145),r(42)),i=r(0),a=r.n(i),c=r(11),l=r.n(c),u=(r(67),r(8)),s=r.n(u),f=r(3164),d=r(754),p=r(596),m=r(31),h=r(176),v="index-module_label_qcR+D",y=function(e){return e.visible?a.a.createElement("span",{className:v},__("空间")):null},b=r(429),g=r(90),w=r.n(g),_=r(3167),O=r(49),E=r(3062),S=(r(1395),r(729)),j=(r(55),r(22)),x=r(35),P=r(912);function k(e){var t=e.group,r=e.book,n=e.closeModal;return a.a.createElement(P.a,{visible:!0,title:__("删除知识库"),content:a.a.createElement(S.a,{description:__("正在删除知识库 {name}，该操作不可逆，一旦操作成功，知识库下的所有内容将会删除。请输入下面内容再次确认操作。",{name:a.a.createElement("span",{className:"highlight_name"},r.name)}),type:"warning"}),buttonText:__("确定删除 {name}",{name:r.name}),slug:r.slug,onOk:function(){x.a.books.destroy({id:r.id}).then((function(e){j.a.success(__("操作成功"),3),n(),setTimeout((function(){window.location.href="/".concat(t.login)}),300)}))},onCancel:n})}k.propTypes={book:s.a.object,group:s.a.object,closeModal:s.a.func};var C=Object(b.d)((function(e){return{book:e.book,group:e.group}}))(k),I="BookAction-module_wrap_AiMmc";function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B(n.key),n)}}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var o=R(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}(this,r)}}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function M(e,t,r){return(t=B(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}var F=w()("book:action"),G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(i,e);var t,r,n,o=L(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M(N(t=o.call(this,e)),"doAction",(function(e){e&&t.setState({cmd:e,exportModal:e===O.a.BOOK.export_book.cmd,deleteModal:e===O.a.BOOK.delete_book.cmd})})),M(N(t),"handleCloseDeleteModal",(function(){t.setState({deleteModal:!1})})),t.state={exportModal:!1,deleteModal:!1,cmd:null},t}return t=i,(r=[{key:"render",value:function(){var e,t=this,r=this.props,n=r.className,o=r.book;switch(this.state.cmd){case O.a.BOOK.manage.cmd:window.open("/r/".concat(o.namespace,"/docs"),"_self");break;case O.a.BOOK.catalog_manage.cmd:window.open("/r/".concat(o.namespace,"/toc"),"_self");break;case O.a.BOOK.manage_assets.cmd:window.open("/".concat(o.namespace,"/assets"),"_self");break;case O.a.BOOK.collaborators.cmd:window.open("/r/".concat(o.namespace,"/collaborators"),"_self");break;case O.a.BOOK.recycles.cmd:window.open("/r/".concat(o.namespace,"/trash"),"_self");break;case O.a.BOOK.statistics.cmd:window.open("/r/".concat(o.namespace,"/statistics"),"_self");break;case O.a.BOOK.settings.cmd:case O.a.BOOK.rename_book.cmd:window.open("/".concat(o.namespace,"/settings/basic"),"_self");break;case O.a.DOC.modify_toc.cmd:window.open("/r/".concat(o.namespace,"/toc"),"_self");break;default:F("no processor, do nothing, just trigger onSelect and set state")}var i=null==o||null===(e=o.abilities)||void 0===e?void 0:e.destroy;return a.a.createElement("div",{className:"".concat(I," ").concat(n)},void 0,a.a.createElement(_.a,{visible:this.state.exportModal,book:o,formats:E.a.getExportFormats(),onCancel:function(){return t.setState({exportModal:!1,cmd:null})}}),this.state.deleteModal&&i&&a.a.createElement(C,{closeModal:this.handleCloseDeleteModal}))}}])&&D(t.prototype,r),n&&D(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.a.Component);G.defaultProps={className:""},G.propTypes={className:s.a.string,book:s.a.object.isRequired};var W=Object(b.d)((function(e){return{book:e.book,group:e.group}}),null,null,{forwardRef:!0})(G),z=r(3166),U=r(629),H=r(155),V=r(53),q=r(636),K={bookTitle:"index-module_bookTitle_lUUrB",name:"index-module_name_OMCDB",group:"index-module_group_xaGsx",text:"index-module_text_UrMgl",checked:"index-module_checked_3fCif",moreActions:"index-module_moreActions_YYACs"},Y=["group","book","showBookIcon","showPrivateIcon","showOrgLabel","href","target","iconSize","className","draggable","onItemClick","isMobile"];function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J.apply(this,arguments)}function Z(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}__("文档"),__("表格"),__("图集"),__("专栏"),__("资源");var $=function(e){var t=e.group,r=e.book,n=e.showBookIcon,o=void 0===n||n,i=e.showPrivateIcon,c=void 0===i||i,u=e.showOrgLabel,s=void 0!==u&&u,f=e.href,d=e.target,p=e.iconSize,m=e.className,v=e.draggable,y=e.onItemClick,b=e.isMobile,g=Z(e,Y),w=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp||window.appData.isYuqueMobileApp?"_blank":"_self",_=f||"/".concat(t.login,"/").concat(r.slug);return a.a.createElement(h.a,{href:_,className:l()("book-link",m),target:d||w,desktopDisableHref:!0,draggable:v,onClick:function(t){if(!V.d)return V.e?(t.preventDefault(),"Book"!==r.type?void window.YuqueDesktopAppJSBridge.openExternalLink(_):void Object(q.b)(_,{page:"bookOverview"})):void(y&&(t.preventDefault(),y(e)));Object(U.c)({book:r})}},a.a.createElement(te,J({},g,{group:t,book:r,showBookIcon:o,showPrivateIcon:c,showOrgLabel:s,iconSize:p,isMobile:b})))};$.propTypes={book:s.a.object,group:s.a.object,showBookIcon:s.a.bool,showOrgLabel:s.a.bool,className:s.a.string,target:s.a.string,showShareBadge:s.a.bool};s.a.object,s.a.object,s.a.bool,s.a.bool,s.a.bool,s.a.string,s.a.string,s.a.func,s.a.bool;var ee=function(e){var t=e.book,r=e.org,n=e.group,o=e.getPopupContainer,i=Object(z.c)({type:"book",target:t,org:r,group:n});return a.a.createElement("span",{className:"book-name-scope"},a.a.createElement(p.a,{public:i,book:t,group:n,getPopupContainer:o}))},te=function(e){var t=e.group,r=e.book,n=e.showGroupName,o=void 0!==n&&n,i=e.showBookIcon,c=void 0===i||i,u=e.showPrivateIcon,s=void 0===u||u,f=e.showOrgLabel,h=void 0!==f&&f,v=e.isMobile,b=void 0!==v&&v,g=e.checked,w=void 0!==g&&g,_=e.href,O=e.getPopupContainer,E=e.className,S=e.iconSize||(b?28:24),j=t&&(t.organization||{id:t.organization_id}),x=window.appData.me;return b?a.a.createElement("span",{className:l()(K.bookTitle,E)},a.a.createElement("div",{className:l()(K.icon,"book-icon-wrapper")},a.a.createElement(p.b,{group:t,book:r,width:S})),a.a.createElement("div",{className:l()(K.name,"book-title-name")},a.a.createElement("div",{className:l()(K.text,"book-title-text"),title:r.name},r.name),t.name&&a.a.createElement("div",{className:l()(K.group,"book-title-desc")},t.name)),a.a.createElement("div",{className:K.checked},w&&a.a.createElement(d.default,null))):a.a.createElement("span",{className:l()("lark-book-title",E)},c&&a.a.createElement(p.b,{group:t,book:r,width:S}),a.a.createElement("span",{className:"book-name"},o&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,t.name),a.a.createElement("span",{className:"book-name-split"},"/")),_&&a.a.createElement("a",{className:"book-name-text-wrapper",href:_},a.a.createElement("span",{className:"book-name-text",title:r.name},r.name)),!_&&a.a.createElement("span",{className:"book-name-text",title:r.name},r.name),(null==x?void 0:x.isAdmin)&&-1===r.status&&a.a.createElement("span",{className:"book-name-scope"},a.a.createElement(m.b,{name:"doc-has-content-risk",width:13,style:{opacity:.375}})),s&&a.a.createElement(H.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement("span",{"data-test-id":"book-access-scope"})}},a.a.createElement(ee,{book:r,org:j,group:t,getPopupContainer:O})),h&&a.a.createElement("span",{className:"book-name-orglabel"},a.a.createElement(y,{visible:t&&t.organization_id>0}))))};te.propTypes={group:s.a.object,book:s.a.object,iconSize:s.a.number,showBookIcon:s.a.bool,showPrivateIcon:s.a.bool,showOrgLabel:s.a.bool,showGroupName:s.a.bool,isMobile:s.a.bool,checked:s.a.bool,href:s.a.string,getPopupContainer:s.a.func,showShareBadge:s.a.bool};var re=function(e){var t=e.book,r=e.clickable;return t.user?r?a.a.createElement("a",{href:"/".concat(t.user.login),title:t.user.name,className:"book-belong"},t.user.name):a.a.createElement("span",{className:"book-belong",title:t.user.name},t.user.name):null};re.defaultProps={clickable:!0},re.propTypes={book:s.a.object,clickable:s.a.bool};s.a.string;var ne=function(e){var t=Object(i.useRef)(null),r=Q(Object(i.useState)(!1),2),n=r[0],c=r[1],l=e.book,u=e.group,s=e.me,d=E.a.actionsForNavMore(l,u,s).filter((function(e){return e.can||"divider"===e.action.cmd}));return d.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,{className:K.moreActions,visible:n,onVisibleChange:function(e){return c(e)},direction:"circle",iconWidth:20,content:a.a.createElement(o.a,{selectable:!1},d.map((function(e){return"divider"===e.action.cmd?a.a.createElement(o.a.Divider,null):a.a.createElement(o.a.Item,{disabled:!1===e.can,key:e.action.cmd,onClick:function(){t.current.doAction(e.action.cmd),c(!1)}},e.action.title)})))}),a.a.createElement(W,{ref:t})):null};ne.propTypes={book:s.a.object.isRequired,styles:s.a.object.isRequired,group:s.a.object.isRequired,me:s.a.object};s.a.object,s.a.object;__("导出 PDF"),__("设置"),__("删除"),__("转移"),__("分享");var oe=function(e,t){switch(e){case"Design":return"name"===t?__("如：语雀视觉设计"):__("如：视觉设计与规范");case"Sheet":return"name"===t?__("如：研发计划"):__("如：第一季度研发计划");case"Column":return"name"===t?__("如：团队专栏"):__("如：团队设计分享");case"Resource":return"name"===t?__("资源知识库"):__("上传资源文件、本地文档等内容");default:return"name"===t?__("如：产品文档"):__("如：产品设计与研发")}};(function(e){var t=e.belongs,r=e.onChange,i=__("归属");if(!t||t.length<=1)return a.a.createElement("span",null,i);return a.a.createElement(n.a,{trigger:["click"],overlay:a.a.createElement(o.a,{className:"dashboard-dropdown-menu",selectedKeys:[]},t.map((function(e,t){return a.a.createElement(o.a.Item,{key:e.type},a.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),function(e){r(e.type)}(e)}},e.text))})))},a.a.createElement("span",null,i,a.a.createElement(m.b,{name:"arrow-down",width:16})))}).propTypes={belongs:s.a.array.isRequired,onChange:s.a.func.isRequired}},1883:function(e,t,r){"use strict";r(3247);var n=r(3186);r(3063);t.a=n.b},1908:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-statistics",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M32 38c5.43 0 9.848 4.327 9.996 9.72L42 48v130.856c0 12.029 9.654 21.803 21.636 21.997l.364.003h160c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996l-.28.004H64c-22.964 0-41.623-18.43-41.994-41.305l-.006-.695V48c0-5.523 4.477-10 10-10Zm45.803 41.16c5.43 0 9.848 4.327 9.996 9.72l.004.28v81.922c0 5.523-4.477 10-10 10-5.43 0-9.848-4.327-9.996-9.72l-.004-.28V89.16c0-5.523 4.477-10 10-10Zm121.93 28.888c5.429 0 9.847 4.327 9.995 9.72l.004.28v53.034c0 5.523-4.477 10-10 10-5.429 0-9.848-4.327-9.996-9.72l-.004-.28v-53.034c0-5.522 4.477-10 10-10ZM138.767 38c5.429 0 9.848 4.327 9.996 9.72l.004.28v123.082c0 5.523-4.478 10-10 10-5.43 0-9.848-4.327-9.997-9.72l-.003-.28V48c0-5.523 4.477-10 10-10Z",fill:"currentColor",fillRule:"nonzero"}))},1909:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-arrow-left3",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M154.995 58.157c3.834 3.834 3.904 10.007.21 13.927l-.21.215-48.99 48.99c-3.834 3.834-3.904 10.007-.21 13.927l.21.215 48.99 48.99c3.905 3.905 3.905 10.237 0 14.142-3.834 3.834-10.008 3.904-13.927.21l-.215-.21-48.99-48.99c-11.599-11.599-11.715-30.331-.348-42.073l.348-.353 48.99-48.99c3.905-3.905 10.237-3.905 14.142 0Z",fill:"currentColor",fillRule:"nonzero"}))},1922:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-knowledge-base-home",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"m139.26 31.243.36.232 76.656 50.543a21.11 21.11 0 0 1 9.486 17.222l.004.401v96.129c0 17.616-14.138 31.93-31.687 32.215l-.532.004h-34.698c-.1 0-.198-.001-.297-.004-.183.01-.367.015-.552.015-5.43 0-9.848-4.327-9.996-9.72L148 218v-47.755c0-11.2-8.973-20.245-20-20.245-10.913 0-19.813 8.858-19.997 19.896l-.003.349V218c0 5.523-4.477 10-10 10-.185 0-.37-.005-.552-.015h-.017l-.28.004H62.453c-17.616 0-31.93-14.138-32.215-31.686l-.004-.533V99.64a21.11 21.11 0 0 1 9.157-17.4l.333-.223 76.656-50.543a21.11 21.11 0 0 1 22.88-.232ZM127.516 48.1l-.127.072-76.656 50.543a1.11 1.11 0 0 0-.49.788l-.009.138v96.129c0 6.646 5.306 12.053 11.913 12.215l.306.004H88L88 170.245C88 148.036 105.89 130 128 130c21.889 0 39.642 17.677 39.995 39.58l.005.665v37.744h25.547c6.646 0 12.053-5.306 12.215-11.913l.004-.306V99.64a1.11 1.11 0 0 0-.388-.842l-.11-.084-76.657-50.543a1.11 1.11 0 0 0-1.095-.072Z",fill:"currentColor",fillRule:"nonzero"}))},1924:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-directory",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M88 40.8c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L88 60.8H65.997L66 61v47c0 5.43 4.327 9.848 9.72 9.996L76 118h11c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L87 138H76c-3.506 0-6.872-.602-10-1.707V186c0 5.43 4.327 9.848 9.72 9.996L76 196h11c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L87 216H76c-16.403 0-29.731-13.164-29.996-29.504L46 186V61l.002-.2H26c-5.523 0-10-4.477-10-10 0-5.43 4.327-9.848 9.72-9.996L26 40.8h62Zm49.983-.653 92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Zm0 78 92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Zm0 78 92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Z",fill:"currentColor",fillRule:"nonzero"}))},1938:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-outline",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"m95.029 50.146 123 .354c5.523.016 9.987 4.506 9.971 10.029-.016 5.429-4.355 9.835-9.749 9.968l-.28.003-123-.354c-5.523-.015-9.987-4.505-9.971-10.028.016-5.43 4.355-9.836 9.749-9.968l.28-.004Zm0 69 123 .354c5.523.016 9.987 4.506 9.971 10.029-.016 5.429-4.355 9.835-9.749 9.968l-.28.003-123-.354c-5.523-.015-9.987-4.505-9.971-10.028.016-5.43 4.355-9.836 9.749-9.968l.28-.004Zm0 68 123 .354c5.523.016 9.987 4.506 9.971 10.029-.016 5.429-4.355 9.835-9.749 9.968l-.28.003-123-.354c-5.523-.015-9.987-4.505-9.971-10.028.016-5.43 4.355-9.836 9.749-9.968l.28-.004ZM44 75c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15Zm0 69c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15Zm0 68c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15Z",fill:"currentColor",fillRule:"nonzero"}))},1940:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-yuque",e.className].filter(Boolean).join(" ")}),n.createElement("defs",null,n.createElement("radialGradient",{cx:"60.212%",cy:"64.196%",fx:"60.212%",fy:"64.196%",r:"51.003%",gradientTransform:"scale(.85248 1) rotate(-68.415 .654 .565)",id:"165724840e"},n.createElement("stop",{stopColor:"#57CB86",offset:"0%"}),n.createElement("stop",{stopColor:"#FFF",stopOpacity:.8,offset:"100%"})),n.createElement("linearGradient",{x1:"82.746%",y1:"0%",x2:"20.277%",y2:"79.406%",id:"165724840b"},n.createElement("stop",{stopColor:"#7BD26A",offset:"0%"}),n.createElement("stop",{stopColor:"#07B26A",offset:"100%"})),n.createElement("rect",{id:"165724840a",x:0,y:0,width:26,height:26,rx:6.24}),n.createElement("path",{d:"M9.855 0h.269l.068.001h.07l.07.002h.071l.049.001h.049l.074.002.076.002.076.001.052.001.079.002.08.002.08.003.055.001.082.003.084.003.056.002.057.002.058.002.057.002.059.002.058.003.09.004.06.002.09.005.06.003.062.003.093.005.063.003.063.003.063.004.064.004.064.004.065.004.065.004.065.004.066.004.066.005c2.38.162 3.01 1.87 3.078 2.074l.003.011.003.01 1.033.055a.1.1 0 0 1 .044.19c-1.06.571-1.385 1.733-1.194 2.49.061.244.156.454.263.676l.067.14c.246.512.521 1.132.567 2.38.1 2.796-2.365 5.308-5.282 5.308H10.97l-.134.001h-.097l-.103.002h-.164l-.177.002-.19.002-.274.003-.22.002-.396.004-.43.005-.468.006-.297.003-.417.005-.553.007-.588.008-.497.007-.788.01-.553.008-1.025.014-1.094.016-.994.014-.516.008 6.238-7.07.057-.064.056-.064.056-.064.278-.314.055-.062.055-.062.054-.062.027-.03.054-.062.027-.03.054-.062.053-.061c.619-.715 1.17-1.412 1.561-2.212.435-1.224-.007-2.136-.459-2.69A3.31 3.31 0 0 0 9.057.53C8.903.333 9.007.005 9.3.005h.073L9.43.002h.093L9.58 0H9.793L9.855 0Z",id:"165724840d"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("mask",{id:"165724840c",fill:"#fff"},n.createElement("use",{xlinkHref:"#165724840a"})),n.createElement("use",{fill:"url(#165724840b)",xlinkHref:"#165724840a"}),n.createElement("g",{mask:"url(#165724840c)"},n.createElement("g",{transform:"translate(3.77 5.46)"},n.createElement("use",{fill:"#E5FBEF",xlinkHref:"#165724840d"}),n.createElement("use",{fillOpacity:.3,fill:"url(#165724840e)",xlinkHref:"#165724840d"})),n.createElement("path",{d:"M11.003 11.95c-2.7 3.027-5.913 6.711-7.133 8.095-.235.267-.007.518.175.55 9.1 1.559 11.989-2.715 12.632-4.669.881-2.673-.363-3.977-1.067-4.402-2.388-1.443-4.16-.077-4.607.425Z",fill:"#FAFFFC"}))))},2867:function(e,t,r){"use strict";r.d(t,"b",(function(){return f}));var n=r(1625),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t,r=e.el,n=e.text,i=e.style,a=e.backgroundImage;if(r||(r=document.body),a){if(0!==a.indexOf("text://"))return void(r.style.backgroundImage="url('".concat(a,"')"));n=a.substring(7)}var c=r.firstElementChild;if(c&&(!c||"function"!=typeof c.getAttribute||"wm"!==c.getAttribute("class"))){var l=u({width:480,height:180,color:"dark"===(null===(t=window.appData.themeManager)||void 0===t?void 0:t.current)?"#fff":"#333",alpha:.5,font:"14px Arial"},i);r.classList?r.classList.add("wm-wrapper"):r.className="".concat(r.className," wm-wrapper");var s=document.createElement("div");return s.setAttribute("class","wm"),s.style.backgroundImage="url('".concat(o()(n,l),"')"),r.insertBefore(s,c),function(){var e,t;null===(e=r.classList)||void 0===e||e.remove("wm-wrapper"),null===(t=r)||void 0===t||t.removeChild(s)}}}t.a=function(e,t){"string"==typeof e&&(e=[e]);var r=[];if(e.forEach((function(e){var n=e.startsWith("#")?e:".".concat(e),o=document.querySelectorAll(n);0!==!o.length&&(r.length>0&&t||r.push.apply(r,a(o)))})),0!==r.length){var n=window.appData,o=n.isYuque,i=n.settings,c=n.backgroundImage,l=n.space,u=n.me,s=[];return c?(r.forEach((function(e){s.push(f({el:e,backgroundImage:c}))})),function(){s.forEach((function(e){e()}))}):((l&&l.enable_watermark||!o&&i&&i.watermark_enable)&&r.forEach((function(e){var t=o?u.id:u.work_id;s.push(f({el:e,text:"".concat(u.name,"(").concat(t,")")}))})),function(){s.forEach((function(e){e()}))})}}},2870:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}));var n={disabled:0,enable:1},o={System:0}},3164:function(e,t,r){"use strict";r(183);var n=r(104),o=r(0),i=r.n(o),a=r(8),c=r.n(a),l=r(31),u="index-module_more_sDgGm",s=["iconClassName","data-testid","visible","onVisibleChange","getPopupContainer","isHover","iconName","placement","isMenuType"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=function(e){return e.parentNode};function m(e){var t=e.iconClassName,r=e["data-testid"],o=void 0===r?"more-actions":r,a=e.visible,c=e.onVisibleChange,m=e.getPopupContainer,h=void 0===m?p:m,v=e.isHover,y=e.iconName,b=e.placement,g=e.isMenuType,w=d(e,s),_={horizontal:"more-horizontal",vertical:"more-vertical",circle:"more-circle"},O={};void 0!==a&&(O.visible=e.visible),void 0!==c&&(O.onVisibleChange=e.onVisibleChange);var E=e.iconWidth||16,S={lineHeight:"".concat(E,"px"),padding:(24-E)/2},j=["click"];return v&&(j[0]="hover"),i.a.createElement(n.a,f({className:e.className,overlayClassName:e.overlayClassName,type:g?"menu":void 0,getPopupContainer:h,placement:b||"bottomRight",destroyTooltipOnHide:e.destroyTooltipOnHide,autoAdjustOverflow:!0,trigger:j,content:e.content,hideWhenInactive:!0},O,w),e.children||i.a.createElement("span",{className:u,style:S,"data-testid":o},i.a.createElement(l.b,{name:y||_[e.direction]||_.horizontal,width:E,className:t})))}m.defaultProps={direction:"horizontal",isMenuType:!0},m.propTypes={className:c.a.string,overlayClassName:c.a.string,direction:c.a.oneOf(["horizontal","vertical","circle"]),iconWidth:c.a.number,visible:c.a.bool,content:c.a.node.isRequired,onVisibleChange:c.a.func,"data-testid":c.a.string,getPopupContainer:c.a.func,iconName:c.a.string,destroyTooltipOnHide:c.a.bool,placement:c.a.string,isMenuType:c.a.bool,iconClassName:c.a.string,children:c.a.node,isHover:c.a.bool};t.a=m},3166:function(e,t,r){"use strict";var n=r(157);r.d(t,"a",(function(){return n.a})),r.d(t,"c",(function(){return n.c})),r.d(t,"b",(function(){return n.b}))},3169:function(e,t,r){"use strict";var n=r(633),o=r(1417),i=r(53),a=r(541),c=r(182),l=r(456),u=r(196),s=r(49);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(){d=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p={};function m(){}function h(){}function v(){}var y={};l(y,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,i)&&(y=g);var w=v.prototype=m.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==f(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:h,configurable:!0}),h.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),l(O.prototype,a,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(w),l(w,c,"Generator"),l(w,i,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){v(i,n,o,a,c,"next",e)}function c(e){v(i,n,o,a,c,"throw",e)}a(void 0)}))}}function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w={limitExceeded:function(e){return e&&e.length>=a.MAX_NODES_COUNT},shouldShowToc:function(e){return!!e&&"Book"===e.layout},shouldShowColumnToc:function(e){return!!e&&"Column"===e.layout},parseCatalogVersions:function(e){if(!e)return[];var t,r=[],o=b(e);try{for(o.s();!(t=o.n()).done;){var i=t.value,a=i.item.toc_yml;if(a)try{var c=Object(n.ymlToToc)(a),l=c[0];l&&l.published&&(i.meta=c[0],i.toc=c.slice(1),i.catalog_tree=Object(n.generateTreeFromYml)(a),r.push(i))}catch(e){}}}catch(e){o.e(e)}finally{o.f()}return r},parseVersion:function(e){if(e){try{var t,r=e.item.toc_yml,o=Object(n.ymlToToc)(r),i=b(o);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.key=a.uuid}}catch(e){i.e(e)}finally{i.f()}var c=o[0];c?(e.meta=c,e.toc=o.slice(1)):e.toc=o,e.catalog_tree=Object(n.generateTreeByTocItems)(e.toc)}catch(e){console.error(e)}return e}},updateNode:function(e){var t=arguments,r=this;return y(d().mark((function o(){var i,c,l;return d().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=t.length>1&&void 0!==t[1]?t[1]:{},c=t.length>2&&void 0!==t[2]?t[2]:{catalog_tree:!0},e){o.next=4;break}return o.abrupt("return");case 4:if(!e.should_manually_create_uid){o.next=8;break}return o.next=7,u.webProxy.catalogNodes.ensureUpdateTocYml({book_id:e.id,toc_yml:Object(n.tocToYml)(e.toc)});case 7:e.should_manually_create_uid=!1;case 8:return o.prev=8,o.next=11,u.webProxy.catalogNodes.update(m({book_id:e.id,format:"list"},i),{ignoreGlobalMessage:!0,useOriginResp:!0});case 11:l=o.sent,o.next=18;break;case 14:throw o.prev=14,o.t0=o.catch(8),"limit_exceeded"===o.t0.code&&(o.t0.message=__("目录节点数超过最大限制 {MAX_NODES_COUNT}，无法新增",{MAX_NODES_COUNT:a.MAX_NODES_COUNT})),o.t0;case 18:return o.abrupt("return",r._returnWithCatalogTree(m(m({},l.meta),{},{toc:l.data}),c));case 19:case"end":return o.stop()}}),o,null,[[8,14]])})))()},_returnWithCatalogTree:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).catalog_tree&&e.toc&&(e.catalog_tree=Object(n.generateTreeByTocItems)(e.toc)),e},getCatalogNodes:function(e){var t=arguments;return y(d().mark((function r(){var o,i,a,c,l;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:{},e){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,u.webProxy.catalogNodes.find(m({book_id:e},o),{useOriginResp:!0});case 5:i=r.sent,a=b(i.data);try{for(a.s();!(c=a.n()).done;)(l=c.value).key=l.uuid}catch(e){a.e(e)}finally{a.f()}return r.abrupt("return",m({catalog_tree:Object(n.generateTreeByTocItems)(i.data),toc:i.data},i.meta));case 9:case"end":return r.stop()}}),r)})))()},actionsInReaderPage:function(e,t){var r=[];return e.type!==a.TYPES.link?r.push(s.a.CATALOG.rename):r.push(s.a.CATALOG.edit_link),t.create_doc&&(e.type!==a.TYPES.doc||i.b||r.push(s.a.DOC.edit)),e.type!==a.TYPES.title&&e.type!==a.TYPES.uncreated_doc&&r.push(s.a.DOC.copyLink),e.type!==a.TYPES.doc||i.b||r.push(s.a.DOC.open_in_new_tab),e.type===a.TYPES.doc&&t.create_doc&&i.b&&r.push(s.a.DOC.open_in_new_window),t.create_doc&&(r.push(s.a.DOC.divide),r.push(s.a.CATALOG.remove),r.push(s.a.DOC.divide),r.push(s.a.CATALOG.copy),r.push(s.a.CATALOG.move)),t.create_doc&&e.type===a.TYPES.doc&&r.push(s.a.CATALOG.export),t.create_doc&&(r.push(s.a.DOC.divide),r.push(s.a.CATALOG.destroy)),r},actionsForEdit:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[];return"desktop"===t?(n.push(s.a.CATALOG.move),n):(e.type===a.TYPES.link?n.push(s.a.CATALOG.edit_link):n.push(s.a.CATALOG.rename),"lite"===t?this.actionsInReaderPage(e,r):("full"===t&&(e.type===a.TYPES.doc&&(n.push(s.a.CATALOG.view_doc),n.push(s.a.CATALOG.remove),n.push(s.a.DOC.edit)),n.push(s.a.CATALOG.copy),n.push(s.a.CATALOG.move),r.export&&e.type===a.TYPES.doc&&n.push(s.a.CATALOG.export),e.share&&e.share.status===l.STATUS.active&&(n.push(s.a.DOC.divide),n.push(s.a.DOC.unshare)),n.push(s.a.DOC.divide),n.push(s.a.CATALOG.destroy)),n))},formatNode:function(e){return{type:e.type||c.TOC_TYPES.DOC,title:e.title,uuid:e.uuid||Object(o.nanoid)(16),url:e.url||null,prev_uuid:e.prev_uuid||null,sibling_uuid:e.sibling_uuid||null,child_uuid:e.child_uuid||null,parent_uuid:e.parent_uuid||null,doc_id:e.doc_id||null,level:e.level||0,id:e.doc_id||null,open_window:0===e.open_window?0:1,visible:0===e.visible?0:1}},insertNodeToCatalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{catalog_tree:!0},n=w.formatNode(t),o=t.target_uuid,i=t.action,a=e.findIndex((function(e){return e.uuid===o}));if(a>=0){var c=e[a];n.level="insertSibling"===i?c.level:c.level+1,e.splice(a+1,0,n)}else e.unshift(n);return this._returnWithCatalogTree({toc:e,node_uuid:n.uuid},r)},getRedirectURL:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.group,o=r.book,i=r.currentItem,a=e.filter((function(e){return"DOC"===e.type&&e.id}));if(!i)return a&&a[0]?"/".concat(n.login,"/").concat(o.slug,"/").concat(a[0].url):"";var c,l=a.findIndex((function(e){return e.url&&e.url===i.url}));return a=t.filter((function(e){return"DOC"===e.type&&e.id})),l<0?c=a[0]:(c=a[l]||null)||(c=a[l-1]||null),c?"/".concat(n.login,"/").concat(o.slug,"/").concat(c.url):""}};t.a=w},3177:function(e,t,r){var n,o,i;o=[],n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},r=!t.document&&!!t.postMessage,n=t.IS_PAPA_WORKER||!1,o={},i=0,a={parse:function(r,n){var c=(n=n||{}).dynamicTyping||!1;if(_(c)&&(n.dynamicTypingFunction=c,c={}),n.dynamicTyping=c,n.transform=!!_(n.transform)&&n.transform,n.worker&&a.WORKERS_SUPPORTED){var l=function(){if(!a.WORKERS_SUPPORTED)return!1;var r,n,c=(r=t.URL||t.webkitURL||null,n=e.toString(),a.BLOB_URL||(a.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",n,")();"],{type:"text/javascript"})))),l=new t.Worker(c);return l.onmessage=v,l.id=i++,o[l.id]=l}();return l.userStep=n.step,l.userChunk=n.chunk,l.userComplete=n.complete,l.userError=n.error,n.step=_(n.step),n.chunk=_(n.chunk),n.complete=_(n.complete),n.error=_(n.error),delete n.worker,void l.postMessage({input:r,config:n,workerId:l.id})}var p=null;return a.NODE_STREAM_INPUT,"string"==typeof r?(r=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(r),p=n.download?new u(n):new f(n)):!0===r.readable&&_(r.read)&&_(r.on)?p=new d(n):(t.File&&r instanceof File||r instanceof Object)&&(p=new s(n)),p.stream(r)},unparse:function(e,t){var r=!1,n=!0,o=",",i="\r\n",c='"',l=c+c,u=!1,s=null,f=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||a.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(o=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(r=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(u=t.skipEmptyLines),"string"==typeof t.newline&&(i=t.newline),"string"==typeof t.quoteChar&&(c=t.quoteChar),"boolean"==typeof t.header&&(n=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");s=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+c),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(f=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var d=new RegExp(m(c),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,u);if("object"==typeof e[0])return p(s||Object.keys(e[0]),e,u)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||s),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],u);throw new Error("Unable to serialize unrecognized input");function p(e,t,r){var a="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var c=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(c&&n){for(var u=0;u<e.length;u++)0<u&&(a+=o),a+=h(e[u],u);0<t.length&&(a+=i)}for(var s=0;s<t.length;s++){var f=c?e.length:t[s].length,d=!1,p=c?0===Object.keys(t[s]).length:0===t[s].length;if(r&&!c&&(d="greedy"===r?""===t[s].join("").trim():1===t[s].length&&0===t[s][0].length),"greedy"===r&&c){for(var m=[],v=0;v<f;v++){var y=l?e[v]:v;m.push(t[s][y])}d=""===m.join("").trim()}if(!d){for(var b=0;b<f;b++){0<b&&!p&&(a+=o);var g=c&&l?e[b]:b;a+=h(t[s][g],b)}s<t.length-1&&(!r||0<f&&!p)&&(a+=i)}}return a}function h(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var n=!1;f&&"string"==typeof e&&f.test(e)&&(e="'"+e,n=!0);var i=e.toString().replace(d,l);return(n=n||!0===r||"function"==typeof r&&r(e,t)||Array.isArray(r)&&r[t]||function(e,t){for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1}(i,a.BAD_DELIMITERS)||-1<i.indexOf(o)||" "===i.charAt(0)||" "===i.charAt(i.length-1))?c+i+c:i}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!r&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=h,a.ParserHandle=p,a.NetworkStreamer=u,a.FileStreamer=s,a.StringStreamer=f,a.ReadableStreamStreamer=d,t.jQuery){var c=t.jQuery;c.fn.parse=function(e){var r=e.config||{},n=[];return this.each((function(e){if("INPUT"!==c(this).prop("tagName").toUpperCase()||"file"!==c(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)n.push({file:this.files[o],inputElem:this,instanceConfig:c.extend({},r)})})),o(),this;function o(){if(0!==n.length){var t,r,o,l,u=n[0];if(_(e.before)){var s=e.before(u.file,u.inputElem);if("object"==typeof s){if("abort"===s.action)return t="AbortError",r=u.file,o=u.inputElem,l=s.reason,void(_(e.error)&&e.error({name:t},r,o,l));if("skip"===s.action)return void i();"object"==typeof s.config&&(u.instanceConfig=c.extend(u.instanceConfig,s.config))}else if("skip"===s)return void i()}var f=u.instanceConfig.complete;u.instanceConfig.complete=function(e){_(f)&&f(e,u.file,u.inputElem),i()},a.parse(u.file,u.instanceConfig)}else _(e.complete)&&e.complete()}function i(){n.splice(0,1),o()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=g(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new p(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,r){if(this.isFirstChunk&&_(this._config.beforeFirstChunk)){var o=this._config.beforeFirstChunk(e);void 0!==o&&(e=o)}this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+e;this._partialLine="";var c=this._handle.parse(i,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=c.meta.cursor;this._finished||(this._partialLine=i.substring(l-this._baseIndex),this._baseIndex=l),c&&c.data&&(this._rowCount+=c.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:c,workerId:a.WORKER_ID,finished:u});else if(_(this._config.chunk)&&!r){if(this._config.chunk(c,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);c=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(c.data),this._completeResults.errors=this._completeResults.errors.concat(c.errors),this._completeResults.meta=c.meta),this._completed||!u||!_(this._config.complete)||c&&c.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||c&&c.meta.paused||this._nextChunk(),c}this._halted=!0},this._sendError=function(e){_(this._config.error)?this._config.error(e):n&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:e,finished:!1})}}function u(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),l.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var n in e)t.setRequestHeader(n,e[n])}if(this._config.chunkSize){var o=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+o)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var r=t.statusText||e;this._sendError(new Error(r))}}function s(e){var t,r;(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),l.call(this,e);var n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var o=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,o)}var i=t.readAsText(e,this._config.encoding);n||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function f(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,r=this._config.chunkSize;return r?(e=t.substring(0,r),t=t.substring(r)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function d(e){l.call(this,e=e||{});var t=[],r=!0,n=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=w((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=w((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=w((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(e){var t,r,n,o=Math.pow(2,53),i=-o,c=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,s=0,f=0,d=!1,p=!1,v=[],y={data:[],errors:[],meta:{}};if(_(e.step)){var b=e.step;e.step=function(t){if(y=t,E())O();else{if(O(),0===y.data.length)return;s+=t.data.length,e.preview&&s>e.preview?r.abort():(y.data=y.data[0],b(y,u))}}}function w(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function O(){return y&&n&&(j("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines&&(y.data=y.data.filter((function(e){return!w(e)}))),E()&&function(){if(y)if(Array.isArray(y.data[0])){for(var t=0;E()&&t<y.data.length;t++)y.data[t].forEach(r);y.data.splice(0,1)}else y.data.forEach(r);function r(t,r){_(e.transformHeader)&&(t=e.transformHeader(t,r)),v.push(t)}}(),function(){if(!y||!e.header&&!e.dynamicTyping&&!e.transform)return y;function t(t,r){var n,o=e.header?{}:[];for(n=0;n<t.length;n++){var i=n,a=t[n];e.header&&(i=n>=v.length?"__parsed_extra":v[n]),e.transform&&(a=e.transform(a,i)),a=S(i,a),"__parsed_extra"===i?(o[i]=o[i]||[],o[i].push(a)):o[i]=a}return e.header&&(n>v.length?j("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+n,f+r):n<v.length&&j("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+n,f+r)),o}var r=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(t),r=y.data.length):y.data=t(y.data,0),e.header&&y.meta&&(y.meta.fields=v),f+=r,y}()}function E(){return e.header&&0===v.length}function S(t,r){return n=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[n]&&(e.dynamicTyping[n]=e.dynamicTypingFunction(n)),!0===(e.dynamicTyping[n]||e.dynamicTyping)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(function(e){if(c.test(e)){var t=parseFloat(e);if(i<t&&t<o)return!0}return!1}(r)?parseFloat(r):l.test(r)?new Date(r):""===r?null:r):r;var n}function j(e,t,r,n){var o={type:e,code:t,message:r};void 0!==n&&(o.row=n),y.errors.push(o)}this.parse=function(o,i,c){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var r=new RegExp(m(t)+"([^]*?)"+m(t),"gm"),n=(e=e.replace(r,"")).split("\r"),o=e.split("\n"),i=1<o.length&&o[0].length<n[0].length;if(1===n.length||i)return"\n";for(var a=0,c=0;c<n.length;c++)"\n"===n[c][0]&&a++;return a>=n.length/2?"\r\n":"\r"}(o,l)),n=!1,e.delimiter)_(e.delimiter)&&(e.delimiter=e.delimiter(o),y.meta.delimiter=e.delimiter);else{var u=function(t,r,n,o,i){var c,l,u,s;i=i||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var f=0;f<i.length;f++){var d=i[f],p=0,m=0,v=0;u=void 0;for(var y=new h({comments:o,delimiter:d,newline:r,preview:10}).parse(t),b=0;b<y.data.length;b++)if(n&&w(y.data[b]))v++;else{var g=y.data[b].length;m+=g,void 0!==u?0<g&&(p+=Math.abs(g-u),u=g):u=g}0<y.data.length&&(m/=y.data.length-v),(void 0===l||p<=l)&&(void 0===s||s<m)&&1.99<m&&(l=p,c=d,s=m)}return{successful:!!(e.delimiter=c),bestDelimiter:c}}(o,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);u.successful?e.delimiter=u.bestDelimiter:(n=!0,e.delimiter=a.DefaultDelimiter),y.meta.delimiter=e.delimiter}var s=g(e);return e.preview&&e.header&&s.preview++,t=o,r=new h(s),y=r.parse(t,i,c),O(),d?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,r.abort(),t=_(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){u.streamer._halted?(d=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,r.abort(),y.meta.aborted=!0,_(e.complete)&&e.complete(y),t=""}}function m(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h(e){var t,r=(e=e||{}).delimiter,n=e.newline,o=e.comments,i=e.step,c=e.preview,l=e.fastMode,u=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof r||-1<a.BAD_DELIMITERS.indexOf(r))&&(r=","),o===r)throw new Error("Comment character same as delimiter");!0===o?o="#":("string"!=typeof o||-1<a.BAD_DELIMITERS.indexOf(o))&&(o=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var s=0,f=!1;this.parse=function(a,d,p){if("string"!=typeof a)throw new Error("Input must be a string");var h=a.length,v=r.length,y=n.length,b=o.length,g=_(i),w=[],O=[],E=[],S=s=0;if(!a)return q();if(e.header&&!d){var j=a.split(n)[0].split(r),x=[],P={},k=!1;for(var C in j){var I=j[C];_(e.transformHeader)&&(I=e.transformHeader(I,C));var A=I,D=P[I]||0;for(0<D&&(k=!0,A=I+"_"+D),P[I]=D+1;x.includes(A);)A=A+"_"+D;x.push(A)}if(k){var T=a.split(n);T[0]=x.join(r),a=T.join(n)}}if(l||!1!==l&&-1===a.indexOf(t)){for(var L=a.split(n),N=0;N<L.length;N++){if(E=L[N],s+=E.length,N!==L.length-1)s+=n.length;else if(p)return q();if(!o||E.substring(0,b)!==o){if(g){if(w=[],z(E.split(r)),K(),f)return q()}else z(E.split(r));if(c&&c<=N)return w=w.slice(0,c),q(!0)}}return q()}for(var R=a.indexOf(r,s),M=a.indexOf(n,s),B=new RegExp(m(u)+m(t),"g"),F=a.indexOf(t,s);;)if(a[s]!==t)if(o&&0===E.length&&a.substring(s,s+b)===o){if(-1===M)return q();s=M+y,M=a.indexOf(n,s),R=a.indexOf(r,s)}else if(-1!==R&&(R<M||-1===M))E.push(a.substring(s,R)),s=R+v,R=a.indexOf(r,s);else{if(-1===M)break;if(E.push(a.substring(s,M)),V(M+y),g&&(K(),f))return q();if(c&&w.length>=c)return q(!0)}else for(F=s,s++;;){if(-1===(F=a.indexOf(t,F+1)))return p||O.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:s}),H();if(F===h-1)return H(a.substring(s,F).replace(B,t));if(t!==u||a[F+1]!==u){if(t===u||0===F||a[F-1]!==u){-1!==R&&R<F+1&&(R=a.indexOf(r,F+1)),-1!==M&&M<F+1&&(M=a.indexOf(n,F+1));var G=U(-1===M?R:Math.min(R,M));if(a.substr(F+1+G,v)===r){E.push(a.substring(s,F).replace(B,t)),a[s=F+1+G+v]!==t&&(F=a.indexOf(t,s)),R=a.indexOf(r,s),M=a.indexOf(n,s);break}var W=U(M);if(a.substring(F+1+W,F+1+W+y)===n){if(E.push(a.substring(s,F).replace(B,t)),V(F+1+W+y),R=a.indexOf(r,s),F=a.indexOf(t,s),g&&(K(),f))return q();if(c&&w.length>=c)return q(!0);break}O.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:w.length,index:s}),F++}}else F++}return H();function z(e){w.push(e),S=s}function U(e){var t=0;if(-1!==e){var r=a.substring(F+1,e);r&&""===r.trim()&&(t=r.length)}return t}function H(e){return p||(void 0===e&&(e=a.substring(s)),E.push(e),s=h,z(E),g&&K()),q()}function V(e){s=e,z(E),E=[],M=a.indexOf(n,s)}function q(e){return{data:w,errors:O,meta:{delimiter:r,linebreak:n,aborted:f,truncated:!!e,cursor:S+(d||0)}}}function K(){i(q()),w=[],O=[]}},this.abort=function(){f=!0},this.getCharIndex=function(){return s}}function v(e){var t=e.data,r=o[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){n=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(_(r.userStep)){for(var a=0;a<t.results.data.length&&(r.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},i),!n);a++);delete t.results}else _(r.userChunk)&&(r.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!n&&y(t.workerId,t.results)}function y(e,t){var r=o[e];_(r.userComplete)&&r.userComplete(t),r.terminate(),delete o[e]}function b(){throw new Error("Not implemented.")}function g(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=g(e[r]);return t}function w(e,t){return function(){e.apply(t,arguments)}}function _(e){return"function"==typeof e}return n&&(t.onmessage=function(e){var r=e.data;if(void 0===a.WORKER_ID&&r&&(a.WORKER_ID=r.workerId),"string"==typeof r.input)t.postMessage({workerId:a.WORKER_ID,results:a.parse(r.input,r.config),finished:!0});else if(t.File&&r.input instanceof File||r.input instanceof Object){var n=a.parse(r.input,r.config);n&&t.postMessage({workerId:a.WORKER_ID,results:n,finished:!0})}}),(u.prototype=Object.create(l.prototype)).constructor=u,(s.prototype=Object.create(l.prototype)).constructor=s,(f.prototype=Object.create(f.prototype)).constructor=f,(d.prototype=Object.create(l.prototype)).constructor=d,a},void 0===(i="function"==typeof n?n.apply(t,o):n)||(e.exports=i)},3187:function(e,t,r){"use strict";var n=r(419);t.a=n.a},3196:function(e,t,r){"use strict";var n=r(1),o=r.n(n),i=(r(3070),r(1405)),a=r(34),c=r.n(a),l=r(44),u=r.n(l),s=r(0),f=r.n(s),d=r(8),p=r.n(d),m=r(11),h=r.n(m),v=r(92),y=r.n(v),b=(r(3195),["className","showSizeChanger"]);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=f.a.forwardRef((function(e,t){var r=e.className,n=e.showSizeChanger,o=void 0!==n&&n,a=u()(e,b);return f.a.createElement(i.a,c()({},a,{className:h()("larkui-pagination",r),showSizeChanger:o,ref:t}))}));_.propTypes=w(w({},i.a.PaginationProps),{},{className:p.a.string,showSizeChanger:p.a.bool}),y()(_,i.a),t.a=_},3551:function(e,t,r){"use strict";var n=r(243);r.d(t,"a",(function(){return n.a}))},3577:function(e,t,r){"use strict";r.d(t,"e",(function(){return a}));var n=r(249),o=r.n(n),i=r(33);r.d(t,"i",(function(){return i.WORKFLOW_EVENT})),r.d(t,"h",(function(){return i.SAVE_TYPE})),r.d(t,"d",(function(){return i.ERROR_CODE})),r.d(t,"f",(function(){return i.MESSAGE})),r.d(t,"a",(function(){return i.DOC_STATUS})),r.d(t,"g",(function(){return i.NET_STATUS})),r.d(t,"b",(function(){return i.EDIT_MODE})),r.d(t,"c",(function(){return i.EDIT_SCENE}));var a={edit:{key:"e",title:"E"},publish:{key:["⌘+enter","ctrl+enter"],title:o.a.mac?"⌘+Enter":"Ctrl+Enter"}};i.WORKFLOW_EVENT,i.ACTION,i.SAVE_TYPE,i.ERROR_CODE,i.MESSAGE,i.DOC_STATUS,i.NET_STATUS,i.EDIT_MODE},3593:function(e,t,r){"use strict";var n=r(317);r.d(t,"b",(function(){return n.b})),r.d(t,"a",(function(){return n.a}))},3615:function(e,t,r){"use strict";var n=r(0),o=r(8),i=r(3633);function a(){}a.prototype=Object.create(n.Component.prototype),a.displayName="DocumentTitle",a.propTypes={title:o.string.isRequired},a.prototype.render=function(){return this.props.children?n.Children.only(this.props.children):null},e.exports=i((function(e){var t=e[e.length-1];if(t)return t.title}),(function(e){var t=e||"";t!==document.title&&(document.title=t)}))(a)},3629:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));var n=r(24),o=r(157),i=function(e,t,r){var i=window.appData.note;return i?1===i.public:(e=e||window.appData.group,t=t||window.appData.book,r=r||window.appData.doc,!(!e||!t)&&(r?Object(o.c)({type:"doc",target:r,group:e,book:t}):Object(o.c)({type:"book",target:t,group:e}))===n.PRIVACY.public)},a=function(e,t,r){var n=window.appData.note;return n?!!n.is_public:(e=e||window.appData.share,t=t||window.appData.book,r=r||window.appData.doc,!!(e&&t&&r&&r.book_id===t.id)&&(0===e.status&&0===e.scope&&(e.target_id===r.book_id||e.target_id===r.id)))}},3633:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=r(0),i=n(o),a=n(r(543));function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,r){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==r&&"function"!=typeof r)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!=typeof n)throw new Error("Expected WrappedComponent to be a React component.");var u,s=[];function f(){u=e(s.map((function(e){return e.props}))),d.canUseDOM?t(u):r&&(u=r(u))}var d=function(e){var t,r;function o(){return e.apply(this,arguments)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.peek=function(){return u},o.rewind=function(){if(o.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=u;return u=void 0,s=[],e};var c=o.prototype;return c.shouldComponentUpdate=function(e){return!a(e,this.props)},c.componentWillMount=function(){s.push(this),f()},c.componentDidUpdate=function(){f()},c.componentWillUnmount=function(){var e=s.indexOf(this);s.splice(e,1),f()},c.render=function(){return i.createElement(n,this.props)},o}(o.Component);return c(d,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),c(d,"canUseDOM",l),d}}},3635:function(e,t,r){"use strict";r(183);var n=r(104),o=r(0),i=r.n(o),a=r(11),c=r.n(a),l=r(8),u=r.n(l),s=r(429),f=r(31),d=r(3593),p={bookIconPopover:"BookIcon-module_bookIconPopover_-uyNA",bookTitle:"BookIcon-module_bookTitle_hK56I",bookIconSelector:"BookIcon-module_bookIconSelector_yaICm",iconSelectorTab:"BookIcon-module_iconSelectorTab_SP0xx",iconSelectorTabActive:"BookIcon-module_iconSelectorTabActive_l6Wg3",iconSelectorContent:"BookIcon-module_iconSelectorContent_3acOH",iconSelectorContentTab2:"BookIcon-module_iconSelectorContentTab2_sapYE",iconSelectorColorPicker:"BookIcon-module_iconSelectorColorPicker_W+uxH",spanActive:"BookIcon-module_spanActive_zUcmt"};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,r)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function O(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}var S=d.b.getSelectorIcons().URL_TYPE_LIST,j=["book-icon-alipay","book-icon-alibaba","book-icon-taobao"],x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(l,e);var t,r,o,a=g(l);function l(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),O(w(r=a.call(this,e,t)),"updateIcon",(function(e,t){var n=r.state.bookIcon;if(n[e]!==t){var o=v({},n);if(o[e]=t,"type"===e)switch(t){case"icon":case"url":o.symbol=S[0];break;default:return}o.type="url",r.setState({bookIcon:o}),r.props.updateIcon(o,r.props.book)}}));var n=e.value,o=e.icon;return r.state={bookIcon:null!=n&&n.type?n:{type:"url",symbol:o||S[0]}},r}return t=l,(r=[{key:"render",value:function(){var e=this,t=this.state.bookIcon,r=this.props.value,o=t.type||r.type||"url";return i.a.createElement(n.a,{trigger:this.props.disabled?"":"click",noArrow:!0,getPopupContainer:function(e){return e.parentNode},overlayClassName:p.bookIconPopover,placement:"bottomLeft",content:i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:p.bookIconSelector},i.a.createElement("ul",{className:p.iconSelectorTab},i.a.createElement("li",{onClick:function(){return e.updateIcon("type","url")},"data-testid":"bookicon-url",className:"url"===o?p.iconSelectorTabActive:""},__("默认"))),i.a.createElement("div",null,i.a.createElement("ul",{className:p.iconSelectorContent},S.filter((function(e){return!j.includes(e)})).map((function(t,r){return i.a.createElement("li",{key:r,onClick:function(){return e.updateIcon("symbol",t)}},i.a.createElement(f.b,{className:p.bookIcon,name:t,width:24}))}))))))},i.a.createElement("div",{tabIndex:"0","data-testid":"popover-bookicon",style:v({},this.props.style),className:this.props.className},i.a.createElement(f.b,{className:c()(p.bookIcon,O({},p.iconSize,"icon"===t.type)),size:this.props.size,width:this.props.width,height:this.props.height,name:d.b.getSymbolName(t)||r.symbol})))}}])&&y(t.prototype,r),o&&y(t,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(o.Component);x.defaultProps={value:{}},x.propTypes={value:u.a.object,book:u.a.object,icon:u.a.string,updateIcon:u.a.func.isRequired,disabled:u.a.bool,className:u.a.string,size:u.a.number,width:u.a.number,height:u.a.number};t.a=Object(s.d)((function(e){return e}))(x)},3656:function(e,t,r){"use strict";var n=r(0),o=r.n(n);t.a=function(){return o.a.createElement("div",null)}},3697:function(e,t,r){"use strict";r(183);var n=r(104),o=(r(95),r(38)),i=(r(55),r(22)),a=r(0),c=r.n(a),l=r(8),u=r.n(l),s=r(916),f=r(11),d=r.n(f),p=r(196),m=r(3698),h=r(31),v=r(536),y=r(53),b="index-module_icon_hhi0u",g="index-module_markedHover_PaCO8",w="index-module_markedNormal_lQdFH",_="index-module_smallMark_FfS6d",O="index-module_mark_3qbSl",E="index-module_markIconContent_GN4G+",S="index-module_isMiniTypeMark_Q9Bf6",j="index-module_iconMarked_vNmDS";function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=e.target,r=e.isMiniType,l=e.me,u=void 0===l?{}:l,s=e.reGetData,f=e.size,P=void 0===f?"normal":f,k=e.iconSize,C=e.getPopupContainer,I=Object(v.a)().isDarkMode,A=x(Object(a.useState)(!1),2),D=A[0],T=A[1],L=x(Object(a.useState)(),2),N=L[0],R=L[1],M=x(Object(a.useState)(!1),2),B=M[0],F=M[1],G=x(Object(a.useState)(t.action_tags||null),2),W=G[0],z=G[1];Object(a.useEffect)((function(){F(!!t.id)}),[t.id]),Object(a.useEffect)((function(){z(t.action_tags)}),[t.action_tags]);var U={target_type:e.targetType,id:N||t&&t.id,target_id:t&&t.target_id,action_tags:W},H=c.a.createElement(m.a,{record:U,refetch:function(e){var t=e.type,r=e.value,n=r&&r.map((function(e){return e.id})).join();z(n),"CANCEL"===t&&(F(!1),T(!1),z(null),s&&s())}}),V="small"===P?_:O,q=I?c.a.createElement(h.b,{name:"icon-collected",width:"12",height:"12",color:"#D2A638",style:{marginRight:"4px"}}):c.a.createElement("img",{width:"12",height:"12",style:{marginRight:"4px"},src:"https://gw.alipayobjects.com/mdn/rms_a6038f/afts/img/A*LpjOSJolIloAAAAAAAAAAAAAARQnAQ",alt:"avatar"}),K=I?c.a.createElement(h.b,{name:"icon-collect",width:"12",height:"12",style:{marginRight:"4px"}}):c.a.createElement("img",{width:"12",height:"12",style:{marginRight:"4px"},src:"https://gw.alipayobjects.com/mdn/rms_a6038f/afts/img/A*s0VKTqCIM0EAAAAAAAAAAAAAARQnAQ",alt:"avatar"});return c.a.createElement(n.a,{type:"menu",trigger:["click"],content:H,visible:D,onVisibleChange:function(e){if(!u||!u.id)return null;T(e)},destroyPopupOnHide:!0,getPopupContainer:C,placement:r?"bottomRight":"bottomLeft"},c.a.createElement("div",{className:r?S:V},c.a.createElement(o.a,{title:r?__("收藏"):null,placement:"bottom"},c.a.createElement("div",{className:d()(D&&r?g:w,"select-group-mark-wrapper")},B?c.a.createElement("div",{className:E,"data-testid":"already-mark",onClick:function(){T(!0)}},window.h5?q:c.a.createElement(h.b,{name:"star",className:d()(b,j),size:k||12}),!r&&c.a.createElement("span",null,__("已收藏"))):c.a.createElement("div",{className:E,"data-testid":"select-group-mark-entry",onClick:function(){!function(){var r,n=e.targetType,o=e.goLogin,a=window.appData,l=a.sharePage,f=a.share;a.isCollaborationPage&&(r=n),u.id||!o?p.webProxy.mine.marks.create({target_type:n,target_id:t.target_id,share_target_type:l&&f&&f.target_type,collaboration_target_type:r}).then((function(e){F(!0),R(e.id),setTimeout((function(){T(!0)}),100);var t=window.appData,r=t.organization,n=t.defaultSpaceHost,o=r&&r.id,a="/dashboard/collections",l=a;0===e.organization_id&&o&&(l="".concat(n).concat(a));var u=c.a.createElement("a",{href:l},"收藏");y.b?i.a.success(c.a.createElement("span",null,__("收藏成功"))):i.a.success(c.a.createElement("span",null,__("收藏成功，前往 {toastText} 查看",{toastText:u}))),s&&s()})).catch((function(e){i.a.error(e.message)})):o()}()}},window.h5?K:c.a.createElement(h.b,{name:"star-outlined",className:b,size:k||12}),!r&&c.a.createElement("span",null,__("收藏")))))))};k.defaultProps={me:window.appData.me,isMobile:window.h5,getPopupContainer:function(e){return e.parentNode}},k.propTypes={isMiniType:u.a.bool,target:u.a.object,targetType:u.a.oneOf(s.default.ALLOW_MARK_TARGET_TYPES).isRequired,style:u.a.object,onStatusChange:u.a.func,me:u.a.object,isMobile:u.a.bool,iconSize:u.a.number,getPopupContainer:u.a.func};var C=k,I=r(429);function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(this,arguments)}t.a=Object(I.d)()((function(e){var t=e.dispatch;return React.createElement(C,A({},e,{goLogin:function(){t({type:"error/toggleLoginModal",payload:{visible:!0}})}}))}))},3713:function(e,t,r){"use strict";var n=r(94);r.d(t,"a",(function(){return n.a})),r.d(t,"c",(function(){return n.d})),r.d(t,"b",(function(){return n.b}))},3722:function(e,t,r){"use strict";r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return f}));var n=r(0),o=r(429),i=r(194);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(){return a(Object(n.useReducer)((function(e){return e+1}),0),2)[1]}function u(e){var t=document.querySelector("#".concat(e.id));if(t)return t;var r=document.createElement("div");return r.id=e.id,document.body.append(r),r}function s(e){var t,r;if(null==e||!e.enableAssistant)return!1;if(null===(t=window.appData)||void 0===t||null===(r=t.settings)||void 0===r||!r.group_assistant_enabled)return!1;var n=e.abilities||{};if(e.public!==i.PRIVACY.private)return n.read;var o=n.manage||n.destroy,a=n.create_book||n.read_private;return o||a}function f(){return s(Object(o.f)((function(e){return{group:e.group}})).group)}},3809:function(e,t,r){"use strict";var n=r(3556);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}t.a=function(e){var t=window.appData,r=t.isYuque,i=t.organization;return React.createElement(n.a,o({},e,{isYuque:r,organization:i}))}},3810:function(e,t,r){"use strict";var n=r(1504);r.d(t,"a",(function(){return n.a}))},3847:function(e,t,r){"use strict";r.d(t,"b",(function(){return O})),r.d(t,"a",(function(){return S})),r.d(t,"c",(function(){return j}));var n=r(926),o=r.n(n),i=r(0),a=r.n(i),c=r(429),l=r(67),u=r(3184),s=r(163),f=r(53),d=r(1504);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(){m=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function h(){}function v(){}var y={};l(y,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,i)&&(y=g);var w=v.prototype=d.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==p(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:h,configurable:!0}),h.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),l(O.prototype,a,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(w),l(w,c,"Generator"),l(w,i,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function h(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}var w="Reader.localReadMode",_=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="stash",n=new Set,(r=g(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,n;return t=e,(r=[{key:"genStashKey",value:function(e){return"editModeStash-".concat(e)}},{key:"has",value:function(e){var t=this.genStashKey(e),r=this.stash.has(t);if(r)return r;var n=sessionStorage.getItem(t);return!!n&&(this.stash.add(t),n)}},{key:"add",value:function(e){var t=this.genStashKey(e);this.stash.add(t),sessionStorage.setItem(t,"1")}},{key:"delete",value:function(e){var t=this.genStashKey(e);this.stash.delete(t),sessionStorage.removeItem(t)}},{key:"clear",value:function(){this.stash.forEach((function(e){sessionStorage.removeItem(e)})),this.stash.clear()}}])&&b(t.prototype,r),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function O(e,t,r){if("get"===e)try{return(JSON.parse(s.a.get(w))||{})["doc-".concat(t)]}catch(e){return console.error(e),null}if("save"===e){var n=JSON.parse(s.a.get(w))||{},o=Object.keys(n);20!==o.length||"doc-".concat(t)in n||delete n[o[0]],n["doc-".concat(t)]=!!r,s.a.set(w,JSON.stringify(n))}}var E=Object(i.createContext)({editMode:!1,setEditMode:o.a});function S(e){var t,r=Object(i.useRef)(new _),n=Object(l.useParams)(),o=n.group,s=n.book,p=n.doc,y=Object(l.useRouteMatch)("/:group/:book/:doc/edit"),b=null==y?void 0:y.isExact,g=e.isEditUrl||!!b,w=null!==(t=window.appData.settings)&&void 0!==t&&t.enable_edit_mode&&g||!1;e.canUpdateDoc||(w=!1),f.b&&e.canUpdateDoc&&(w="Table"!==e.docType);var S=v(Object(i.useState)(w),2),j=S[0],x=S[1],P=Object(c.e)(),k=Object(d.a)(p),C=Object(i.useRef)(p),I=Object(i.useRef)(g),A=!!f.b&&O("get",p),D=function(){var e,t=(e=m().mark((function e(t){var n,i,a,c=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(c.length>1&&void 0!==c[1])||c[1],!p){e.next=19;break}if(!t){e.next=16;break}return e.prev=3,e.next=6,Object(u.editPageMeta)({group_slug:o,book_slug:s,slug:p});case 6:i=e.sent,a=i.matchCondition,P({type:"doc/update",payload:{readerEditModeData:{matchCondition:a}}}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:r.current.add(p),e.next=17;break;case 16:!t&&n&&r.current.delete(p);case 17:console.log("🚀 ~ file: context.tsx:110 ~ setEditMode ~ isEditMode:",t,p),x(t);case 19:case"end":return e.stop()}}),e,null,[[3,11]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){h(i,n,o,a,c,"next",e)}function c(e){h(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){window.__readerEditMode=j}),[j]),Object(i.useEffect)((function(){C.current=p}),[p]),Object(i.useEffect)((function(){I.current=g}),[g]),Object(i.useEffect)((function(){var e=function(){r.current.clear()};return window.addEventListener("beforeunload",e),function(){I.current||C.current||e(),window.removeEventListener("beforeunload",e)}}),[]),Object(i.useEffect)((function(){!f.b&&p&&k&&p!==k&&!r.current.has(p)&&D(!1,!1),!f.b&&r.current.has(p)&&D(!0)}),[p,k]),Object(i.useEffect)((function(){f.b&&p&&"Table"!==e.docType&&D(!!e.canUpdateDoc),f.b&&p&&"Table"===e.docType&&D(!1),g&&e.canUpdateDoc&&D(!0)}),[p,e.canUpdateDoc,e.docType,g]),a.a.createElement(E.Provider,{value:{editMode:j&&!A,setEditMode:D}},e.children)}function j(){return Object(i.useContext)(E)}},3932:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r(61);var n=r(23),o=r(0),i=r.n(o),a=r(31),c={playBtn:"index-module_playBtn_5wHuG"};function l(){return i.a.createElement(n.a,{className:c.playBtn,onClick:function(){return window.postMessage("show:play")}},i.a.createElement(a.b,{name:"play",width:8,height:12}),__("播放"))}},3982:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(3656),o=r(841),i=Object(o.a)({loader:function(){return Promise.all([r.e(0),r.e(1),r.e(6),r.e(11),r.e(1164)]).then(r.bind(null,3995)).then((function(e){return e.PresentationRender}))},loading:n.a}),a=Object(o.a)({loader:function(){return Promise.all([r.e(0),r.e(1),r.e(6),r.e(11),r.e(1164)]).then(r.bind(null,3995))},loading:n.a});t.b=a},4007:function(e,t,r){"use strict";r.d(t,"a",(function(){return _i})),r.d(t,"c",(function(){return xa})),r.d(t,"b",(function(){return va})),r.d(t,"d",(function(){return Bo})),r.d(t,"e",(function(){return Ko}));var n=r(0),o=r.n(n);function i(e,t){}var a=i.bind(null,"warn");i.bind(null,"error");function c(){}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t,r){var n=t.map((function(t){var n=function(e,t){return s(s({},e),t)}(r,t.options);return e.addEventListener(t.eventName,t.fn,n),function(){e.removeEventListener(t.eventName,t.fn,n)}}));return function(){n.forEach((function(e){e()}))}}var p=!0,m="Invariant failed";function h(e){this.message=e}function v(e,t){if(!e)throw new h(p?m:"".concat(m,": ").concat(t||""))}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===y(i)?i:String(i)),n)}var o,i}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}h.prototype.toString=function(){return this.message};var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(i,e);var t,r,n,o=w(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).callbacks=null,e.unbind=c,e.onWindowError=function(t){var r=e.getCallbacks();r.isDragging()&&(r.tryAbort(),a("\n        An error was caught by our window 'error' event listener while a drag was occurring.\n        The active drag has been aborted.\n      ")),t.error instanceof h&&t.preventDefault()},e.getCallbacks=function(){if(!e.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return e.callbacks},e.setCallbacks=function(t){e.callbacks=t},e}return t=i,(r=[{key:"componentDidMount",value:function(){this.unbind=d(window,[{eventName:"error",fn:this.onWindowError}])}},{key:"componentDidCatch",value:function(e){if(!(e instanceof h))throw e;this.setState({})}},{key:"componentWillUnmount",value:function(){this.unbind()}},{key:"render",value:function(){return this.props.children(this.setCallbacks)}}])&&b(t.prototype,r),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.Component),E=function(e){return e+1},S=function(e,t){var r=e.droppableId===t.droppableId,n=E(e.index),o=E(t.index);return r?"\n      You have moved the item from position ".concat(n,"\n      to position ").concat(o,"\n    "):"\n    You have moved the item from position ".concat(n,"\n    in list ").concat(e.droppableId,"\n    to list ").concat(t.droppableId,"\n    in position ").concat(o,"\n  ")},j=function(e,t,r){return t.droppableId===r.droppableId?"\n      The item ".concat(e,"\n      has been combined with ").concat(r.draggableId):"\n      The item ".concat(e,"\n      in list ").concat(t.droppableId,"\n      has been combined with ").concat(r.draggableId,"\n      in list ").concat(r.droppableId,"\n    ")},x=function(e){return"\n  The item has returned to its starting position\n  of ".concat(E(e.index),"\n")},P={dragHandleUsageInstructions:"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",onDragStart:function(e){return"\n  You have lifted an item in position ".concat(E(e.source.index),"\n")},onDragUpdate:function(e){var t=e.destination;if(t)return S(e.source,t);var r=e.combine;return r?j(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},onDragEnd:function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      ".concat(x(e.source),"\n    ");var t=e.destination,r=e.combine;return t?"\n      You have dropped the item.\n      ".concat(S(e.source,t),"\n    "):r?"\n      You have dropped the item.\n      ".concat(j(e.draggableId,e.source,r),"\n    "):"\n    The item has been dropped while not over a drop area.\n    ".concat(x(e.source),"\n  ")}},k=r(1619),C=r(429);function I(e,t){var r=Object(n.useState)((function(){return{inputs:t,result:e()}}))[0],o=Object(n.useRef)(!0),i=Object(n.useRef)(r),a=o.current||Boolean(t&&i.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,i.current.inputs))?i.current:{inputs:t,result:e()};return Object(n.useEffect)((function(){o.current=!1,i.current=a}),[a]),a.result}var A=I,D=function(e,t){return I((function(){return e}),t)};function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function L(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M={x:0,y:0},B=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},F=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},G=function(e,t){return e.x===t.x&&e.y===t.y},W=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},z=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return R(r={},e,t),R(r,"x"===e?"y":"x",n),r},U=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},H=function(e,t){return Math.min.apply(Math,L(t.map((function(t){return U(e,t)}))))},V=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},q=r(533),K=function(e){var t=e.top,r=e.right,n=e.bottom,o=e.left;return{top:t,right:r,bottom:n,left:o,width:r-o,height:n-t,x:o,y:t,center:{x:(r+o)/2,y:(n+t)/2}}},Y=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},Q=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},X={top:0,right:0,bottom:0,left:0},J=function(e){var t=e.borderBox,r=e.margin,n=void 0===r?X:r,o=e.border,i=void 0===o?X:o,a=e.padding,c=void 0===a?X:a,l=K(Y(t,n)),u=K(Q(t,i)),s=K(Q(u,c));return{marginBox:l,borderBox:K(t),paddingBox:u,contentBox:s,margin:n,border:i,padding:c}},Z=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var r=Number(t);return isNaN(r)&&Object(q.default)(!1),r},$=function(e,t){var r,n,o=e.borderBox,i=e.border,a=e.margin,c=e.padding,l=(n=t,{top:(r=o).top+n.y,left:r.left+n.x,bottom:r.bottom+n.y,right:r.right+n.x});return J({borderBox:l,border:i,margin:a,padding:c})},ee=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),$(e,t)},te=function(e,t){var r={top:Z(t.marginTop),right:Z(t.marginRight),bottom:Z(t.marginBottom),left:Z(t.marginLeft)},n={top:Z(t.paddingTop),right:Z(t.paddingRight),bottom:Z(t.paddingBottom),left:Z(t.paddingLeft)},o={top:Z(t.borderTopWidth),right:Z(t.borderRightWidth),bottom:Z(t.borderBottomWidth),left:Z(t.borderLeftWidth)};return J({borderBox:e,margin:r,padding:n,border:o})},re=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return te(t,r)},ne=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},oe=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]};function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ie(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ue=function(e,t){return t&&t.shouldClipSubject?function(e,t){var r=K({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r}(t.pageMarginBox,e):K(e)},se=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,o=e.frame,i=function(e,t){return t?ne(e,t.scroll.diff.displacement):e}(t.marginBox,o),a=function(e,t,r){return r&&r.increasedBy?ce(ce({},e),{},le({},t.end,e[t.end]+r.increasedBy[t.line])):e}(i,n,r);return{page:t,withPlaceholder:r,active:ue(a,o)}};function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==fe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var he=function(e,t){v(e.frame);var r=e.frame,n=F(t,r.scroll.initial),o=W(n),i=pe(pe({},r),{},{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:o},max:r.scroll.max}}),a=se({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return pe(pe({},e),{},{frame:i,subject:a})},ve=r(634);function ye(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function be(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function ge(e,t){if(e.find)return e.find(t);var r=be(e,t);return-1!==r?e[r]:void 0}function we(e){return Array.prototype.slice.call(e)}var _e=Object(ve.a)((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),Oe=Object(ve.a)((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),Ee=Object(ve.a)((function(e){return ye(e)})),Se=Object(ve.a)((function(e){return ye(e)})),je=Object(ve.a)((function(e,t){return Se(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}))}));function xe(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function Pe(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var ke=Object(ve.a)((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))}));function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ce(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ce(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Te=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Le={point:M,value:0},Ne={invisible:{},visible:{},all:[]},Re={displaced:Ne,displacedBy:Le,at:null},Me=function(e,t){return function(r){return e<=r&&r<=t}},Be=function(e){var t=Me(e.top,e.bottom),r=Me(e.left,e.right);return function(n){if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;var o=t(n.top)||t(n.bottom),i=r(n.left)||r(n.right);if(o&&i)return!0;var a=n.top<e.top&&n.bottom>e.bottom,c=n.left<e.left&&n.right>e.right;return!(!a||!c)||(a&&i||c&&o)}},Fe=function(e){var t=Me(e.top,e.bottom),r=Me(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&r(e.left)&&r(e.right)}},Ge={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},We={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){Ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ze(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ze(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qe=function(e){var t=e.target,r=e.destination,n=e.viewport,o=e.withDroppableDisplacement,i=e.isVisibleThroughFrameFn,a=o?function(e,t){var r=t.frame?t.frame.scroll.diff.displacement:M;return ne(e,r)}(t,r):t;return function(e,t,r){return!!t.subject.active&&r(t.subject.active)(e)}(a,r,i)&&function(e,t,r){return r(t)(e)}(a,n,i)},Ke=function(e){return qe(He(He({},e),{},{isVisibleThroughFrameFn:Be}))},Ye=function(e){return qe(He(He({},e),{},{isVisibleThroughFrameFn:Fe}))},Qe=function(e,t,r){if("boolean"==typeof r)return r;if(!t)return!0;var n=t.invisible,o=t.visible;if(n[e])return!1;var i=o[e];return!i||i.shouldAnimate};function Xe(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,o=e.viewport,i=e.forceShouldAnimate,a=e.last;return t.reduce((function(e,t){var c=function(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return K(Y(r,n))}(t,n),l=t.descriptor.id;if(e.all.push(l),!Ke({target:c,destination:r,viewport:o,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var u={draggableId:l,shouldAnimate:Qe(l,a,i)};return e.visible[l]=u,e}),{all:[],visible:{},invisible:{}})}function Je(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,o=e.destination,i=function(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}(t,{inHomeList:r});return{displaced:Ne,displacedBy:n,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:i}}}}function Ze(e){var t=e.draggable,r=e.insideDestination,n=e.destination,o=e.viewport,i=e.displacedBy,a=e.last,c=e.index,l=e.forceShouldAnimate,u=Te(t,n);if(null==c)return Je({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var s=ge(r,(function(e){return e.descriptor.index===c}));if(!s)return Je({insideDestination:r,inHomeList:u,displacedBy:i,destination:n});var f=ke(t,r),d=r.indexOf(s);return{displaced:Xe({afterDragging:f.slice(d),destination:n,displacedBy:i,last:a,viewport:o.frame,forceShouldAnimate:l}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:c}}}}function $e(e,t){return Boolean(t.effected[e])}var et=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,o=e.draggables,i=e.destination,a=e.insideDestination,c=e.previousImpact,l=e.viewport,u=e.afterCritical,s=c.at;if(v(s,"Cannot move in direction without previous impact location"),"REORDER"===s.type){var f=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,o=e.location;if(!n.length)return null;var i=o.index,a=t?i+1:i-1,c=n[0].descriptor.index,l=n[n.length-1].descriptor.index;return a<c||a>(r?l:l+1)?null:a}({isMovingForward:t,isInHomeList:r,location:s.destination,insideDestination:a});return null==f?null:Ze({draggable:n,insideDestination:a,destination:i,viewport:l,last:c.displaced,displacedBy:c.displacedBy,index:f})}var d=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,o=e.combine,i=e.afterCritical;if(!r.isCombineEnabled)return null;var a=o.draggableId,c=n[a].descriptor.index;return $e(a,i)?t?c:c-1:t?c+1:c}({isMovingForward:t,destination:i,displaced:c.displaced,draggables:o,combine:s.combine,afterCritical:u});return null==d?null:Ze({draggable:n,insideDestination:a,destination:i,viewport:l,last:c.displaced,displacedBy:c.displacedBy,index:d})},tt=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,o=Pe(r);v(o);var i=o.draggableId,a=n[i].page.borderBox.center,c=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,o=e.displacedBy,i=Boolean(t.visible[n]||t.invisible[n]);return $e(n,r)?i?M:W(o.point):i?o.point:M}({displaced:r.displaced,afterCritical:t,combineWith:i,displacedBy:r.displacedBy});return B(a,c)},rt=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},nt=function(e,t,r){return t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2},ot=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return z(t.line,r.marginBox[t.end]+rt(t,n),nt(t,r.marginBox,n))},it=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return z(t.line,r.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,n),nt(t,r.marginBox,n))},at=function(e){var t=e.impact,r=e.draggable,n=e.draggables,o=e.droppable,i=e.afterCritical,a=je(o.descriptor.id,n),c=r.page,l=o.axis;if(!a.length)return function(e){var t=e.axis,r=e.moveInto,n=e.isMoving;return z(t.line,r.contentBox[t.start]+rt(t,n),nt(t,r.contentBox,n))}({axis:l,moveInto:o.page,isMoving:c});var u=t.displaced,s=t.displacedBy,f=u.all[0];if(f){var d=n[f];if($e(f,i))return it({axis:l,moveRelativeTo:d.page,isMoving:c});var p=$(d.page,s.point);return it({axis:l,moveRelativeTo:p,isMoving:c})}var m=a[a.length-1];if(m.descriptor.id===r.descriptor.id)return c.borderBox.center;if($e(m.descriptor.id,i)){var h=$(m.page,W(i.displacedBy.point));return ot({axis:l,moveRelativeTo:h,isMoving:c})}return ot({axis:l,moveRelativeTo:m.page,isMoving:c})},ct=function(e,t){var r=e.frame;return r?B(t,r.scroll.diff.displacement):t},lt=function(e){var t=function(e){var t=e.impact,r=e.draggable,n=e.droppable,o=e.draggables,i=e.afterCritical,a=r.page.borderBox.center,c=t.at;return n&&c?"REORDER"===c.type?at({impact:t,draggable:r,draggables:o,droppable:n,afterCritical:i}):tt({impact:t,draggables:o,afterCritical:i}):a}(e),r=e.droppable;return r?ct(r,t):t},ut=function(e,t){var r=F(t,e.scroll.initial),n=W(r);return{frame:K({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==st(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===st(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mt(e,t){return e.map((function(e){return t[e]}))}var ht=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=function(e,t){return B(e.scroll.diff.displacement,t)}(e.viewport,t),o=F(n,r.page.borderBox.center);return B(r.client.borderBox.center,o)},vt=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,o=e.viewport,i=e.withDroppableDisplacement,a=e.onlyOnMainAxis,c=void 0!==a&&a,l=F(n,t.page.borderBox.center),u={target:ne(t.page.borderBox,l),destination:r,withDroppableDisplacement:i,viewport:o};return c?function(e){return qe(He(He({},e),{},{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var r=Me(e.top,e.bottom),n=Me(e.left,e.right);return function(e){return t===Ge?r(e.top)&&r(e.bottom):n(e.left)&&n(e.right)}})}));var t}(u):Ye(u)},yt=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,o=e.draggables,i=e.previousImpact,a=e.viewport,c=e.previousPageBorderBoxCenter,l=e.previousClientSelection,u=e.afterCritical;if(!n.isEnabled)return null;var s=je(n.descriptor.id,o),f=Te(r,n),d=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,o=e.insideDestination,i=e.previousImpact;if(!n.isCombineEnabled)return null;if(!xe(i))return null;function a(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:n.descriptor.id}};return Ae(Ae({},i),{},{at:t})}var c=i.displaced.all,l=c.length?c[0]:null;if(t)return l?a(l):null;var u=ke(r,o);if(!l)return u.length?a(u[u.length-1].descriptor.id):null;var s=be(u,(function(e){return e.descriptor.id===l}));v(-1!==s,"Could not find displaced item in set");var f=s-1;return f<0?null:a(u[f].descriptor.id)}({isMovingForward:t,draggable:r,destination:n,insideDestination:s,previousImpact:i})||et({isMovingForward:t,isInHomeList:f,draggable:r,draggables:o,destination:n,insideDestination:s,previousImpact:i,viewport:a,afterCritical:u});if(!d)return null;var p=lt({impact:d,draggable:r,droppable:n,draggables:o,afterCritical:u});if(vt({draggable:r,destination:n,newPageBorderBoxCenter:p,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:ht({pageBorderBoxCenter:p,draggable:r,viewport:a}),impact:d,scrollJumpRequest:null};var m=F(p,c),h=function(e){var t=e.impact,r=e.viewport,n=e.destination,o=e.draggables,i=e.maxScrollChange,a=ut(r,B(r.scroll.current,i)),c=n.frame?he(n,B(n.frame.scroll.current,i)):n,l=t.displaced,u=Xe({afterDragging:mt(l.all,o),destination:n,displacedBy:t.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),s=Xe({afterDragging:mt(l.all,o),destination:c,displacedBy:t.displacedBy,viewport:r.frame,last:l,forceShouldAnimate:!1}),f={},d={},p=[l,u,s];return l.all.forEach((function(e){var t=function(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}(e,p);t?d[e]=t:f[e]=!0})),dt(dt({},t),{},{displaced:{all:l.all,invisible:f,visible:d}})}({impact:d,viewport:a,destination:n,draggables:o,maxScrollChange:m});return{clientSelection:l,impact:h,scrollJumpRequest:m}},bt=function(e){var t=e.subject.active;return v(t,"Cannot get clipped area from droppable"),t},gt=function(e,t){var r=e.page.borderBox.center;return $e(e.descriptor.id,t)?F(r,t.displacedBy.point):r},wt=function(e,t){var r=e.page.borderBox;return $e(e.descriptor.id,t)?ne(r,W(t.displacedBy.point)):r},_t=Object(ve.a)((function(e,t){var r=t[e.line];return{value:r,point:z(e.line,r)}}));function Ot(e){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ot(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ot(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xt=function(e,t){return St(St({},e),{},{scroll:St(St({},e.scroll),{},{max:t})})},Pt=function(e,t,r){var n=e.frame;v(!Te(t,e),"Should not add placeholder space to home list"),v(!e.subject.withPlaceholder,"Cannot add placeholder size to a subject when it already has one");var o=_t(e.axis,t.displaceBy).point,i=function(e,t,r){var n=e.axis;if("virtual"===e.descriptor.mode)return z(n.line,t[n.line]);var o=e.subject.page.contentBox[n.size],i=je(e.descriptor.id,r).reduce((function(e,t){return e+t.client.marginBox[n.size]}),0)+t[n.line]-o;return i<=0?null:z(n.line,i)}(e,o,r),a={placeholderSize:o,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){var c=se({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return St(St({},e),{},{subject:c})}var l=i?B(n.scroll.max,i):n.scroll.max,u=xt(n,l),s=se({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:u});return St(St({},e),{},{subject:s,frame:u})},kt=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,o=e.isOver,i=e.draggables,a=e.droppables,c=e.viewport,l=e.afterCritical,u=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,o=e.droppables,i=e.viewport,a=n.subject.active;if(!a)return null;var c=n.axis,l=Me(a[c.start],a[c.end]),u=Ee(o).filter((function(e){return e!==n})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return Be(i.frame)(bt(e))})).filter((function(e){var r=bt(e);return t?a[c.crossAxisEnd]<r[c.crossAxisEnd]:r[c.crossAxisStart]<a[c.crossAxisStart]})).filter((function(e){var t=bt(e),r=Me(t[c.start],t[c.end]);return l(t[c.start])||l(t[c.end])||r(a[c.start])||r(a[c.end])})).sort((function(e,r){var n=bt(e)[c.crossAxisStart],o=bt(r)[c.crossAxisStart];return t?n-o:o-n})).filter((function(e,t,r){return bt(e)[c.crossAxisStart]===bt(r[0])[c.crossAxisStart]}));if(!u.length)return null;if(1===u.length)return u[0];var s=u.filter((function(e){return Me(bt(e)[c.start],bt(e)[c.end])(r[c.line])}));return 1===s.length?s[0]:s.length>1?s.sort((function(e,t){return bt(e)[c.start]-bt(t)[c.start]}))[0]:u.sort((function(e,t){var n=H(r,oe(bt(e))),o=H(r,oe(bt(t)));return n!==o?n-o:bt(e)[c.start]-bt(t)[c.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:r,source:o,droppables:a,viewport:c});if(!u)return null;var s=je(u.descriptor.id,i),f=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,o=e.insideDestination,i=e.afterCritical;return o.filter((function(e){return Ye({target:wt(e,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})})).sort((function(e,r){var o=U(t,ct(n,gt(e,i))),a=U(t,ct(n,gt(r,i)));return o<a?-1:a<o?1:e.descriptor.index-r.descriptor.index}))[0]||null}({pageBorderBoxCenter:r,viewport:c,destination:u,insideDestination:s,afterCritical:l}),d=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,o=e.draggable,i=e.draggables,a=e.destination,c=e.viewport,l=e.afterCritical;if(!r){if(n.length)return null;var u={displaced:Ne,displacedBy:Le,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},s=lt({impact:u,draggable:o,droppable:a,draggables:i,afterCritical:l}),f=Te(o,a)?a:Pt(a,o,i);return vt({draggable:o,destination:f,newPageBorderBoxCenter:s,viewport:c.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?u:null}var d,p=Boolean(t[a.axis.line]<=r.page.borderBox.center[a.axis.line]),m=(d=r.descriptor.index,r.descriptor.id===o.descriptor.id||p?d:d+1),h=_t(a.axis,o.displaceBy);return Ze({draggable:o,insideDestination:n,destination:a,viewport:c,displacedBy:h,last:Ne,index:m})}({previousPageBorderBoxCenter:r,destination:u,draggable:n,draggables:i,moveRelativeTo:f,insideDestination:s,viewport:c,afterCritical:l});if(!d)return null;var p=lt({impact:d,draggable:n,droppable:u,draggables:i,afterCritical:l});return{clientSelection:ht({pageBorderBoxCenter:p,draggable:n,viewport:c}),impact:d,scrollJumpRequest:null}},Ct=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},It=function(e){var t=e.state,r=e.type,n=function(e,t){var r=Ct(e);return r?t[r]:null}(t.impact,t.dimensions.droppables),o=Boolean(n),i=t.dimensions.droppables[t.critical.droppable.id],a=n||i,c=a.axis.direction,l="vertical"===c&&("MOVE_UP"===r||"MOVE_DOWN"===r)||"horizontal"===c&&("MOVE_LEFT"===r||"MOVE_RIGHT"===r);if(l&&!o)return null;var u="MOVE_DOWN"===r||"MOVE_RIGHT"===r,s=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,d=t.dimensions,p=d.draggables,m=d.droppables;return l?yt({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:s,destination:a,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):kt({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:s,isOver:a,draggables:p,droppables:m,viewport:t.viewport,afterCritical:t.afterCritical})};function At(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Dt(e){var t=Me(e.top,e.bottom),r=Me(e.left,e.right);return function(e){return t(e.y)&&r(e.x)}}function Tt(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,o=Ee(n).filter((function(e){if(!e.isEnabled)return!1;var r,n,o=e.subject.active;if(!o)return!1;if(n=o,!((r=t).left<n.right&&r.right>n.left&&r.top<n.bottom&&r.bottom>n.top))return!1;if(Dt(o)(t.center))return!0;var i=e.axis,a=o.center[i.crossAxisLine],c=t[i.crossAxisStart],l=t[i.crossAxisEnd],u=Me(o[i.crossAxisStart],o[i.crossAxisEnd]),s=u(c),f=u(l);return!s&&!f||(s?c<a:l>a)}));return o.length?1===o.length?o[0].descriptor.id:function(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,o=r.page.borderBox.center,i=n.map((function(e){var r=e.axis,n=z(e.axis.line,t.center[r.line],e.page.borderBox.center[r.crossAxisLine]);return{id:e.descriptor.id,distance:U(o,n)}})).sort((function(e,t){return t.distance-e.distance}));return i[0]?i[0].id:null}({pageBorderBox:t,draggable:r,candidates:o}):null}var Lt=function(e,t){return K(ne(e,t))};function Nt(e){var t=e.displaced,r=e.id;return Boolean(t.visible[r]||t.invisible[r])}var Rt=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,o=e.droppables,i=e.previousImpact,a=e.viewport,c=e.afterCritical,l=Lt(r.page.borderBox,t),u=Tt({pageBorderBox:l,draggable:r,droppables:o});if(!u)return Re;var s,f,d=o[u],p=je(d.descriptor.id,n),m=(s=l,(f=d.frame)?Lt(s,f.scroll.diff.value):s);return function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,o=e.destination,i=e.insideDestination,a=e.afterCritical;if(!o.isCombineEnabled)return null;var c=o.axis,l=_t(o.axis,t.displaceBy),u=l.value,s=r[c.start],f=r[c.end],d=ge(ke(t,i),(function(e){var t=e.descriptor.id,r=e.page.borderBox,o=r[c.size]/4,i=$e(t,a),l=Nt({displaced:n.displaced,id:t});return i?l?f>r[c.start]+o&&f<r[c.end]-o:s>r[c.start]-u+o&&s<r[c.end]-u-o:l?f>r[c.start]+u+o&&f<r[c.end]+u-o:s>r[c.start]+o&&s<r[c.end]-o}));return d?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:o.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:m,draggable:r,previousImpact:i,destination:d,insideDestination:p,afterCritical:c})||function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,o=e.insideDestination,i=e.last,a=e.viewport,c=e.afterCritical,l=n.axis,u=_t(n.axis,r.displaceBy),s=u.value,f=t[l.start],d=t[l.end],p=function(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}({draggable:r,closest:ge(ke(r,o),(function(e){var t=e.descriptor.id,r=e.page.borderBox.center[l.line],n=$e(t,c),o=Nt({displaced:i,id:t});return n?o?d<=r:f<r-s:o?d<=r+s:f<r})),inHomeList:Te(r,n)});return Ze({draggable:r,insideDestination:o,destination:n,viewport:a,last:i,displacedBy:u,index:p})}({pageBorderBoxWithDroppableScroll:m,draggable:r,destination:d,insideDestination:p,last:i.displaced,viewport:a,afterCritical:c})};function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function Bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(r),!0).forEach((function(t){Gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Mt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Mt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wt=function(e,t){return Ft(Ft({},e),{},Gt({},t.descriptor.id,t))},zt=function(e){var t=e.previousImpact,r=e.impact,n=e.droppables,o=Ct(t),i=Ct(r);if(!o)return n;if(o===i)return n;var a=n[o];if(!a.subject.withPlaceholder)return n;var c=function(e){var t=e.subject.withPlaceholder;v(t,"Cannot remove placeholder form subject when there was none");var r=e.frame;if(!r){var n=se({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return St(St({},e),{},{subject:n})}var o=t.oldFrameMaxScroll;v(o,"Expected droppable with frame to have old max frame scroll when removing placeholder");var i=xt(r,o),a=se({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return St(St({},e),{},{subject:a,frame:i})}(a);return Wt(n,c)};function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){qt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ut(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ut(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kt=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,o=e.viewport,i=e.impact,a=e.scrollJumpRequest,c=o||t.viewport,l=n||t.dimensions,u=r||t.current.client.selection,s=F(u,t.initial.client.selection),f={offset:s,selection:u,borderBoxCenter:B(t.initial.client.borderBoxCenter,s)},d={selection:B(f.selection,c.scroll.current),borderBoxCenter:B(f.borderBoxCenter,c.scroll.current),offset:B(f.offset,c.scroll.diff.value)},p={client:f,page:d};if("COLLECTING"===t.phase)return Vt(Vt({phase:"COLLECTING"},t),{},{dimensions:l,viewport:c,current:p});var m=l.draggables[t.critical.draggable.id],h=i||Rt({pageOffset:d.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:c,afterCritical:t.afterCritical}),v=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,o=e.previousImpact,i=e.impact,a=zt({previousImpact:o,impact:i,droppables:n}),c=Ct(i);if(!c)return a;var l=n[c];if(Te(t,l))return a;if(l.subject.withPlaceholder)return a;var u=Pt(l,t,r);return Wt(a,u)}({draggable:m,impact:h,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return Vt(Vt({},t),{},{current:p,dimensions:{draggables:l.draggables,droppables:v},impact:h,viewport:c,scrollJumpRequest:a||null,forceShouldAnimate:!a&&null})};function Yt(e){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function Qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(r),!0).forEach((function(t){Jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Yt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Yt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zt=function(e){var t=e.impact,r=e.viewport,n=e.draggables,o=e.destination,i=e.forceShouldAnimate,a=t.displaced,c=function(e,t){return e.map((function(e){return t[e]}))}(a.all,n),l=Xe({afterDragging:c,destination:o,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:a});return Xt(Xt({},t),{},{displaced:l})},$t=function(e){var t=e.impact,r=e.draggable,n=e.droppable,o=e.draggables,i=e.viewport,a=e.afterCritical,c=lt({impact:t,draggable:r,draggables:o,droppable:n,afterCritical:a});return ht({pageBorderBoxCenter:c,draggable:r,viewport:i})},er=function(e){var t=e.state,r=e.dimensions,n=e.viewport;v("SNAP"===t.movementMode);var o=t.impact,i=n||t.viewport,a=r||t.dimensions,c=a.draggables,l=a.droppables,u=c[t.critical.draggable.id],s=Ct(o);v(s,"Must be over a destination in SNAP movement mode");var f=l[s],d=Zt({impact:o,viewport:i,destination:f,draggables:c}),p=$t({impact:d,draggable:u,droppable:f,draggables:c,viewport:i,afterCritical:t.afterCritical});return Kt({impact:d,clientSelection:p,state:t,dimensions:a,viewport:i})},tr=function(e){var t=e.draggable,r=e.home,n=e.draggables,o=e.viewport,i=_t(r.axis,t.displaceBy),a=je(r.descriptor.id,n),c=a.indexOf(t);v(-1!==c,"Expected draggable to be inside home list");var l,u=a.slice(c+1),s=u.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),f={inVirtualList:"virtual"===r.descriptor.mode,displacedBy:i,effected:s};return{impact:{displaced:Xe({afterDragging:u,destination:r,displacedBy:i,last:null,viewport:o.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:f}};function rr(e){return rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(e)}function nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(r),!0).forEach((function(t){ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ir(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==rr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==rr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ar=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,o=n.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,i=function(e){var t=e.frame;return v(t,"Expected Droppable to have a frame"),t}(r[t]).scroll.diff.value,a=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,o=$(t.client,r),i=ee(o,n);return or(or({},t),{},{placeholder:or(or({},t.placeholder),{},{client:o}),client:o,page:i})}({draggable:e,offset:B(o,i),initialWindowScroll:n.scroll.initial});return a}))};function cr(e){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cr(e)}function lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(r),!0).forEach((function(t){sr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==cr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==cr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===cr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){mr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==fr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hr=function(e){return"SNAP"===e.movementMode},vr=function(e,t,r){var n=function(e,t){return{draggables:e.draggables,droppables:Wt(e.droppables,t)}}(e.dimensions,t);return!hr(e)||r?Kt({state:e,dimensions:n}):er({state:e,dimensions:n})};function yr(e){return e.isDragging&&"SNAP"===e.movementMode?pr(pr({phase:"DRAGGING"},e),{},{scrollJumpRequest:null}):e}var br={phase:"IDLE",completed:null,shouldFlush:!1},gr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br,t=arguments.length>1?arguments[1]:void 0;if("FLUSH"===t.type)return pr(pr({},br),{},{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){v("IDLE"===e.phase,"INITIAL_PUBLISH must come after a IDLE phase");var r=t.payload,n=r.critical,o=r.clientSelection,i=r.viewport,a=r.dimensions,c=r.movementMode,l=a.draggables[n.draggable.id],u=a.droppables[n.droppable.id],s={selection:o,borderBoxCenter:l.client.borderBox.center,offset:M},f={client:s,page:{selection:B(s.selection,i.scroll.initial),borderBoxCenter:B(s.selection,i.scroll.initial),offset:B(s.selection,i.scroll.diff.value)}},d=Ee(a.droppables).every((function(e){return!e.isFixedOnPage})),p=tr({draggable:l,home:u,draggables:a.draggables,viewport:i}),m=p.impact;return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:c,dimensions:a,initial:f,current:f,isWindowScrollAllowed:d,impact:m,afterCritical:p.afterCritical,onLiftImpact:m,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:(v("DRAGGING"===e.phase,"Collection cannot start from phase ".concat(e.phase)),pr(pr({phase:"COLLECTING"},e),{},{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return v("COLLECTING"===e.phase||"DROP_PENDING"===e.phase,"Unexpected ".concat(t.type," received in phase ").concat(e.phase)),function(e){var t=e.state,r=e.published,n=r.modified.map((function(e){var r=t.dimensions.droppables[e.droppableId];return he(r,e.scroll)})),o=ur(ur({},t.dimensions.droppables),_e(n)),i=Oe(ar({additions:r.additions,updatedDroppables:o,viewport:t.viewport})),a=ur(ur({},t.dimensions.draggables),i);r.removals.forEach((function(e){delete a[e]}));var c={droppables:o,draggables:a},l=Ct(t.impact),u=l?c.droppables[l]:null,s=c.draggables[t.critical.draggable.id],f=c.droppables[t.critical.droppable.id],d=tr({draggable:s,home:f,draggables:a,viewport:t.viewport}),p=d.impact,m=d.afterCritical,h=u&&u.isCombineEnabled?t.impact:p,v=Rt({pageOffset:t.current.page.offset,draggable:c.draggables[t.critical.draggable.id],draggables:c.draggables,droppables:c.droppables,previousImpact:h,viewport:t.viewport,afterCritical:m}),y=ur(ur({phase:"DRAGGING"},t),{},{phase:"DRAGGING",impact:v,onLiftImpact:p,dimensions:c,afterCritical:m,forceShouldAnimate:!1});return"COLLECTING"===t.phase?y:ur(ur({phase:"DROP_PENDING"},y),{},{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;v(At(e),"".concat(t.type," not permitted in phase ").concat(e.phase));var h=t.payload.client;return G(h,e.current.client.selection)?e:Kt({state:e,clientSelection:h,impact:hr(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return yr(e);if("COLLECTING"===e.phase)return yr(e);v(At(e),"".concat(t.type," not permitted in phase ").concat(e.phase));var y=t.payload,b=y.id,g=y.newScroll,w=e.dimensions.droppables[b];if(!w)return e;var _=he(w,g);return vr(e,_,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;v(At(e),"Attempting to move in an unsupported phase ".concat(e.phase));var O=t.payload,E=O.id,S=O.isEnabled,j=e.dimensions.droppables[E];v(j,"Cannot find Droppable[id: ".concat(E,"] to toggle its enabled state")),v(j.isEnabled!==S,"Trying to set droppable isEnabled to ".concat(String(S),"\n      but it is already ").concat(String(j.isEnabled)));var x=pr(pr({},j),{},{isEnabled:S});return vr(e,x,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;v(At(e),"Attempting to move in an unsupported phase ".concat(e.phase));var P=t.payload,k=P.id,C=P.isCombineEnabled,I=e.dimensions.droppables[k];v(I,"Cannot find Droppable[id: ".concat(k,"] to toggle its isCombineEnabled state")),v(I.isCombineEnabled!==C,"Trying to set droppable isCombineEnabled to ".concat(String(C),"\n      but it is already ").concat(String(I.isCombineEnabled)));var A=pr(pr({},I),{},{isCombineEnabled:C});return vr(e,A,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;v(At(e),"Cannot move by window in phase ".concat(e.phase)),v(e.isWindowScrollAllowed,"Window scrolling is currently not supported for fixed lists");var D=t.payload.newScroll;if(G(e.viewport.scroll.current,D))return yr(e);var T=ut(e.viewport,D);return hr(e)?er({state:e,viewport:T}):Kt({state:e,viewport:T})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!At(e))return e;var L=t.payload.maxScroll;if(G(L,e.viewport.scroll.max))return e;var N=pr(pr({},e.viewport),{},{scroll:pr(pr({},e.viewport.scroll),{},{max:L})});return pr(pr({phase:"DRAGGING"},e),{},{viewport:N})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;v("DRAGGING"===e.phase,"".concat(t.type," received while not in DRAGGING phase"));var R=It({state:e,type:t.type});return R?Kt({state:e,impact:R.impact,clientSelection:R.clientSelection,scrollJumpRequest:R.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var F=t.payload.reason;return v("COLLECTING"===e.phase,"Can only move into the DROP_PENDING phase from the COLLECTING phase"),pr(pr({phase:"DROP_PENDING"},e),{},{phase:"DROP_PENDING",isWaiting:!0,reason:F})}if("DROP_ANIMATE"===t.type){var W=t.payload,z=W.completed,U=W.dropDuration,H=W.newHomeClientOffset;return v("DRAGGING"===e.phase||"DROP_PENDING"===e.phase,"Cannot animate drop from phase ".concat(e.phase)),{phase:"DROP_ANIMATING",completed:z,dropDuration:U,newHomeClientOffset:H,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},wr=function(e){return{type:"LIFT",payload:e}},_r=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},Or=function(){return{type:"COLLECTION_STARTING",payload:null}},Er=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},Sr=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},jr=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},xr=function(e){return{type:"MOVE",payload:e}},Pr=function(){return{type:"MOVE_UP",payload:null}},kr=function(){return{type:"MOVE_DOWN",payload:null}},Cr=function(){return{type:"MOVE_RIGHT",payload:null}},Ir=function(){return{type:"MOVE_LEFT",payload:null}},Ar=function(){return{type:"FLUSH",payload:null}},Dr=function(e){return{type:"DROP_COMPLETE",payload:e}},Tr=function(e){return{type:"DROP",payload:e}},Lr=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var Nr="cubic-bezier(0.2, 0, 0, 1)",Rr="cubic-bezier(.2,1,.1,1)",Mr={drop:0,combining:.7},Br={drop:.75},Fr=.33,Gr=.55,Wr="".concat(.2,"s ").concat(Nr),zr={fluid:"opacity ".concat(Wr),snap:"transform ".concat(Wr,", opacity ").concat(Wr),drop:function(e){var t="".concat(e,"s ").concat(Rr);return"transform ".concat(t,", opacity ").concat(t)},outOfTheWay:"transform ".concat(Wr),placeholder:"height ".concat(Wr,", width ").concat(Wr,", margin ").concat(Wr)},Ur=function(e){return G(e,M)?null:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},Hr={moveTo:Ur,drop:function(e,t){var r=Ur(e);return r?t?"".concat(r," scale(").concat(Br.drop,")"):r:null}},Vr=Fr,qr=Gr,Kr=qr-Vr;function Yr(e){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yr(e)}function Qr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(r),!0).forEach((function(t){Jr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Yr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Yr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zr=function(e){var t=e.getState,r=e.dispatch;return function(e){return function(n){if("DROP"===n.type){var o=t(),i=n.payload.reason;if("COLLECTING"!==o.phase){if("IDLE"!==o.phase){v(!("DROP_PENDING"===o.phase&&o.isWaiting),"A DROP action occurred while DROP_PENDING and still waiting"),v("DRAGGING"===o.phase||"DROP_PENDING"===o.phase,"Cannot drop in phase: ".concat(o.phase));var a=o.critical,c=o.dimensions,l=c.draggables[o.critical.draggable.id],u=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,o=e.home,i=e.viewport,a=e.onLiftImpact;return n.at&&"DROP"===r?"REORDER"===n.at.type?{impact:n,didDropInsideDroppable:!0}:{impact:Xr(Xr({},n),{},{displaced:Ne}),didDropInsideDroppable:!0}:{impact:Zt({draggables:t,impact:a,destination:o,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:i,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),s=u.impact,f=u.didDropInsideDroppable,d=f?xe(s):null,p=f?Pe(s):null,m={index:a.draggable.index,droppableId:a.droppable.id},h={draggableId:l.descriptor.id,type:l.descriptor.type,source:m,reason:i,mode:o.movementMode,destination:d,combine:p},y=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,o=e.viewport,i=e.afterCritical,a=n.draggables,c=n.droppables,l=Ct(t),u=l?c[l]:null,s=c[r.descriptor.droppableId],f=$t({impact:t,draggable:r,draggables:a,afterCritical:i,droppable:u||s,viewport:o});return F(f,r.client.borderBox.center)}({impact:s,draggable:l,dimensions:c,viewport:o.viewport,afterCritical:o.afterCritical}),b={critical:o.critical,afterCritical:o.afterCritical,result:h,impact:s};if(!G(o.current.client.offset,y)||Boolean(h.combine)){var g=function(e){var t=e.current,r=e.destination,n=e.reason,o=U(t,r);if(o<=0)return Vr;if(o>=1500)return qr;var i=Vr+Kr*(o/1500);return Number(("CANCEL"===n?.6*i:i).toFixed(2))}({current:o.current.client.offset,destination:y,reason:i});r(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:y,dropDuration:g,completed:b}))}else r(Dr({completed:b}))}}else r(function(e){return{type:"DROP_PENDING",payload:e}}({reason:i}))}else e(n)}}},$r=function(e){var t=[],r=null,n=function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];t=o,r||(r=requestAnimationFrame((function(){r=null,e.apply(void 0,t)})))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n},en=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function tn(e){var t=e.onWindowScroll;var r,n=$r((function(){t(en())})),o=(r=n,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||r()}}),i=c;function a(){return i!==c}return{start:function(){v(!a(),"Cannot start scroll listener when already active"),i=d(window,[o])},stop:function(){v(a(),"Cannot stop scroll listener when not active"),n.cancel(),i(),i=c},isActive:a}}var rn=function(e){var t=tn({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(r){t.isActive()||"INITIAL_PUBLISH"!==r.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r)&&t.stop(),e(r)}}};function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return on(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return on(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var an=function(){var e=[];return{add:function(t){var r=setTimeout((function(){return function(t){var r=be(e,(function(e){return e.timerId===t}));v(-1!==r,"Could not find timer"),nn(e.splice(r,1),1)[0].callback()}(r)})),n={timerId:r,callback:t};e.push(n)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}};function cn(e){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(e)}function ln(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(r),!0).forEach((function(t){sn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ln(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==cn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===cn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fn=function(e,t){t()},dn=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},pn=function(e,t,r,n){if(e){var o=function(e){var t=!1,r=!1,n=setTimeout((function(){r=!0})),o=function(o){t?a("Announcement already made. Not making a second announcement"):r?a("\n        Announcements cannot be made asynchronously.\n        Default message has already been announced.\n      "):(t=!0,e(o),clearTimeout(n))};return o.wasCalled=function(){return t},o}(r);e(t,{announce:o}),o.wasCalled()||r(n(t))}else r(n(t))},mn=function(e,t){var r=function(e,t){var r=an(),n=null,o=function(r){v(n,"Cannot fire onDragEnd when there is no matching onDragStart"),n=null,fn(0,(function(){return pn(e().onDragEnd,r,t,P.onDragEnd)}))};return{beforeCapture:function(t,r){v(!n,"Cannot fire onBeforeCapture as a drag start has already been published"),fn(0,(function(){var n=e().onBeforeCapture;n&&n({draggableId:t,mode:r})}))},beforeStart:function(t,r){v(!n,"Cannot fire onBeforeDragStart as a drag start has already been published"),fn(0,(function(){var n=e().onBeforeDragStart;n&&n(dn(t,r))}))},start:function(o,i){v(!n,"Cannot fire onBeforeDragStart as a drag start has already been published");var a=dn(o,i);n={mode:i,lastCritical:o,lastLocation:a.source,lastCombine:null},r.add((function(){fn(0,(function(){return pn(e().onDragStart,a,t,P.onDragStart)}))}))},update:function(o,i){var a=xe(i),c=Pe(i);v(n,"Cannot fire onDragMove when onDragStart has not been called");var l=!function(e,t){if(e===t)return!0;var r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n}(o,n.lastCritical);l&&(n.lastCritical=o);var u,s,f=(s=a,!(null==(u=n.lastLocation)&&null==s||null!=u&&null!=s&&u.droppableId===s.droppableId&&u.index===s.index));f&&(n.lastLocation=a);var d=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(n.lastCombine,c);if(d&&(n.lastCombine=c),l||f||d){var p=un(un({},dn(o,n.mode)),{},{combine:c,destination:a});r.add((function(){fn(0,(function(){return pn(e().onDragUpdate,p,t,P.onDragUpdate)}))}))}},flush:function(){v(n,"Can only flush responders while dragging"),r.flush()},drop:o,abort:function(){if(n){var e=un(un({},dn(n.lastCritical,n.mode)),{},{combine:null,destination:null,reason:"CANCEL"});o(e)}}}}(e,t);return function(e){return function(t){return function(n){if("BEFORE_INITIAL_CAPTURE"!==n.type){if("INITIAL_PUBLISH"===n.type){var o=n.payload.critical;return r.beforeStart(o,n.payload.movementMode),t(n),void r.start(o,n.payload.movementMode)}if("DROP_COMPLETE"===n.type){var i=n.payload.completed.result;return r.flush(),t(n),void r.drop(i)}if(t(n),"FLUSH"!==n.type){var a=e.getState();"DRAGGING"===a.phase&&r.update(a.critical,a.impact)}else r.abort()}else r.beforeCapture(n.payload.draggableId,n.payload.movementMode)}}}},hn=function(e){return function(t){return function(r){if("DROP_ANIMATION_FINISHED"===r.type){var n=e.getState();v("DROP_ANIMATING"===n.phase,"Cannot finish a drop animating when no drop is occurring"),e.dispatch(Dr({completed:n.completed}))}else t(r)}}},vn=function(e){var t=null,r=null;return function(n){return function(o){if("FLUSH"!==o.type&&"DROP_COMPLETE"!==o.type&&"DROP_ANIMATION_FINISHED"!==o.type||(r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)),n(o),"DROP_ANIMATE"===o.type){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};r=requestAnimationFrame((function(){r=null,t=d(window,[i])}))}}}},yn=function(e){return function(t){return function(r){if(t(r),"PUBLISH_WHILE_DRAGGING"===r.type){var n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(Tr({reason:n.reason})))}}}},bn=k.d,gn=function(e){var t,r=e.dimensionMarshal,n=e.focusMarshal,o=e.styleMarshal,i=e.getResponders,a=e.announce,c=e.autoScroller;return Object(k.e)(gr,bn(Object(k.a)((t=o,function(){return function(e){return function(r){"INITIAL_PUBLISH"===r.type&&t.dragging(),"DROP_ANIMATE"===r.type&&t.dropping(r.payload.completed.result.reason),"FLUSH"!==r.type&&"DROP_COMPLETE"!==r.type||t.resting(),e(r)}}}),function(e){return function(){return function(t){return function(r){"DROP_COMPLETE"!==r.type&&"FLUSH"!==r.type&&"DROP_ANIMATE"!==r.type||e.stopPublishing(),t(r)}}}}(r),function(e){return function(t){var r=t.getState,n=t.dispatch;return function(t){return function(o){if("LIFT"===o.type){var i=o.payload,a=i.id,c=i.clientSelection,l=i.movementMode,u=r();"DROP_ANIMATING"===u.phase&&n(Dr({completed:u.completed})),v("IDLE"===r().phase,"Unexpected phase to start a drag"),n(Ar()),n({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:a,movementMode:l}});var s={draggableId:a,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},f=e.startPublishing(s),d=f.critical,p=f.dimensions,m=f.viewport;n({type:"INITIAL_PUBLISH",payload:{critical:d,dimensions:p,clientSelection:c,movementMode:l,viewport:m}})}else t(o)}}}}(r),Zr,hn,vn,yn,function(e){return function(t){return function(r){return function(n){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n))return e.stop(),void r(n);if("INITIAL_PUBLISH"===n.type){r(n);var o=t.getState();return v("DRAGGING"===o.phase,"Expected phase to be DRAGGING after INITIAL_PUBLISH"),void e.start(o)}r(n),e.scroll(t.getState())}}}}(c),rn,function(e){var t=!1;return function(){return function(r){return function(n){if("INITIAL_PUBLISH"===n.type)return t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),void e.tryRestoreFocusRecorded();if(r(n),t){if("FLUSH"===n.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===n.type){t=!1;var o=n.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(n),mn(i,a))))};var wn=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,o=e.width,i=F({x:r,y:t},{x:o,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},_n=function(){var e=document.documentElement;return v(e,"Cannot find document.documentElement"),e},On=function(){var e=_n();return wn({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},En=function(e){var t,r,n,o,i,a,c,l=e.critical,u=e.scrollOptions,s=e.registry,f=(t=en(),r=On(),n=t.y,o=t.x,i=_n(),a=i.clientWidth,c=i.clientHeight,{frame:K({top:n,left:o,right:o+a,bottom:n+c}),scroll:{initial:t,current:t,max:r,diff:{value:M,displacement:M}}}),d=f.scroll.current,p=l.droppable,m=s.droppable.getAllByType(p.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(d,u)})),h=s.draggable.getAllByType(l.draggable.type).map((function(e){return e.getDimension(d)}));return{dimensions:{draggables:Oe(h),droppables:_e(m)},critical:l,viewport:f}};function Sn(e,t,r){return r.descriptor.id!==t.id&&(r.descriptor.type===t.type&&("virtual"===e.droppable.getById(r.descriptor.droppableId).descriptor.mode||(a("\n      You are attempting to add or remove a Draggable [id: ".concat(r.descriptor.id,"]\n      while a drag is occurring. This is only supported for virtual lists.\n\n      See https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/patterns/virtual-lists.md\n    ")),!1)))}var jn,xn,Pn=function(e,t){var r=null,n=function(e){var t=e.registry,r=e.callbacks,n={additions:{},removals:{},modified:{}},o=null,i=function(){o||(r.collectionStarting(),o=requestAnimationFrame((function(){o=null;var e=n,i=e.additions,a=e.removals,c=e.modified,l=Object.keys(i).map((function(e){return t.draggable.getById(e).getDimension(M)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),u=Object.keys(c).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),s={additions:l,removals:Object.keys(a),modified:u};n={additions:{},removals:{},modified:{}},r.publish(s)})))};return{add:function(e){var t=e.descriptor.id;n.additions[t]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[t]&&delete n.removals[t],i()},remove:function(e){var t=e.descriptor;n.removals[t.id]=!0,n.modified[t.droppableId]=!0,n.additions[t.id]&&delete n.additions[t.id],i()},stop:function(){o&&(cancelAnimationFrame(o),o=null,n={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=function(t){v(r,"Should only be subscribed when a collection is occurring");var o=r.critical.draggable;"ADDITION"===t.type&&Sn(e,o,t.value)&&n.add(t.value),"REMOVAL"===t.type&&Sn(e,o,t.value)&&n.remove(t.value)};return{updateDroppableIsEnabled:function(n,o){v(e.droppable.exists(n),"Cannot update is enabled flag of Droppable ".concat(n," as it is not registered")),r&&t.updateDroppableIsEnabled({id:n,isEnabled:o})},updateDroppableIsCombineEnabled:function(n,o){r&&(v(e.droppable.exists(n),"Cannot update isCombineEnabled flag of Droppable ".concat(n," as it is not registered")),t.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:o}))},scrollDroppable:function(t,n){r&&e.droppable.getById(t).callbacks.scroll(n)},updateDroppableScroll:function(n,o){r&&(v(e.droppable.exists(n),"Cannot update the scroll on Droppable ".concat(n," as it is not registered")),t.updateDroppableScroll({id:n,newScroll:o}))},startPublishing:function(t){v(!r,"Cannot start capturing critical dimensions as there is already a collection");var n=e.draggable.getById(t.draggableId),i=e.droppable.getById(n.descriptor.droppableId),a={draggable:n.descriptor,droppable:i.descriptor},c=e.subscribe(o);return r={critical:a,unsubscribe:c},En({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(r){n.stop();var t=r.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),r.unsubscribe(),r=null}}}},kn=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},Cn=function(e){window.scrollBy(e.x,e.y)},In=Object(ve.a)((function(e){return Ee(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),An=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var o=n[r];return o.frame?o:null}var i=function(e,t){return ge(In(t),(function(t){return v(t.frame,"Invalid result"),Dt(t.frame.pageMarginBox)(e)}))}(t,n);return i},Dn={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Tn=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,o=r-t;return 0===o?(a("\n      Detected distance range of 0 in the fluid auto scroller\n      This is unexpected and would cause a divide by 0 issue.\n      Not allowing an auto scroll\n    "),0):(n-t)/o},Ln=Dn.durationDampening.accelerateAt,Nn=Dn.durationDampening.stopDampeningAt,Rn=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,o=e.shouldUseTimeDampening,i=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Dn.maxPixelScroll;if(e===t.startScrollingFrom)return 1;var r=1-Tn({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=Dn.maxPixelScroll*Dn.ease(r);return Math.ceil(n)}(t,r);return 0===i?0:o?Math.max(function(e,t){var r=t,n=Nn,o=Date.now()-r;if(o>=Nn)return e;if(o<Ln)return 1;var i=Tn({startOfRange:Ln,endOfRange:n,current:o}),a=e*Dn.ease(i);return Math.ceil(a)}(i,n),1):i},Mn=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,o=e.axis,i=e.shouldUseTimeDampening,a=function(e,t){return{startScrollingFrom:e[t.size]*Dn.startFromPercentage,maxScrollValueAt:e[t.size]*Dn.maxScrollAtPercentage}}(t,o);return r[o.end]<r[o.start]?Rn({distanceToEdge:r[o.end],thresholds:a,dragStartTime:n,shouldUseTimeDampening:i}):-1*Rn({distanceToEdge:r[o.start],thresholds:a,dragStartTime:n,shouldUseTimeDampening:i})},Bn=V((function(e){return 0===e?0:e})),Fn=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,o=e.center,i=e.shouldUseTimeDampening,a={top:o.y-r.top,right:r.right-o.x,bottom:r.bottom-o.y,left:o.x-r.left},c=Mn({container:r,distanceToEdges:a,dragStartTime:t,axis:Ge,shouldUseTimeDampening:i}),l=Mn({container:r,distanceToEdges:a,dragStartTime:t,axis:We,shouldUseTimeDampening:i}),u=Bn({x:l,y:c});if(G(u,M))return null;var s=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,o=r.height>t.height,i=r.width>t.width;return i||o?i&&o?null:{x:i?0:n.x,y:o?0:n.y}:n}({container:r,subject:n,proposedScroll:u});return s?G(s,M)?null:s:null},Gn=V((function(e){return 0===e?0:e>0?1:-1})),Wn=(jn=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,r=e.max,n=e.change,o=B(t,n),i={x:jn(o.x,r.x),y:jn(o.y,r.y)};return G(i,M)?null:i}),zn=function(e){var t=e.max,r=e.current,n=e.change,o={x:Math.max(r.x,t.x),y:Math.max(r.y,t.y)},i=Gn(n),a=Wn({max:o,current:r,change:i});return!a||(0!==i.x&&0===a.x||0!==i.y&&0===a.y)},Un=function(e,t){return zn({current:e.scroll.current,max:e.scroll.max,change:t})},Hn=function(e,t){var r=e.frame;return!!r&&zn({current:r.scroll.current,max:r.scroll.max,change:t})},Vn=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,o=e.scrollWindow,i=e.scrollDroppable,a=t.current.page.borderBoxCenter,c=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,r=e.subject,n=e.center,o=e.dragStartTime,i=e.shouldUseTimeDampening,a=Fn({dragStartTime:o,container:t.frame,subject:r,center:n,shouldUseTimeDampening:i});return a&&Un(t,a)?a:null}({dragStartTime:r,viewport:t.viewport,subject:c,center:a,shouldUseTimeDampening:n});if(l)return void o(l)}var u=An({center:a,destination:Ct(t.impact),droppables:t.dimensions.droppables});if(u){var s=function(e){var t=e.droppable,r=e.subject,n=e.center,o=e.dragStartTime,i=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var c=Fn({dragStartTime:o,container:a.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return c&&Hn(t,c)?c:null}({dragStartTime:r,droppable:u,subject:c,center:a,shouldUseTimeDampening:n});s&&i(u.descriptor.id,s)}},qn=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,o=function(e,t){if(!Hn(e,t))return t;var n=function(e,t){var r=e.frame;return r&&Hn(e,t)?Wn({current:r.scroll.current,max:r.scroll.max,change:t}):null}(e,t);if(!n)return r(e.descriptor.id,t),null;var o=F(t,n);return r(e.descriptor.id,o),F(t,o)},i=function(e,t,r){if(!e)return r;if(!Un(t,r))return r;var o=function(e,t){if(!Un(e,t))return null;var r=e.scroll.max,n=e.scroll.current;return Wn({current:n,max:r,change:t})}(t,r);if(!o)return n(r),null;var i=F(r,o);return n(i),F(r,i)};return function(e){var r=e.scrollJumpRequest;if(r){var n=Ct(e.impact);v(n,"Cannot perform a jump scroll when there is no destination");var a=o(e.dimensions.droppables[n],r);if(a){var c=e.viewport,l=i(e.isWindowScrollAllowed,c,a);l&&function(e,r){var n=B(e.current.client.selection,r);t({client:n})}(e,l)}}}},Kn=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,o=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=$r(t),o=$r(r),i=null,a=function(e){v(i,"Cannot fluid scroll if not dragging");var t=i,r=t.shouldUseTimeDampening,a=t.dragStartTime;Vn({state:e,scrollWindow:n,scrollDroppable:o,dragStartTime:a,shouldUseTimeDampening:r})};return{start:function(e){v(!i,"Cannot start auto scrolling when already started");var t=Date.now(),r=!1,n=function(){r=!0};Vn({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:n,scrollDroppable:n}),i={dragStartTime:t,shouldUseTimeDampening:r},r&&a(e)},stop:function(){i&&(n.cancel(),o.cancel(),i=null)},scroll:a}}({scrollWindow:r,scrollDroppable:t}),i=qn({move:n,scrollWindow:r,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&i(e):o.scroll(e))},start:o.start,stop:o.stop}},Yn="data-rbd",Qn={base:xn="".concat(Yn,"-drag-handle"),draggableId:"".concat(xn,"-draggable-id"),contextId:"".concat(xn,"-context-id")},Xn=function(){var e="".concat(Yn,"-draggable");return{base:e,contextId:"".concat(e,"-context-id"),id:"".concat(e,"-id")}}(),Jn=function(){var e="".concat(Yn,"-droppable");return{base:e,contextId:"".concat(e,"-context-id"),id:"".concat(e,"-id")}}(),Zn=("".concat(Yn,"-placeholder-context-id"),{contextId:"".concat(Yn,"-scroll-container-context-id")}),$n=function(e,t){return e.map((function(e){var r=e.styles[t];return r?"".concat(e.selector," { ").concat(r," }"):""})).join(" ")},eo=function(e){var t,r,n,o=(t=e,function(e){return"[".concat(e,'="').concat(t,'"]')}),i=(r="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:o(Qn.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:r,dragging:"pointer-events: none;",dropAnimating:r}}),a=[(n="\n      transition: ".concat(zr.outOfTheWay,";\n    "),{selector:o(Xn.contextId),styles:{dragging:n,dropAnimating:n,userCancel:n}}),i,{selector:o(Jn.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:$n(a,"always"),resting:$n(a,"resting"),dragging:$n(a,"dragging"),dropAnimating:$n(a,"dropAnimating"),userCancel:$n(a,"userCancel")}},to="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect,ro=function(){var e=document.querySelector("head");return v(e,"Cannot find the head to append a style to"),e},no=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};var oo=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function io(e){return e instanceof oo(e).HTMLElement}function ao(e,t){var r="[".concat(Qn.contextId,'="').concat(e,'"]'),n=we(document.querySelectorAll(r));if(!n.length)return a('Unable to find any drag handles in the context "'.concat(e,'"')),null;var o=ge(n,(function(e){return e.getAttribute(Qn.draggableId)===t}));return o?io(o)?o:(a("drag handle needs to be a HTMLElement"),null):(a('Unable to find drag handle with id "'.concat(t,'" as no handle with a matching id was found')),null)}function co(){var e={draggables:{},droppables:{}},t=[];function r(e){t.length&&t.forEach((function(t){return t(e)}))}function n(t){return e.draggables[t]||null}function o(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,r({type:"ADDITION",value:t})},update:function(t,r){var n=e.draggables[r.descriptor.id];n&&n.uniqueId===t.uniqueId&&(delete e.draggables[r.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var o=t.descriptor.id,i=n(o);i&&t.uniqueId===i.uniqueId&&(delete e.draggables[o],r({type:"REMOVAL",value:t}))},getById:function(e){var t=n(e);return v(t,"Cannot find draggable entry with id [".concat(e,"]")),t},findById:n,exists:function(e){return Boolean(n(e))},getAllByType:function(t){return ye(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var r=o(t.descriptor.id);r&&t.uniqueId===r.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=o(e);return v(t,"Cannot find droppable entry with id [".concat(e,"]")),t},findById:o,exists:function(e){return Boolean(o(e))},getAllByType:function(t){return ye(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var lo=o.a.createContext(null),uo=function(){var e=document.body;return v(e,"Cannot find document.body"),e},so={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},fo=function(e){return"rbd-announcement-".concat(e)};var po=0,mo={separator:"::"};function ho(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mo;return A((function(){return"".concat(e).concat(t.separator).concat(po++)}),[t.separator,e])}var vo=o.a.createContext(null);function yo(e){0}function bo(e,t){yo()}function go(e){var t=Object(n.useRef)(e);return Object(n.useEffect)((function(){t.current=e})),t}var wo,_o=27,Oo=32,Eo=37,So=38,jo=39,xo=40;function Po(e){return Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Po(e)}function ko(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Po(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Po(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Po(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Co=(ko(wo={},13,!0),ko(wo,9,!0),wo),Io=function(e){Co[e.keyCode]&&e.preventDefault()},Ao=function(){var e="visibilitychange";return"undefined"==typeof document?e:ge([e,"ms".concat(e),"webkit".concat(e),"moz".concat(e),"o".concat(e)],(function(e){return"on".concat(e)in document}))||e}(),Do=Ao,To=0,Lo=5;var No,Ro={type:"IDLE"};function Mo(e){var t=e.cancel,r=e.completed,n=e.getPhase,o=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,r=e.clientX,i=e.clientY;if(t===To){var a={x:r,y:i},c=n();if("DRAGGING"===c.type)return e.preventDefault(),void c.actions.move(a);v("PENDING"===c.type,"Cannot be IDLE");var l=c.point;if(u=l,s=a,Math.abs(s.x-u.x)>=Lo||Math.abs(s.y-u.y)>=Lo){var u,s;e.preventDefault();var f=c.actions.fluidLift(a);o({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(e){var o=n();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===n().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==n().type)return e.keyCode===_o?(e.preventDefault(),void t()):void Io(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===n().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var r=n();v("IDLE"!==r.type,"Unexpected phase"),r.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:Do,fn:t}]}function Bo(e){var t=Object(n.useRef)(Ro),r=Object(n.useRef)(c),o=A((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&t.button===To&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var n=e.findClosestDraggableId(t);if(n){var o=e.tryGetLock(n,l,{sourceEvent:t});if(o){t.preventDefault();var i={x:t.clientX,y:t.clientY};r.current(),f(o,i)}}}}}}),[e]),i=A((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var n=e.findOptionsForDraggable(r);n&&(n.shouldRespectForcePress||e.canGetLock(r)&&t.preventDefault())}}}}}),[e]),a=D((function(){r.current=d(window,[i,o],{passive:!1,capture:!0})}),[i,o]),l=D((function(){"IDLE"!==t.current.type&&(t.current=Ro,r.current(),a())}),[a]),u=D((function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),s=D((function(){var e=Mo({cancel:u,completed:l,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});r.current=d(window,e,{capture:!0,passive:!1})}),[u,l]),f=D((function(e,r){v("IDLE"===t.current.type,"Expected to move from IDLE to PENDING drag"),t.current={type:"PENDING",point:r,actions:e},s()}),[s]);to((function(){return a(),function(){r.current()}}),[a])}function Fo(e){return Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fo(e)}function Go(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Fo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Fo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Fo(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wo(){}var zo=(Go(No={},34,!0),Go(No,33,!0),Go(No,36,!0),Go(No,35,!0),No);function Uo(e,t){function r(){t(),e.cancel()}return[{eventName:"keydown",fn:function(n){return n.keyCode===_o?(n.preventDefault(),void r()):n.keyCode===Oo?(n.preventDefault(),t(),void e.drop()):n.keyCode===xo?(n.preventDefault(),void e.moveDown()):n.keyCode===So?(n.preventDefault(),void e.moveUp()):n.keyCode===jo?(n.preventDefault(),void e.moveRight()):n.keyCode===Eo?(n.preventDefault(),void e.moveLeft()):void(zo[n.keyCode]?n.preventDefault():Io(n))}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Do,fn:r}]}var Ho={type:"IDLE"},Vo=300,qo=.15;function Ko(e){var t=Object(n.useRef)(Ho),r=Object(n.useRef)(c),o=D((function(){return t.current}),[]),i=D((function(e){t.current=e}),[]),a=A((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var o=e.tryGetLock(n,u,{sourceEvent:t});if(o){var i=t.touches[0],a={x:i.clientX,y:i.clientY},c=e.findClosestDragHandle(t);v(c,"Touch sensor unable to find drag handle"),r.current(),m(o,a,c)}}}}}}),[e]),l=D((function(){r.current=d(window,[a],{capture:!0,passive:!1})}),[a]),u=D((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),i(Ho),r.current(),l())}),[l,i]),s=D((function(){var e=t.current;u(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[u]),f=D((function(e){var t={capture:!0,passive:!1},n={cancel:s,completed:u,getPhase:o},i=d(e,function(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var r=n();if("DRAGGING"===r.type){r.hasMoved=!0;var o=e.touches[0],i={x:o.clientX,y:o.clientY};e.preventDefault(),r.actions.move(i)}else t()}},{eventName:"touchend",fn:function(e){var o=n();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===n().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var r=n();v("IDLE"!==r.type);var o=e.touches[0];if(o&&o.force>=qo){var i=r.actions.shouldRespectForcePress();if("PENDING"!==r.type)return i?r.hasMoved?void e.preventDefault():void t():void e.preventDefault();i&&t()}}},{eventName:Do,fn:t}]}(n),t),a=d(window,function(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===r().type?(e.keyCode===_o&&e.preventDefault(),t()):t()}},{eventName:Do,fn:t}]}(n),t);r.current=function(){i(),a()}}),[s,o,u]),p=D((function(){var e=o();v("PENDING"===e.type,"Cannot start dragging from phase ".concat(e.type));var t=e.actions.fluidLift(e.point);t.move({x:e.point.x,y:e.point.y+1e-4}),i({type:"DRAGGING",actions:t,hasMoved:!1})}),[o,i]),m=D((function(e,t,r){v("IDLE"===o().type,"Expected to move from IDLE to PENDING drag");var n=setTimeout(p,Vo);i({type:"PENDING",point:t,actions:e,longPressTimerId:n}),f(r)}),[f,o,i,p]);to((function(){return l(),function(){r.current();var e=o();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),i(Ho))}}),[o,l,i]),to((function(){return d(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}var Yo={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Qo(e,t){if(null==t)return!1;if(Boolean(Yo[t.tagName.toLowerCase()]))return!0;var r=t.getAttribute("contenteditable");return"true"===r||""===r||t!==e&&Qo(e,t.parentElement)}function Xo(e,t){var r=t.target;return!!io(r)&&Qo(e,r)}var Jo=function(e){return K(e.getBoundingClientRect()).center};var Zo=function(){var e="matches";return"undefined"==typeof document?e:ge([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function $o(e,t){return null==e?null:e[Zo](t)?e:$o(e.parentElement,t)}function ei(e,t){return e.closest?e.closest(t):$o(e,t)}function ti(e,t){var r,n=t.target;if(!((r=n)instanceof oo(r).Element))return a("event.target must be a Element"),null;var o=function(e){return"[".concat(Qn.contextId,'="').concat(e,'"]')}(e),i=ei(n,o);return i?io(i)?i:(a("drag handle must be a HTMLElement"),null):null}function ri(e){return ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(e)}function ni(e){return function(e){if(Array.isArray(e))return oi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return oi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ii(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(r),!0).forEach((function(t){ci(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ii(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ci(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ri(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ri(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function li(e){e.preventDefault()}function ui(e){var t=e.expected,r=e.phase,n=e.isLockActive,o=e.shouldWarn;return n()?t===r||(o&&a("\n        Cannot perform action.\n        The actions you used belong to an outdated phase\n\n        Current phase: ".concat(t,"\n        You called an action from outdated phase: ").concat(r,"\n\n        Tips:\n\n        - Do not use preDragActions actions after calling preDragActions.lift()\n      ")),!1):(o&&a("\n        Cannot perform action.\n        The sensor no longer has an action lock.\n\n        Tips:\n\n        - Throw away your action handlers when forceStop() is called\n        - Check actions.isActive() if you really need to\n      "),!1)}function si(e){var t=e.lockAPI,r=e.store,n=e.registry,o=e.draggableId;if(t.isClaimed())return!1;var i=n.draggable.findById(o);return i?!!i.options.isEnabled&&!!kn(r.getState(),o):(a("Unable to find draggable with id: ".concat(o)),!1)}function fi(e){var t=e.lockAPI,r=e.contextId,n=e.store,o=e.registry,i=e.draggableId,l=e.forceSensorStop,u=e.sourceEvent;if(!si({lockAPI:t,store:n,registry:o,draggableId:i}))return null;var s=o.draggable.getById(i),f=function(e,t){var r="[".concat(Xn.contextId,'="').concat(e,'"]'),n=ge(we(document.querySelectorAll(r)),(function(e){return e.getAttribute(Xn.id)===t}));return n?io(n)?n:(a("Draggable element is not a HTMLElement"),null):null}(r,s.descriptor.id);if(!f)return a("Unable to find draggable element with id: ".concat(i)),null;if(u&&!s.options.canDragInteractiveElements&&Xo(f,u))return null;var p=t.claim(l||c),m="PRE_DRAG";function h(){return s.options.shouldRespectForcePress}function y(){return t.isActive(p)}var b=function(e,t){ui({expected:e,phase:m,isLockActive:y,shouldWarn:!0})&&n.dispatch(t())}.bind(null,"DRAGGING");function g(e){function r(){t.release(),m="COMPLETED"}function o(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shouldBlockNextClick:!1};if(e.cleanup(),o.shouldBlockNextClick){var i=d(window,[{eventName:"click",fn:li,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(i)}r(),n.dispatch(Tr({reason:t}))}return"PRE_DRAG"!==m&&(r(),v("PRE_DRAG"===m,"Cannot lift in phase ".concat(m))),n.dispatch(wr(e.liftActionArgs)),m="DRAGGING",ai({isActive:function(){return ui({expected:"DRAGGING",phase:m,isLockActive:y,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(e){return o("DROP",e)},cancel:function(e){return o("CANCEL",e)}},e.actions)}return{isActive:function(){return ui({expected:"PRE_DRAG",phase:m,isLockActive:y,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:function(e){var t=$r((function(e){b((function(){return xr({client:e})}))}));return ai(ai({},g({liftActionArgs:{id:i,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}})),{},{move:t})},snapLift:function(){var e={moveUp:function(){return b(Pr)},moveRight:function(){return b(Cr)},moveDown:function(){return b(kr)},moveLeft:function(){return b(Ir)}};return g({liftActionArgs:{id:i,clientSelection:Jo(f),movementMode:"SNAP"},cleanup:c,actions:e})},abort:function(){ui({expected:"PRE_DRAG",phase:m,isLockActive:y,shouldWarn:!0})&&t.release()}}}var di=[Bo,function(e){var t=Object(n.useRef)(Wo),r=A((function(){return{eventName:"keydown",fn:function(r){if(!r.defaultPrevented&&r.keyCode===Oo){var n=e.findClosestDraggableId(r);if(n){var i=e.tryGetLock(n,l,{sourceEvent:r});if(i){r.preventDefault();var a=!0,c=i.snapLift();t.current(),t.current=d(window,Uo(c,l),{capture:!0,passive:!1})}}}function l(){v(a,"Cannot stop capturing a keyboard drag when not capturing"),a=!1,t.current(),o()}}}}),[e]),o=D((function(){t.current=d(window,[r],{passive:!1,capture:!0})}),[r]);to((function(){return o(),function(){t.current()}}),[o])},Ko];function pi(e){var t=e.contextId,r=e.store,o=e.registry,i=e.customSensors,a=e.enableDefaultSensors,c=[].concat(ni(a?di:[]),ni(i||[])),l=Object(n.useState)((function(){return function(){var e=null;function t(){v(e,"Cannot release lock when there is no lock"),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){v(!e,"Cannot claim lock as it is already claimed");var r={abandon:t};return e=r,r},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],u=D((function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()}),[l]);to((function(){var e=r.getState();return r.subscribe((function(){var t=r.getState();u(e,t),e=t}))}),[l,r,u]),to((function(){return l.tryAbandon}),[l.tryAbandon]);var s=D((function(e){return si({lockAPI:l,registry:o,store:r,draggableId:e})}),[l,o,r]),f=D((function(e,n,i){return fi({lockAPI:l,registry:o,contextId:t,store:r,draggableId:e,forceSensorStop:n,sourceEvent:i&&i.sourceEvent?i.sourceEvent:null})}),[t,l,o,r]),d=D((function(e){return ti(t,e)}),[t]),p=D((function(e){return function(e,t){var r=ti(e,t);return r?r.getAttribute(Qn.draggableId):null}(t,e)}),[t]),m=D((function(e){var t=o.draggable.findById(e);return t?t.options:null}),[o.draggable]),h=D((function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==r.getState().phase&&r.dispatch(Ar()))}),[l,r]),y=D(l.isClaimed,[l]),b=A((function(){return{canGetLock:s,tryGetLock:f,findClosestDraggableId:p,findClosestDragHandle:d,findOptionsForDraggable:m,tryReleaseLock:h,isLockClaimed:y}}),[s,f,p,d,m,h,y]);yo();for(var g=0;g<c.length;g++)c[g](b)}function mi(e){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi(e)}function hi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vi(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==mi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==mi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mi(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yi=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function bi(e){return v(e.current,"Could not find store from lazy ref"),e.current}function gi(e){var t=e.contextId,r=e.setCallbacks,i=e.sensors,c=e.nonce,l=e.dragHandleUsageInstructions,u=Object(n.useRef)(null);bo();var s=go(e),f=D((function(){return yi(s.current)}),[s]),d=function(e){var t=A((function(){return fo(e)}),[e]),r=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=document.createElement("div");return r.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),Object.assign(e.style,so),uo().appendChild(e),function(){setTimeout((function(){var t=uo();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)}))}}),[t]),D((function(e){var t=r.current;t?t.textContent=e:a('\n      A screen reader message was trying to be announced but it was unable to do so.\n      This can occur if you unmount your <DragDropContext /> in your onDragEnd.\n      Consider calling provided.announce() before the unmount so that the instruction will\n      not be lost for users relying on a screen reader.\n\n      Message not passed to screen reader:\n\n      "'.concat(e,'"\n    '))}),[])}(t),p=function(e){var t=e.contextId,r=e.text,o=ho("hidden-text",{separator:"-"}),i=A((function(){return function(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-".concat(t,"-").concat(r)}({contextId:t,uniqueId:o})}),[o,t]);return Object(n.useEffect)((function(){var e=document.createElement("div");return e.id=i,e.textContent=r,e.style.display="none",uo().appendChild(e),function(){var t=uo();t.contains(e)&&t.removeChild(e)}}),[i,r]),i}({contextId:t,text:l}),m=function(e,t){var r=A((function(){return eo(e)}),[e]),o=Object(n.useRef)(null),i=Object(n.useRef)(null),a=D(Object(ve.a)((function(e){var t=i.current;v(t,"Cannot set dynamic style element if it is not set"),t.textContent=e})),[]),c=D((function(e){var t=o.current;v(t,"Cannot set dynamic style element if it is not set"),t.textContent=e}),[]);to((function(){v(!o.current&&!i.current,"style elements already mounted");var n=no(t),l=no(t);return o.current=n,i.current=l,n.setAttribute("".concat(Yn,"-always"),e),l.setAttribute("".concat(Yn,"-dynamic"),e),ro().appendChild(n),ro().appendChild(l),c(r.always),a(r.resting),function(){var e=function(e){var t=e.current;v(t,"Cannot unmount ref as it is not set"),ro().removeChild(t),e.current=null};e(o),e(i)}}),[t,c,a,r.always,r.resting,e]);var l=D((function(){return a(r.dragging)}),[a,r.dragging]),u=D((function(e){a("DROP"!==e?r.userCancel:r.dropAnimating)}),[a,r.dropAnimating,r.userCancel]),s=D((function(){i.current&&a(r.resting)}),[a,r.resting]);return A((function(){return{dragging:l,dropping:u,resting:s}}),[l,u,s])}(t,c),h=D((function(e){bi(u).dispatch(e)}),[]),y=A((function(){return Object(k.b)({publishWhileDragging:_r,updateDroppableScroll:Er,updateDroppableIsEnabled:Sr,updateDroppableIsCombineEnabled:jr,collectionStarting:Or},h)}),[h]),b=function(){var e=A(co,[]);return Object(n.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),g=A((function(){return Pn(b,y)}),[b,y]),w=A((function(){return Kn(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(r),!0).forEach((function(t){vi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({scrollWindow:Cn,scrollDroppable:g.scrollDroppable},Object(k.b)({move:xr},h)))}),[g.scrollDroppable,h]),_=function(e){var t=Object(n.useRef)({}),r=Object(n.useRef)(null),o=Object(n.useRef)(null),i=Object(n.useRef)(!1),a=D((function(e,r){var n={id:e,focus:r};return t.current[e]=n,function(){var r=t.current;r[e]!==n&&delete r[e]}}),[]),c=D((function(t){var r=ao(e,t);r&&r!==document.activeElement&&r.focus()}),[e]),l=D((function(e,t){r.current===e&&(r.current=t)}),[]),u=D((function(){o.current||i.current&&(o.current=requestAnimationFrame((function(){o.current=null;var e=r.current;e&&c(e)})))}),[c]),s=D((function(e){r.current=null;var t=document.activeElement;t&&t.getAttribute(Qn.draggableId)===e&&(r.current=e)}),[]);return to((function(){return i.current=!0,function(){i.current=!1;var e=o.current;e&&cancelAnimationFrame(e)}}),[]),A((function(){return{register:a,tryRecordFocus:s,tryRestoreFocusRecorded:u,tryShiftRecord:l}}),[a,s,u,l])}(t),O=A((function(){return gn({announce:d,autoScroller:w,dimensionMarshal:g,focusMarshal:_,getResponders:f,styleMarshal:m})}),[d,w,g,_,f,m]);u.current=O;var E=D((function(){var e=bi(u);"IDLE"!==e.getState().phase&&e.dispatch(Ar())}),[]),S=D((function(){var e=bi(u).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);r(A((function(){return{isDragging:S,tryAbort:E}}),[S,E]));var j=D((function(e){return kn(bi(u).getState(),e)}),[]),x=D((function(){return At(bi(u).getState())}),[]),P=A((function(){return{marshal:g,focus:_,contextId:t,canLift:j,isMovementAllowed:x,dragHandleUsageInstructionsId:p,registry:b}}),[t,g,p,_,j,x,b]);return pi({contextId:t,store:O,registry:b,customSensors:i,enableDefaultSensors:!1!==e.enableDefaultSensors}),Object(n.useEffect)((function(){return E}),[E]),o.a.createElement(vo.Provider,{value:P},o.a.createElement(C.a,{context:lo,store:O},e.children))}var wi=0;function _i(e){var t=A((function(){return"".concat(wi++)}),[]),r=e.dragHandleUsageInstructions||P.dragHandleUsageInstructions;return o.a.createElement(O,null,(function(n){return o.a.createElement(gi,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var Oi=r(39),Ei=r.n(Oi),Si=function(e){return function(t){return e===t}},ji=Si("scroll"),xi=Si("auto"),Pi=(Si("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),ki=function(e){var t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return Pi(r,ji)||Pi(r,xi)},Ci=function e(t){return null==t||t===document.body||t===document.documentElement?null:ki(t)?t:e(t.parentElement)},Ii=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Ai=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},Di=function(e){return{closestScrollable:Ci(e),isFixedOnPage:Ai(e)}},Ti=function(e){var t=e.ref,r=e.descriptor,n=e.env,o=e.windowScroll,i=e.direction,a=e.isDropDisabled,c=e.isCombineEnabled,l=e.shouldClipSubject,u=n.closestScrollable,s=function(e,t){var r=re(e);if(!t)return r;if(e!==t)return r;var n=r.paddingBox.top-t.scrollTop,o=r.paddingBox.left-t.scrollLeft,i=n+t.scrollHeight,a=o+t.scrollWidth,c=Y({top:n,right:a,bottom:i,left:o},r.border);return J({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})}(t,u),f=ee(s,o),d=function(){if(!u)return null;var e=re(u),t={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:e,page:ee(e,o),scroll:Ii(u),scrollSize:t,shouldClipSubject:l}}(),p=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,o=e.isFixedOnPage,i=e.direction,a=e.client,c=e.page,l=e.closest,u=function(){if(!l)return null;var e=l.scrollSize,t=l.client,r=wn({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:r,diff:{value:M,displacement:M}}}}(),s="vertical"===i?Ge:We;return{descriptor:t,isCombineEnabled:n,isFixedOnPage:o,axis:s,isEnabled:r,client:a,page:c,frame:u,subject:se({page:c,withPlaceholder:null,axis:s,frame:u})}}({descriptor:r,isEnabled:!a,isCombineEnabled:c,isFixedOnPage:n.isFixedOnPage,direction:i,client:s,page:f,closest:d});return p},Li={passive:!1},Ni={passive:!0},Ri=function(e){return e.shouldPublishImmediately?Li:Ni};function Mi(e){var t=Object(n.useContext)(e);return v(t,"Could not find required context"),t}var Bi=function(e){return e&&e.env.closestScrollable||null};function Fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wi(){}var zi={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},Ui=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate,o=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate;return t||"close"===n?zi:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}}({isAnimatingOpenOnMount:t,placeholder:r,animate:n});return{display:r.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==n?zr.placeholder:null}};function Hi(e){var t=Object(n.useRef)(null),r=D((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),i=e.animate,a=e.onTransitionEnd,c=e.onClose,l=e.contextId,u=Fi(Object(n.useState)("open"===e.animate),2),s=u[0],f=u[1];Object(n.useEffect)((function(){return s?"open"!==i?(r(),f(!1),Wi):t.current?Wi:(t.current=setTimeout((function(){t.current=null,f(!1)})),r):Wi}),[i,s,r]);var d=D((function(e){"height"===e.propertyName&&(a(),"close"===i&&c())}),[i,c,a]),p=Ui({isAnimatingOpenOnMount:s,animate:e.animate,placeholder:e.placeholder});return o.a.createElement(e.placeholder.tagName,{style:p,"data-rbd-placeholder-context-id":l,onTransitionEnd:d,ref:e.innerRef})}var Vi=o.a.memo(Hi),qi=o.a.createContext(null);function Ki(e){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ki(e)}function Yi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Ki(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ki(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ki(i)?i:String(i)),n)}var o,i}function Qi(e,t){return Qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qi(e,t)}function Xi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ji(e);if(t){var o=Ji(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ki(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ji(e){return Ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ji(e)}var Zi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qi(e,t)}(i,e);var t,r,n,o=Xi(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={isVisible:Boolean(e.props.on),data:e.props.on,animate:e.props.shouldAnimate&&e.props.on?"open":"none"},e.onClose=function(){"close"===e.state.animate&&e.setState({isVisible:!1})},e}return t=i,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}}}],(r=[{key:"render",value:function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}])&&Yi(t.prototype,r),n&&Yi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.a.PureComponent),$i={dragging:5e3,dropAnimating:4500},ea=function(e,t){return t?zr.drop(t.duration):e?zr.snap:zr.fluid},ta=function(e,t){return e?t?Mr.drop:Mr.combining:null},ra=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode};function na(e){return"DRAGGING"===e.type?(n=(r=e).dimension.client,o=r.offset,i=r.combineWith,a=r.dropping,c=Boolean(i),l=ra(r),u=Boolean(a),s=u?Hr.drop(o,c):Hr.moveTo(o),{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:ea(l,a),transform:s,opacity:ta(c,u),zIndex:u?$i.dropAnimating:$i.dragging,pointerEvents:"none"}):(t=e,{transform:Hr.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"});var t,r,n,o,i,a,c,l,u,s}function oa(e){var t=ho("draggable"),r=e.descriptor,o=e.registry,i=e.getDraggableRef,a=e.canDragInteractiveElements,c=e.shouldRespectForcePress,l=e.isEnabled,u=A((function(){return{canDragInteractiveElements:a,shouldRespectForcePress:c,isEnabled:l}}),[a,l,c]),s=D((function(e){var t=i();return v(t,"Cannot get dimension when no ref is set"),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M,n=window.getComputedStyle(t),o=t.getBoundingClientRect(),i=te(o,n),a=ee(i,r);return{descriptor:e,placeholder:{client:i,tagName:t.tagName.toLowerCase(),display:n.display},displaceBy:{x:i.marginBox.width,y:i.marginBox.height},client:i,page:a}}(r,t,e)}),[r,i]),f=A((function(){return{uniqueId:t,descriptor:r,options:u,getDimension:s}}),[r,s,u,t]),d=Object(n.useRef)(f),p=Object(n.useRef)(!0);to((function(){return o.draggable.register(d.current),function(){return o.draggable.unregister(d.current)}}),[o.draggable]),to((function(){if(p.current)p.current=!1;else{var e=d.current;d.current=f,o.draggable.update(f,e)}}),[f,o.draggable])}function ia(e,t,r){bo()}function aa(e){e.preventDefault()}var ca=function(e,t){return e===t},la=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null};function ua(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var sa={mapped:{type:"SECONDARY",offset:M,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ua(null)}};var fa={dropAnimationFinished:Lr},da=Object(C.d)((function(){var e,t,r,n=(e=Object(ve.a)((function(e,t){return{x:e,y:t}})),t=Object(ve.a)((function(e,t,r,n,o){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(o),dropAnimation:o,mode:e,draggingOver:r,combineWith:n,combineTargetFor:null}})),r=Object(ve.a)((function(e,r,n,o,i,a,c){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:i,combineWith:a,mode:r,offset:e,dimension:n,forceShouldAnimate:c,snapshot:t(r,o,i,a,null)}}})),function(n,o){if(n.isDragging){if(n.critical.draggable.id!==o.draggableId)return null;var i=n.current.client.offset,a=n.dimensions.draggables[o.draggableId],c=Ct(n.impact),l=(s=n.impact).at&&"COMBINE"===s.at.type?s.at.combine.draggableId:null,u=n.forceShouldAnimate;return r(e(i.x,i.y),n.movementMode,a,o.isClone,c,l,u)}var s;if("DROP_ANIMATING"===n.phase){var f=n.completed;if(f.result.draggableId!==o.draggableId)return null;var d=o.isClone,p=n.dimensions.draggables[o.draggableId],m=f.result,h=m.mode,v=la(m),y=function(e){return e.combine?e.combine.draggableId:null}(m),b={duration:n.dropDuration,curve:Rr,moveTo:n.newHomeClientOffset,opacity:y?Mr.drop:null,scale:y?Br.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:p,dropping:b,draggingOver:v,combineWith:y,mode:h,forceShouldAnimate:null,snapshot:t(h,d,v,y,b)}}}return null}),o=function(){var e=Object(ve.a)((function(e,t){return{x:e,y:t}})),t=Object(ve.a)(ua),r=Object(ve.a)((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{mapped:{type:"SECONDARY",offset:e,combineTargetFor:r,shouldAnimateDisplacement:arguments.length>2?arguments[2]:void 0,snapshot:t(r)}}})),n=function(e){return e?r(M,e,!0):null},o=function(t,o,i,a){var c=i.displaced.visible[t],l=Boolean(a.inVirtualList&&a.effected[t]),u=Pe(i),s=u&&u.draggableId===t?o:null;if(!c){if(!l)return n(s);if(i.displaced.invisible[t])return null;var f=W(a.displacedBy.point),d=e(f.x,f.y);return r(d,s,!0)}if(l)return n(s);var p=i.displacedBy.point,m=e(p.x,p.y);return r(m,s,c.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:o(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var r=e.completed;return r.result.draggableId===t.draggableId?null:o(t.draggableId,r.result.draggableId,r.impact,r.afterCritical)}return null}}();return function(e,t){return n(e,t)||o(e,t)||sa}}),fa,null,{context:lo,pure:!0,areStatePropsEqual:ca})((function(e){var t=Object(n.useRef)(null),r=D((function(e){t.current=e}),[]),o=D((function(){return t.current}),[]),i=Mi(vo),a=i.contextId,c=i.dragHandleUsageInstructionsId,l=i.registry,u=Mi(qi),s=u.type,f=u.droppableId,d=A((function(){return{id:e.draggableId,index:e.index,type:s,droppableId:f}}),[e.draggableId,e.index,s,f]),p=e.children,m=e.draggableId,h=e.isEnabled,v=e.shouldRespectForcePress,y=e.canDragInteractiveElements,b=e.isClone,g=e.mapped,w=e.dropAnimationFinished;ia(),yo(),b||oa(A((function(){return{descriptor:d,registry:l,getDraggableRef:o,canDragInteractiveElements:y,shouldRespectForcePress:v,isEnabled:h}}),[d,l,o,y,v,h]));var _=A((function(){return h?{tabIndex:0,role:"button","aria-describedby":c,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:aa}:null}),[a,c,m,h]),O=D((function(e){"DRAGGING"===g.type&&g.dropping&&"transform"===e.propertyName&&w()}),[w,g]),E=A((function(){var e=na(g),t="DRAGGING"===g.type&&g.dropping?O:null;return{innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":m,style:e,onTransitionEnd:t},dragHandleProps:_}}),[a,_,m,g,O,r]),S=A((function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}}),[d.droppableId,d.id,d.index,d.type]);return p(E,g.snapshot,S)})),pa=da;function ma(){return ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ma.apply(this,arguments)}function ha(e){return Mi(qi).isUsingCloneFor!==e.draggableId||e.isClone?o.a.createElement(pa,e):null}function va(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,r=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return o.a.createElement(ha,ma({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function ya(e){return ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ya(e)}function ba(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(r),!0).forEach((function(t){wa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ba(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ya(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ya(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ya(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _a=function(e,t){return e===t.droppable.type},Oa=function(e,t){return t.draggables[e.draggable.id]},Ea={updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}};var Sa={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return v(document.body,"document.body is not ready"),document.body}},ja=Object(C.d)((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=ga(ga({},e),{},{shouldAnimatePlaceholder:!1}),r=Object(ve.a)((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),n=Object(ve.a)((function(n,o,i,a,c,l){var u=c.descriptor.id;if(c.descriptor.droppableId===n){var s=l?{render:l,dragging:r(c.descriptor)}:null,f={isDraggingOver:i,draggingOverWith:i?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:f,useClone:s}}if(!o)return t;if(!a)return e;var d={isDraggingOver:i,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:d,useClone:null}}));return function(r,o){var i=o.droppableId,a=o.type,c=!o.isDropDisabled,l=o.renderClone;if(r.isDragging){var u=r.critical;if(!_a(a,u))return t;var s=Oa(u,r.dimensions),f=Ct(r.impact)===i;return n(i,c,f,f,s,l)}if("DROP_ANIMATING"===r.phase){var d=r.completed;if(!_a(a,d.critical))return t;var p=Oa(d.critical,r.dimensions);return n(i,c,la(d.result)===i,Ct(d.impact)===i,p,l)}if("IDLE"===r.phase&&r.completed&&!r.shouldFlush){var m=r.completed;if(!_a(a,m.critical))return t;var h=Ct(m.impact)===i,v=Boolean(m.impact.at&&"COMBINE"===m.impact.at.type),y=m.critical.droppable.id===i;return h?v?e:t:y?e:t}return t}}),Ea,null,{context:lo,pure:!0,areStatePropsEqual:ca})((function(e){var t=Object(n.useContext)(vo);v(t,"Could not find app context");var r=t.contextId,i=t.isMovementAllowed,c=Object(n.useRef)(null),l=Object(n.useRef)(null),u=e.children,s=e.droppableId,f=e.type,d=e.mode,p=e.direction,m=e.ignoreContainerClipping,h=e.isDropDisabled,y=e.isCombineEnabled,b=e.snapshot,g=e.useClone,w=e.updateViewportMaxScroll,_=e.getContainerForClone,O=D((function(){return c.current}),[]),E=D((function(e){c.current=e}),[]),S=(D((function(){return l.current}),[]),D((function(e){l.current=e}),[]));bo();var j=D((function(){i()&&w({maxScroll:On()})}),[i,w]);!function(e){var t=Object(n.useRef)(null),r=Mi(vo),o=ho("droppable"),i=r.registry,c=r.marshal,l=go(e),u=A((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),s=Object(n.useRef)(u),f=A((function(){return Object(ve.a)((function(e,r){v(t.current,"Can only update scroll when dragging");var n={x:e,y:r};c.updateDroppableScroll(u.id,n)}))}),[u.id,c]),d=D((function(){var e=t.current;return e&&e.env.closestScrollable?Ii(e.env.closestScrollable):M}),[]),p=D((function(){var e=d();f(e.x,e.y)}),[d,f]),m=A((function(){return $r(p)}),[p]),h=D((function(){var e=t.current,r=Bi(e);v(e&&r,"Could not find scroll options while scrolling"),e.scrollOptions.shouldPublishImmediately?p():m()}),[m,p]),y=D((function(e,n){v(!t.current,"Cannot collect a droppable while a drag is occurring");var o=l.current,i=o.getDroppableRef();v(i,"Cannot collect without a droppable ref");var a=Di(i),c={ref:i,descriptor:u,env:a,scrollOptions:n};t.current=c;var s=Ti({ref:i,descriptor:u,env:a,windowScroll:e,direction:o.direction,isDropDisabled:o.isDropDisabled,isCombineEnabled:o.isCombineEnabled,shouldClipSubject:!o.ignoreContainerClipping}),f=a.closestScrollable;return f&&(f.setAttribute(Zn.contextId,r.contextId),f.addEventListener("scroll",h,Ri(c.scrollOptions))),s}),[r.contextId,u,h,l]),b=D((function(){var e=t.current,r=Bi(e);return v(e&&r,"Can only recollect Droppable client for Droppables that have a scroll container"),Ii(r)}),[]),g=D((function(){var e=t.current;v(e,"Cannot stop drag when no active drag");var r=Bi(e);t.current=null,r&&(m.cancel(),r.removeAttribute(Zn.contextId),r.removeEventListener("scroll",h,Ri(e.scrollOptions)))}),[h,m]),w=D((function(e){var r=t.current;v(r,"Cannot scroll when there is no drag");var n=Bi(r);v(n,"Cannot scroll a droppable with no closest scrollable"),n.scrollTop+=e.y,n.scrollLeft+=e.x}),[]),_=A((function(){return{getDimensionAndWatchScroll:y,getScrollWhileDragging:b,dragStopped:g,scroll:w}}),[g,y,b,w]),O=A((function(){return{uniqueId:o,descriptor:u,callbacks:_}}),[_,u,o]);to((function(){return s.current=O.descriptor,i.droppable.register(O),function(){t.current&&(a("Unsupported: changing the droppableId or type of a Droppable during a drag"),g()),i.droppable.unregister(O)}}),[_,u,g,O,c,i.droppable]),to((function(){t.current&&c.updateDroppableIsEnabled(s.current.id,!e.isDropDisabled)}),[e.isDropDisabled,c]),to((function(){t.current&&c.updateDroppableIsCombineEnabled(s.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,c])}({droppableId:s,type:f,mode:d,direction:p,isDropDisabled:h,isCombineEnabled:y,ignoreContainerClipping:m,getDroppableRef:O});var x=o.a.createElement(Zi,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,n=e.data,i=e.animate;return o.a.createElement(Vi,{placeholder:n,onClose:t,innerRef:S,animate:i,contextId:r,onTransitionEnd:j})})),P=A((function(){return{innerRef:E,placeholder:x,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":r}}}),[r,s,x,E]),k=g?g.dragging.draggableId:null,C=A((function(){return{droppableId:s,type:f,isUsingCloneFor:k}}),[s,k,f]);return o.a.createElement(qi.Provider,{value:C},u(P,b),function(){if(!g)return null;var e=g.dragging,t=g.render,r=o.a.createElement(ha,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(r,n){return t(r,n,e)}));return Ei.a.createPortal(r,_())}())}));ja.defaultProps=Sa;var xa=ja},4010:function(e,t,r){"use strict";r(183);var n=r(104),o=(r(61),r(23)),i=r(0),a=r.n(i),c=r(11),l=r.n(c),u=r(1532),s=r(551),f="index-module_container_cvFEw",d="index-module_imgDarkMask_oUhvV",p="index-module_descImg_yuOS4",m="index-module_title_xRvvb",h="index-module_firstLine_1EISJ",v="index-module_description_DuIJN",y="index-module_footer_W9yDd",b="index-module_detailBtn_GSAtM",g="index-module_shareBtn_vdQ5k";function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t,r=e.onShare,c=e.noButton,O=e.overlayClassName,E=e.type,S=e.onChangeShareStatus,j=e.restProps,x=_(Object(i.useState)(!1),2),P=x[0],k=x[1],C=Object(s.a)().isDarkMode,I=function(e,t){"function"==typeof S&&t&&S(e,t),k(e)};return t=c?a.a.createElement("span",{onClick:function(){return k(!0)},style:{display:"block"}},__("分享到花园")):a.a.createElement(u.a,w({iconName:"digitalgarden",tooltip:__("分享到花园")},j)),a.a.createElement(a.a.Fragment,null,a.a.createElement(n.a,{content:a.a.createElement("div",{className:f},C&&a.a.createElement("div",{className:d}),a.a.createElement("img",{className:p,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*ljInRZpwD6UAAAAAAAAAAAAAARQnAQ",alt:""}),a.a.createElement("p",{className:m},__("分享到花园")),a.a.createElement("p",{className:l()(v,h)},__("推送内容会出现在粉丝的「逛逛-关注」里")),a.a.createElement("p",{className:v},__("并同步到你的")," ",a.a.createElement("a",{href:"/".concat(window.appData.me.login),"data-desktopTarget":"_browser",target:"_blank"},__("我的花园"))," ",__("的「更新」模块")),a.a.createElement("div",{className:y},a.a.createElement(o.a,{className:b,onClick:function(){window.open(window.appData.isYuque?"https://www.yuque.com/yuque/mgcsc6/xtgy5c":"https://yuque.antfin.com/lark/xwhu77/lhqpnw")}},__("查看介绍")),a.a.createElement(o.a,{className:g,type:"primary",onClick:function(){I(!1,!0),r()}},__("确认")))),trigger:"click",noArrow:!0,visible:P,placement:"bottomRight",overlayClassName:l()(O),onVisibleChange:I,getPopupContainer:function(e){return"note"===E?e.closest(".note-list-item").querySelector(".note-item"):e.parentNode}},t))}},4013:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i}));var n="data-lark-popup-container",o="data-lark-doc-embed",i="doc_embed"},4015:function(e,t,r){"use strict";t.a={logoWrapper:"ViewerHeader-module_logoWrapper_nnDzf",navigation:"ViewerHeader-module_navigation_opJY6",logoWrapperActive:"ViewerHeader-module_logoWrapperActive_Ptc2p",logo:"ViewerHeader-module_logo_-rHiY",wrapper:"ViewerHeader-module_wrapper_vhIJ4",mark:"ViewerHeader-module_mark_c28hV",collaborate:"ViewerHeader-module_collaborate_VW8td",iconWrapper:"ViewerHeader-module_iconWrapper_Wis4F",icon:"ViewerHeader-module_icon_TPz6f",playButton:"ViewerHeader-module_playButton_3Qm5h",skylink:"ViewerHeader-module_skylink_toi1A",popoverMore:"ViewerHeader-module_popoverMore_JrUsz",editorBtn:"ViewerHeader-module_editorBtn_Sb8OT",versionSelector:"ViewerHeader-module_versionSelector_Gx9Eb",versionName:"ViewerHeader-module_versionName_4oYUk",logoOnboardingWrapper:"ViewerHeader-module_logoOnboardingWrapper_VyXtw",search:"ViewerHeader-module_search_fw9Jl",collabEntry:"ViewerHeader-module_collabEntry_XfPGf",larkDotZoom:"ViewerHeader-module_larkDotZoom_NeG+z"}},4023:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return j}));var n=r(0);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i,a=["children","defaultHeight","defaultWidth","disableHeight","disableWidth","nonce","onResize","style","tagName"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}i="undefined"!=typeof window?window:"undefined"!=typeof self?self:e;var b=null,g=null,w=i.clearTimeout,_=i.setTimeout,O=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame,E=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame;function S(e){var t,r,n,o,a,c,l,u="undefined"!=typeof document&&document.attachEvent;if(!u){c=function(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,o=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,o.style.width=r.offsetWidth+1+"px",o.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},a=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},l=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;c(this),this.__resizeRAF__&&b(this.__resizeRAF__),this.__resizeRAF__=g((function(){a(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(r){r.call(t,e)})))}))}};var s=!1,f="";n="animationstart";var d="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(s=!0),!1===s)for(var h=0;h<d.length;h++)if(void 0!==m.style[d[h]+"AnimationName"]){f="-"+d[h].toLowerCase()+"-",n=p[h],s=!0;break}t="@"+f+"keyframes "+(r="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",o=f+"animation: 1ms "+r+"; "}return{addResizeListener:function(a,s){if(u)a.attachEvent("onresize",s);else{if(!a.__resizeTriggers__){var f=a.ownerDocument,d=i.getComputedStyle(a);d&&"static"===d.position&&(a.style.position="relative"),function(r){if(!r.getElementById("detectElementResize")){var n=(t||"")+".resize-triggers { "+(o||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',i=r.head||r.getElementsByTagName("head")[0],a=r.createElement("style");a.id="detectElementResize",a.type="text/css",null!=e&&a.setAttribute("nonce",e),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(r.createTextNode(n)),i.appendChild(a)}}(f),a.__resizeLast__={},a.__resizeListeners__=[],(a.__resizeTriggers__=f.createElement("div")).className="resize-triggers";var p=f.createElement("div");p.className="expand-trigger",p.appendChild(f.createElement("div"));var m=f.createElement("div");m.className="contract-trigger",a.__resizeTriggers__.appendChild(p),a.__resizeTriggers__.appendChild(m),a.appendChild(a.__resizeTriggers__),c(a),a.addEventListener("scroll",l,!0),n&&(a.__resizeTriggers__.__animationListener__=function(e){e.animationName===r&&c(a)},a.__resizeTriggers__.addEventListener(n,a.__resizeTriggers__.__animationListener__))}a.__resizeListeners__.push(s)}},removeResizeListener:function(e,t){if(u)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",l,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}null==O||null==E?(b=w,g=function(e){return _(e,20)}):(b=function(e){var t=v(e,2),r=t[0],n=t[1];O(r),w(n)},g=function(e){var t=E((function(){w(r),e()})),r=_((function(){O(t),e()}),20);return[t,r]});var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(c,e);var t,r,o,i=m(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r))).state={height:e.props.defaultHeight||0,scaledHeight:e.props.defaultHeight||0,scaledWidth:e.props.defaultWidth||0,width:e.props.defaultWidth||0},e._autoSizer=null,e._detectElementResize=null,e._parentNode=null,e._resizeObserver=null,e._timeoutId=null,e._onResize=function(){e._timeoutId=null;var t=e.props,r=t.disableHeight,n=t.disableWidth,o=t.onResize;if(e._parentNode){var i,a,c,l,u=window.getComputedStyle(e._parentNode)||{},s=parseFloat(null!==(i=u.paddingLeft)&&void 0!==i?i:"0"),f=parseFloat(null!==(a=u.paddingRight)&&void 0!==a?a:"0"),d=parseFloat(null!==(c=u.paddingTop)&&void 0!==c?c:"0"),p=parseFloat(null!==(l=u.paddingBottom)&&void 0!==l?l:"0"),m=e._parentNode.getBoundingClientRect(),h=m.height-d-p,v=m.width-s-f,y=e._parentNode.offsetHeight-d-p,b=e._parentNode.offsetWidth-s-f;(r||e.state.height===y&&e.state.scaledHeight===h)&&(n||e.state.width===b&&e.state.scaledWidth===v)||(e.setState({height:y,width:b,scaledHeight:h,scaledWidth:v}),"function"==typeof o&&o({height:y,scaledHeight:h,scaledWidth:v,width:b}))}},e._setRef=function(t){e._autoSizer=t},e}return t=c,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,null!=this._parentNode&&("undefined"!=typeof ResizeObserver?(this._resizeObserver=new ResizeObserver((function(){e._timeoutId=setTimeout(e._onResize,0)})),this._resizeObserver.observe(this._parentNode)):(this._detectElementResize=S(t),this._detectElementResize.addResizeListener(this._parentNode,this._onResize)),this._onResize()))}},{key:"componentWillUnmount",value:function(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),null!==this._timeoutId&&clearTimeout(this._timeoutId),this._resizeObserver&&(this._resizeObserver.observe(this._parentNode),this._resizeObserver.disconnect()))}},{key:"render",value:function(){var e=this.props,t=e.children,r=(e.defaultHeight,e.defaultWidth,e.disableHeight),o=void 0!==r&&r,i=e.disableWidth,c=void 0!==i&&i,u=(e.nonce,e.onResize,e.style),f=void 0===u?{}:u,d=e.tagName,p=void 0===d?"div":d,m=s(e,a),h=this.state,v=h.height,y=h.scaledHeight,b=h.scaledWidth,g=h.width,w={overflow:"visible"},_={},O=!1;return o||(0===v&&(O=!0),w.height=0,_.height=v,_.scaledHeight=y),c||(0===g&&(O=!0),w.width=0,_.width=g,_.scaledWidth=b),Object(n.createElement)(p,l({ref:this._setRef,style:l(l({},w),f)},m),!O&&t(_))}}])&&f(t.prototype,r),o&&f(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Component)}).call(this,r(150))},4027:function(e,t,r){"use strict";r.d(t,"a",(function(){return Ye})),r.d(t,"d",(function(){return pt})),r.d(t,"c",(function(){return Le})),r.d(t,"b",(function(){return We}));var n=r(0),o=r.n(n),i=r(39),a=r.n(i),c=r(4023),l=r(634),u=r(4007),s=r(4125);function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e,t){return e===t||e.length===t.length&&e.every((function(e,r){return e===t[r]}))},m=function(e,t){return p(h(e),h(t))},h=function(e){return e.slice(0,e.length-1)},v=function(e,t){return p(e,h(t))},y=function(e){return e[e.length-1]},b=function(e,t){return e.slice(0,t)},g=function(e,t){var r=f(e);return w(r,t)||(r[r.length-1]+=1),r},w=function(e,t){return m(e,t)&&y(e)>y(t)};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.items[e.rootId]?e.items[e.rootId].children.reduce((function(r,n,o){var i=e.items[n],a=[].concat(j(t),[o]),c=function(e,t){return{item:e,path:t}}(i,a),l=C(e,i,a);return[].concat(j(r),[c],j(l))}),[]):[]};function C(e,t,r){return t.isExpanded?k({rootId:t.id,items:e.items},r):[]}var I=function(e,t,r){var n=e.items[t];return n?{rootId:e.rootId,items:E(E({},e.items),{},S({},t,E(E({},n),r)))}:e},A=function(e,t){var r,n=e.items[e.rootId],o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=x(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n=e.items[n.children[i]]}}catch(e){o.e(e)}finally{o.f()}return n},D=function(e,t){var r=function(e,t){var r=h(t);return A(e,r)}(e,t),n=y(t);return{parentId:r.id,index:n}},T=function(e,t,r){var n=function(e,t){var r=e.items[t.parentId],n=j(r.children),o=n.splice(t.index,1)[0];return{tree:I(e,t.parentId,{children:n,hasChildren:n.length>0,isExpanded:n.length>0&&r.isExpanded}),itemRemoved:o}}(e,t);return function(e,t,r){var n=e.items[t.parentId],o=j(n.children);return void 0===t.index?(function(e){return!!e.hasChildren&&e.children.length>0}(n)||function(e){return!e.hasChildren}(n))&&o.push(r):o.splice(t.index,0,r),I(e,t.parentId,{children:o,hasChildren:!0})}(n.tree,r,n.itemRemoved)},L=function(){},N=function(e,t,r){return Math.min(t,Math.max(e,r))},R=function(e,t){return e[t].path},M=function(e,t,r,n){var o,i,a=r>t,c=R(e,t),l=r===t,u=a?e[r].path:e[r-1]&&e[r-1].path,s=a||l?e[r+1]&&e[r+1].path:e[r].path;if(l){var f=c.length-1,d=f+n+1<=0?1:f+n+1;if(!u)return c;var p=s?s.length:1,h=Math.max(c.length,u.length),y=N(p,h,d);if(y===c.length)return c;var w=b(u,y);return g(w,c)}if(s&&(o=s,!(i=u)||v(i,o)))return s;if(u&&s&&m(u,s))return a&&m(u,c)?u:s;if(u){var _=a?u.length+n:s.length+n,O=s?s.length:1,E=N(O,u.length,_),S=b(u,E);return g(S,c)}return c};function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==B(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===B(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=function(e,t,r){var n=r.source,o=r.destination,i=r.combine,a=r.placeholderIndicatorProps,c=R(t,n.index),l=D(e,c);if(i)return{sourcePosition:l,destinationPosition:{parentId:i.draggableId}};if(!o)return{sourcePosition:l,destinationPosition:void 0};var u=M(t,n.index,o.index,a?a.dragOffset:0),s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},D(e,u));return{sourcePosition:l,destinationPosition:s}};function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return(t=K(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K(n.key),n)}}function K(e){var t=function(e,t){if("object"!==z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===z(t)?t:String(t)}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=X(e);if(t){var o=X(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(i,e);var t,r,n,o=Q(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).patchDraggableProps=function(t,r){var n=t.style&&t.style.transition?[t.style.transition]:[];r.dropAnimation;var o=n.join(", ");return H(H({},t),{},{style:H(H(H({},t.style),e.props.style),{},{transition:o})})},e}return t=i,(r=[{key:"shouldComponentUpdate",value:function(e){return t=this.props,r=e,!(void 0===["item","provided","snapshot","onCollapse","onExpand","destination","placeholderIndicatorProps","placeholderDraggableId"].find((function(e){return t[e]!==r[e]}))&&p(this.props.path,e.path)&&null!==this.props.provided.dragHandleProps);var t,r}},{key:"render",value:function(){var e=this.props,t=e.item,r=e.path,n=e.onExpand,o=e.onCollapse,i=e.renderItem,a=e.provided,c=e.snapshot,l=e.placeholderDraggableId,u=e.placeholderIndicatorProps,s=e.offsetPerLevel,f={draggableProps:this.patchDraggableProps(a.draggableProps,c),dragHandleProps:a.dragHandleProps,innerRef:function(e){a.innerRef(e)}};return i({item:t,path:r,depth:r.length-1,onExpand:function(e){return n(e,r)},onCollapse:function(e){return o(e,r)},offsetPerLevel:s,provided:f,snapshot:c,placeholderDraggableId:l,placeholderIndicatorProps:u})}}])&&q(t.prototype,r),n&&q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.Component);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Z(i)?i:String(i)),n)}var o,i}var ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.delay=void 0,this.timeoutId=void 0,this.fn=void 0,this.delay=t}var t,r,n;return t=e,(r=[{key:"start",value:function(e){this.stop(),this.timeoutId=window.setTimeout(e,this.delay)}},{key:"stop",value:function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}}])&&$(t.prototype,r),n&&$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}var re=["style","children"];function ne(){ne=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,o){var i=new RegExp(e,n);return t.set(i,o||t.get(e)),ae(i,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var o=n[r];if("number"==typeof o)t[r]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[r]=e[o[i]]}return t}),Object.create(null))}return ie(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=n(r,this);var o=r.indices;o&&(o.groups=n(o,this))}return r},r.prototype[Symbol.replace]=function(r,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,r,o.replace(/\$<([^>]+)>/g,(function(e,t){var r=i[t];return"$"+(Array.isArray(r)?r.join("$"):r)})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=te(e[e.length-1])&&(e=[].slice.call(e)).push(n(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,r,o)},ne.apply(this,arguments)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,de(n.key),n)}}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ae(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=le(e);if(t){var o=le(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e,t,r){return(t=de(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e){var t=function(e,t){if("object"!==te(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===te(t)?t:String(t)}function pe(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var me=o.a.createContext({collapseHeight:0}),he=Object(n.forwardRef)((function(e,t){var r=e.style,i=e.children,a=pe(e,re),c=Object(n.useContext)(me).collapseHeight;return o.a.createElement("div",se({ref:t,style:se(se({},r),{},{height:"".concat(parseFloat(r.height)+c,"px")})},a),i)})),ve=o.a.memo((function(e){var t=e.data,r=e.index,n=e.style,i=t.isDragEnabled,a=t.listData[r];if(!a)return null;var c=function(e){var r=e.item,i=e.path,a=e.provided,c=e.snapshot,l=t.renderItem,u=t.onExpand,s=t.onCollapse,f=t.offsetPerLevel,d=t.placeholderDraggableId,p=t.placeholderIndicatorProps;return o.a.createElement(J,{key:r.item.id,item:r.item,path:i,onExpand:u,onCollapse:s,renderItem:l,provided:a,snapshot:c,offsetPerLevel:f,style:n,placeholderDraggableId:d,placeholderIndicatorProps:p})};if(!1===i)return c({item:a,path:a.path,provided:{draggableProps:{"data-rbd-draggable-context-id":"","data-rbd-draggable-id":""},innerRef:function(){},dragHandleProps:null},snapshot:{isDragging:!1,isDropAnimating:!1}});var l,s="function"==typeof i?!i(a.item):!i;return o.a.createElement(u.b,{key:a.item.id,draggableId:a.item.id.toString(),index:r,isDragDisabled:s},(l=a,function(e,r){var n=a.path;return r.isDropAnimating&&t.onDropAnimating(),c({item:l,path:n,provided:e,snapshot:r})}))}),s.c);ve.displayName="Row",ve.type.displayName="RowMemo";var ye=Object(l.a)((function(e,t){return function(e,t,r){return t.reduce((function(t,n){var o=e.items[n];return o?(t.items[n]=E(E({},o),r),t):t}),{rootId:e.rootId,items:E({},e.items)})}(e,t,{isExpanded:!0})})),be=Object(l.a)((function(e,t){return t&&e.items[t].isExpanded?I(e,t,{isExpanded:!1}):e})),ge=Object(l.a)(k),we=function(e){ie(a,e);var t,r,n,i=ce(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r))).state={flattenedTree:[],draggedItemId:void 0,placeholderIndicatorProps:void 0,placeholderDraggableId:void 0,collapseHeight:0},e.dragState=void 0,e.virtualListRef=o.a.createRef(),e.expandTimer=new ee(500),e.onDragStart=function(t){var r=e.props.onDragStart;e.dragState={source:t.source,destination:t.source,mode:t.mode,cloneMove:{x:0,y:0}};var n=e.state.flattenedTree[e.dragState.destination.index-1];e.setState({draggedItemId:t.draggableId}),e.dragState=se(se({},e.dragState),{},{placeholderDraggableId:n?n.item.id:void 0}),r&&r(t.draggableId)},e.onDragUpdate=function(t){if(e.dragState&&(0!==e.dragState.cloneMove.x||0!==e.dragState.cloneMove.y)){var r=e.state.flattenedTree;if(t.destination){var n=r[t.destination.index>t.source.index?t.destination.index:t.destination.index-1];e.dragState=se(se({},e.dragState),{},{placeholderDraggableId:n?n.item.id:void 0})}if(e.expandTimer.stop(),t.combine){var o=function(e,t){return e.find((function(e){return e.item.id===t}))}(r,t.combine.draggableId);o&&e.isExpandable(o)}e.dragState=se(se({},e.dragState),{},{destination:t.destination,combine:t.combine})}},e.onDropAnimating=function(){e.expandTimer.stop()},e.onDragEnd=function(t){var r=e.props,n=r.onDragEnd,o=r.tree,i=e.state.flattenedTree;e.expandTimer.stop();var a=se(se({},e.dragState),{},{source:t.source,destination:t.destination,combine:t.combine});e.setState({draggedItemId:void 0,collapseHeight:0,placeholderIndicatorProps:void 0});var c=W(o,i,a);n(c.sourcePosition,c.destinationPosition),e.dragState=void 0},e.getDroppedLevelOffset=function(t){var r=e.props.offsetPerLevel,n=Math.abs(t);if(!e.dragState||0===t)return 0;var o=Math.floor((n+r/2)/r);return t>0?o:t<0?-o:void 0},e.isExpandable=function(e){return!!e.item.hasChildren&&!e.item.isExpanded},e.patchDroppableProvided=function(e){return se(se({},e),{},{innerRef:function(t){e.innerRef(t)}})},e.renderItem=function(t,r,n){var i=e.props.isDragEnabled;if(!1===i)return e.renderTreeItem({flatItem:t,path:t.path,provided:{draggableProps:{"data-rbd-draggable-context-id":"","data-rbd-draggable-id":""},innerRef:function(){},dragHandleProps:null},snapshot:{isDragging:!1,isDropAnimating:!1},style:n});var a="function"==typeof i?!i(t.item):!i;return o.a.createElement(u.b,{key:t.item.id,draggableId:t.item.id.toString(),index:r,isDragDisabled:a},e.renderDraggableItem(t,n))},e.renderDraggableItem=function(t,r){return function(n,o){var i=t.path;return o.isDropAnimating&&e.onDropAnimating(),e.renderTreeItem({flatItem:t,path:i,provided:n,snapshot:o,style:r})}},e.renderTreeItem=function(t){var r=t.flatItem,n=t.path,i=t.provided,a=t.snapshot,c=t.style,l=e.props,u=l.renderItem,s=l.onExpand,f=l.onCollapse,d=l.offsetPerLevel;return o.a.createElement(J,{key:r.item.id,item:r.item,path:n,onExpand:s,onCollapse:f,renderItem:u,provided:i,snapshot:a,offsetPerLevel:d,style:c})},e.sensor=null,e.scrollableElement=null,e.scrollToItem=function(t,r){var n=e.state.flattenedTree.findIndex((function(e){return e.item.id===t}));if("center"===r){var o=n<3?0:n-3;e.virtualListRef.current.scrollToItem(o,"start")}else e.virtualListRef.current.scrollToItem(n,r)},e}return t=a,n=[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.draggedItemId,n=e.tree,o=ye(n,e.expandedKeys),i=be(o,r),a=ge(i),c=r&&a.length-t.flattenedTree.length<0?t.flattenedTree.length-a.length:0;return se(se({},t),{},{flattenedTree:a,collapseHeight:c*e.itemSize})}}],(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.isDragEnabled,n=t.renderItem,i=t.onExpand,a=t.onCollapse,c=t.offsetPerLevel,l=t.isNestingEnabled,f=t.outerElementType,d=t.onScroll,p=t.virtualListStyle,m=t.virtualHeight,h=t.virtualWidth,v=t.itemSize,y=this.state,b=y.flattenedTree,g=y.placeholderIndicatorProps,w=y.placeholderDraggableId;return o.a.createElement(u.a,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDragUpdate:this.onDragUpdate,enableDefaultSensors:!1,sensors:[u.d,u.e,function(t){e.sensor=t}]},o.a.createElement(u.c,{droppableId:"tree",isCombineEnabled:l,ignoreContainerClipping:!0,mode:"virtual",renderClone:function(t,r,n){if(r.isDragging&&!r.isDropAnimating){var o=t.draggableProps.style.transform?t.draggableProps.style.transform.match(ne(/\(((.+)px, (.+)px)\)/,{cloneMoveX:2,cloneMoveY:3})).groups:{cloneMoveX:0,cloneMoveY:0},i=o.cloneMoveX,a=o.cloneMoveY;i=Number(i);var c=e.state.flattenedTree.find((function(e){return e.item.id===n.draggableId})).path.length-1,l=e.getDroppedLevelOffset(i);a=Number(a),e.dragState&&(e.dragState=se(se({},e.dragState),{},{cloneMove:{x:i,y:a},placeholderIndicatorProps:{dragOffset:l,currentDepth:c}}))}return e.props.renderClone(t,r,n,b,e.dragState)}},(function(t){return o.a.createElement(me.Provider,{value:{collapseHeight:e.state.collapseHeight}},o.a.createElement(s.b,{ref:e.virtualListRef,className:"lark-virtual-tree",style:p,width:h,height:m,itemCount:b.length,itemSize:v,outerRef:function(r){t.innerRef(r),e.scrollableElement=r},itemData:{listData:b,onDropAnimating:e.onDropAnimating,isDragEnabled:r,renderItem:n,onExpand:i,onCollapse:a,offsetPerLevel:c,placeholderIndicatorProps:g,placeholderDraggableId:w},innerElementType:he,outerElementType:f,onScroll:d},ve))})))}}])&&oe(t.prototype,r),n&&oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Component);we.defaultProps={tree:{children:[]},onExpand:L,onCollapse:L,onDragStart:L,onDragEnd:L,renderItem:L,offsetPerLevel:20,isDragEnabled:!1,isNestingEnabled:!1,expandedKeys:[]};var _e=r(4085),Oe="indicatorWrapper-module_IndicatorWrapper_RIDo1",Ee="indicatorWrapper-module_PrefixOffsetIndent_2zOMI",Se="indicatorWrapper-module_Indicator_+EmfH",je="indicatorWrapper-module_IndicatorLine_wUn2a";function xe(e){var t=new Array(e.prefixOffsetDepth<0?0:e.prefixOffsetDepth).fill(null).map((function(t,r){return{style:{left:(r+1)*-e.offsetPerLevel},id:r+1}}));return o.a.createElement("div",{className:Oe,style:e.style},t.map((function(e){return o.a.createElement("div",{className:Ee,key:e.id,style:e.style})})),o.a.createElement("div",{className:Se},o.a.createElement("div",{className:je})))}var Pe=r(633),ke=r(541);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ie(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){if(e){if("string"==typeof e)return De(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?De(e,t):void 0}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Te(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ce(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ce(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(){}function Ne(e,t,r){return e.forEach((function(e){var n,o=(null===(n=e.children)||void 0===n?void 0:n.map((function(e){return e.uuid})))||[];t[e.uuid]={id:e.uuid,parentId:r,children:o,hasChildren:!!o.length,isExpanded:!1,data:e},e.children&&Ne(e.children,t,e.uuid)})),t}var Re="VIRTUAL_ROOT";function Me(e){var t=Object(Pe.generateTreeByTocItems)(e),r={id:Re,children:t.map((function(e){return e.uuid})),hasChildren:!!t.length,isExpanded:!1,isChildrenLoading:!1,data:{},parentId:Re},n=Te({},Re,r);return Ne(t,n,Re),{rootId:Re,items:n}}function Be(e,t){var r=e.items[t];if(!r)return[];for(var n=[];r.parentId!==Re;)n.push(r.parentId),r=e.items[r.parentId];return n}function Fe(e,t){var r=[];if(t){!function t(n){if(n){var o=function(t){return e.find((function(e){return e.uuid===t.parent_uuid}))}(n);o&&(r.push(o.uuid),o.level>0&&t(o))}}(e.find((function(e){return e.uuid===t})))}return r}function Ge(e,t,r){var n,o="all"===(n=t)?1/0:n?parseInt(n,10)+1:ke.DEFAULT_DISPLAY_LEVEL;if(o===1/0)return e.map((function(e){return e.uuid}));var i,a,c=[],l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ae(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e);try{for(l.s();!(i=l.n()).done;){var u=i.value;u.level<o-1&&c.push(u.uuid)}}catch(e){l.e(e)}finally{l.f()}r&&r.length&&((a=c).push.apply(a,Ie(r)),c=r.reduce((function(t,r){var n=Fe(e,r);return t.push.apply(t,Ie(n)),t}),c));return Ie(new Set(c))}var We=function(e,t,r){var n;if(null!==(n=window.appData)&&void 0!==n&&n.sharePage){var o,i,a,c=(null===(o=window.appData)||void 0===o||null===(i=o.share)||void 0===i?void 0:i.token)||(null===(a=t.share)||void 0===a?void 0:a.token);return"/books/share/".concat(c,"/").concat(r)}return"/".concat(e.login,"/").concat(t.slug,"/").concat(r)};function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){Ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ze(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ze(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ye=Object(n.forwardRef)((function(e,t){var r=e.tree,i=e.expandedKeys,l=e.isDragEnabled,u=e.onDragStart,s=e.onDragEnd,f=e.renderItem,d=e.bottomNode,p=e.itemSize,m=e.getIndicatorWrapperLeft,h=e.offsetPerLevel,v=Object(n.useContext)(_e.a),y=Object(n.useRef)(null),b=Object(n.useRef)(0),g=qe(Object(n.useState)(null),2),w=g[0],_=g[1];function O(e){var t=e.virtualWidth,n=e.virtualHeight,c=e.virtualContainerStyle,d=e.isScrollingRef;return o.a.createElement(o.a.Fragment,null,o.a.createElement(we,{ref:function(e){if(y.current=e,v){var t,r,n=v.virtualComponentRef,o=v.virtualContainerRef;n.current=null===(t=y.current)||void 0===t?void 0:t.virtualListRef.current,o.current=null===(r=y.current)||void 0===r?void 0:r.scrollableElement}},tree:r,virtualListStyle:c,virtualWidth:t,virtualHeight:n,isNestingEnabled:!0,isDragEnabled:l,expandedKeys:i,itemSize:p,offsetPerLevel:h,renderItem:function(e){var t=He(He({},e),{},{isClone:!1,isScrolling:(null==d?void 0:d.current)||void 0});return f(t)},renderClone:function(e,r,n,i,c){var l=i.find((function(e){return e.item.id===n.draggableId})),u=l.item,s=l.path.length-1,d=null;if(r.isDragging&&!r.isDropAnimating&&!r.combineWith&&r.draggingOver&&c&&c.destination){var p,v=c.placeholderDraggableId,y=c.destination,g=c.source,w=i[y.index],_=document.querySelector('[data-rbd-drag-handle-draggable-id="'.concat(v,'"]'));if(!w)return null;var O=w.path.length-1,E=i[y.index-1],S=E?E.path.length-1:0,j=i[y.index+1],x=j?j.path.length-1:0,P=M(i,g.index,y.index,(null==c||null===(p=c.placeholderIndicatorProps)||void 0===p?void 0:p.dragOffset)||0),k=M(i,g.index,y.index,-Math.max(O,x,S)).length-1,C=P.length-w.path.length,I=m?m(O+C):0,A=t-I;b.current=(P.length-l.path.length)*h;var D=O+C-k;d=o.a.createElement(xe,{style:{left:I,width:A},prefixOffsetDepth:D,offsetPerLevel:h}),d=_?a.a.createPortal(d,_):null}var T=e.draggableProps.style;if(r.isDropAnimating&&r.dropAnimation){var L=r.dropAnimation.moveTo,N="translate(".concat(b.current||L.x,"px, ").concat(L.y,"px)");b.current=0,T=He(He({},T),{},{transform:"".concat(N)})}e.draggableProps.style=T;var R={provided:e,snapshot:r,isClone:!0,item:u,depth:s,path:[],offsetPerLevel:h,onCollapse:Le,onExpand:Le};return o.a.createElement(o.a.Fragment,null,f(R),d)},onDragEnd:s,onDragStart:u,onScroll:null==v?void 0:v.onScroll}),w)}return Object(n.useImperativeHandle)(t,(function(){return{scrollToItem:function(e,t){var r;null===(r=y.current)||void 0===r||r.scrollToItem(e,t)}}})),Object(n.useEffect)((function(){l&&setTimeout((function(){var e,t=null!==(e=y.current)&&void 0!==e&&e.scrollableElement?a.a.createPortal(d,y.current.scrollableElement):null;_(t)}))}),[]),v?O({virtualWidth:v.virtualWidth,virtualHeight:v.virtualHeight,virtualContainerStyle:v.virtualContainerStyle,isScrollingRef:v.isScrollingRef}):o.a.createElement(c.a,null,(function(e){var t=e.height;return O({virtualWidth:e.width,virtualHeight:t})}))})),Qe=r(3810),Xe=r(3169);function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ze(){Ze=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(x([])));y&&y!==t&&r.call(y,i)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Je(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function $e(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function et(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){$e(i,n,o,a,c,"next",e)}function c(e){$e(i,n,o,a,c,"throw",e)}a(void 0)}))}}var tt=function(){var e=et(Ze().mark((function e(t,r,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe.a.updateNode(t,{node_uuid:r,action:ke.ACTIONS.moveAfter,target_uuid:n},{catalog_tree:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),rt=function(){var e=et(Ze().mark((function e(t,r,n){return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe.a.updateNode(t,{node_uuid:r,action:ke.ACTIONS.prependChild,target_uuid:n},{catalog_tree:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function ot(){ot=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(x([])));y&&y!==t&&r.call(y,i)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==nt(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function it(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function at(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ft(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ut(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==nt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||ft(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){if(e){if("string"==typeof e)return dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dt(e,t):void 0}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pt(e){var t=e.book,r=e.currentDocSlug,o=st(Object(n.useState)(Me([])),2),i=o[0],a=o[1],c=Object(n.useRef)(null),l=Object(n.useMemo)((function(){var e=t.toc.find((function(e){return e.url===r}));return null==e?void 0:e.uuid}),[t.toc,r]),u=st(Object(n.useState)(Ge(t.toc,t.catalog_display_level,l?[l]:[])),2),s=u[0],f=u[1],d=Object(Qe.a)(l),p=Object(Qe.a)(t.catalog_display_level),m=Object(n.useCallback)((function(e){return i.items[e]}),[i]),h=Object(n.useCallback)((function(e,t){var r=i.items[e];a(I(i,e,{data:lt(lt({},r.data),t)}))}),[i]),v=Object(n.useCallback)((function(e){var t=i.items[e],r=i.items[i.items[e].parentId],n=I(i,t.parentId,lt(lt({},r),{},{children:r.children.filter((function(t){return t!==e}))}));delete n[e],a(n)}),[i]),y=Object(n.useCallback)((function(e,t){if(!(e.parentId===t.parentId&&e.index===t.index)){t.index=void 0===t.index?0:t.index;var r=T(i,e,t);a(r),f(at(new Set([].concat(at(s),[t.parentId],at(Be(i,t.parentId))))))}}),[i,s]),b=Object(n.useCallback)((function(e){console.log("🚀 ~ file: hooks.tsx:80 ~ addExpandedKey ~ itemId:",e),f(at(new Set([].concat(at(s),[e]))))}),[s]),g=Object(n.useCallback)((function(e){i.items[e].hasChildren&&f(at(new Set([].concat(at(s),[e]))))}),[i,s]),w=Object(n.useCallback)((function(e){i.items[e].hasChildren&&f(at(new Set(s.filter((function(t){return t!==e})))))}),[i,s]),_=Object(n.useCallback)((function(e){s.includes(e)?w(e):g(e)}),[s,w,g]),O=Object(n.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";f(at(new Set([].concat(at(s),at(Be(i,e))))));var r=setTimeout((function(){var n;null===(n=c.current)||void 0===n||n.scrollToItem(e,t),clearTimeout(r)}))}),[i,s]),E=Object(n.useCallback)((function(){var e=t.toc.find((function(e){return e.url===r}));e&&O(e.uuid,"center")}),[r,t.toc]),S=Object(n.useCallback)((function(){if(t.toc.length>0){var e=t.toc[0];O(e.uuid,"start")}}),[t.toc]),j=Object(n.useCallback)((function(){f([])}),[]),x=Object(n.useCallback)((function(){var e=Ge(t.toc,"all",l?[l]:[]);f(e)}),[t.toc,l]),P=Object(n.useCallback)(function(){var e,r=(e=ot().mark((function e(r,n){var o,i,a,c,l,u,s,f,d;return ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&(!n||n.parentId!==r.parentId||n.index!==r.index)){e.next=2;break}return e.abrupt("return");case 2:if(y(r,n),o=m(r.parentId).children[r.index],i=m(o),a=m(n.parentId),c=a.children.filter((function(e){return e!==i.data.uuid})),l=c[n.index-1],u=m(l),e.prev=9,s=[],!u){e.next=18;break}return e.next=14,tt(t,i.data.uuid,u.data.uuid);case 14:f=e.sent,s=f.toc,e.next=23;break;case 18:if(!a){e.next=23;break}return e.next=21,rt(t,i.data.uuid,a.data.uuid);case 21:d=e.sent,s=d.toc;case 23:return e.abrupt("return",s);case 26:throw e.prev=26,e.t0=e.catch(9),n.index=n.index||0,y(n,r),e.t0;case 31:case"end":return e.stop()}}),e,null,[[9,26]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){it(i,n,o,a,c,"next",e)}function c(e){it(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),[m,y]);return Object(n.useEffect)((function(){var e=Me(t.toc);a(e)}),[t.toc]),Object(n.useEffect)((function(){if(d&&l&&d!==l){var e=function(e,t,r){return r.reduce((function(t,r){var n=Fe(e,r);return t.push.apply(t,Ie(n)),t}),Ie(t))}(t.toc,s,l?[l]:[]),r=at(new Set([].concat(at(s),at(e))));f(r)}}),[s,t.toc,d,l]),Object(n.useEffect)((function(){if(p&&p!==t.catalog_display_level){var e=Ge(t.toc,t.catalog_display_level,[]);f(e)}}),[t.catalog_display_level,t.toc,l,s]),{tree:i,currentDocSlug:r,treeRef:c,expandedKeys:s,handleToggleCollapse:_,getTreeItem:m,updateTreeItem:h,deleteTreeItem:v,moveTreeItem:y,scrollToItem:O,scrollToCurrentItem:E,scrollToTop:S,addExpandedKey:b,foldAll:j,unFoldAll:x,handleInternalDragEnd:P}}},4085:function(e,t,r){"use strict";r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return u}));var n=r(0),o=r.n(n),i=r(120),a=r.n(i),c=r(43),l=r.n(c),u=Object(n.createContext)(null);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e,t,r){return r?"x"===t?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0:"x"===t?e.scrollLeft||0:e.scrollTop||0},p=function(e,t){return t?window:e.current};function m(e){var t=e.useFullScreenMode,r=void 0===t||t,i=e.useScrolling,c=void 0!==i&&i,f=e.gridLayout,m=void 0!==f&&f,h=e.style,v=e.virtualWidth,y=e.virtualHeight,b=e.virtualContainerStyle,g=e.children,w=Object(n.useRef)(),_=Object(n.useRef)(),O=Object(n.useRef)(),E=Object(n.useRef)(!1),S=s(Object(n.useReducer)((function(e){return e+1}),0),2)[1],j=Object(n.useCallback)((function(){var e=O.current,t=p(w,r),n=_.current;if(e&&t&&n){var o=e.getBoundingClientRect(),i=o.top,a=void 0===i?0:i,c=o.left,l=void 0===c?0:c,u=a>=0?0:-a,s=d(t,"x",r)-l;m?n.scrollTo({scrollLeft:s,scrollTop:u}):n.scrollTo(u)}}),[m,r]);Object(n.useEffect)((function(){var e=l()((function(){E.current=!1,S()}),150),t=a()((function(){c&&(E.current=!0,e()),j()}),10),n=p(w,r);return null==n||n.addEventListener("scroll",t),function(){null==n||n.removeEventListener("scroll",t),t.cancel(),e.cancel()}}),[S,m,r,c,j]);var x=function(e){if(e.scrollUpdateWasRequested){var t=O.current;if(t){var n=p(w,r);if(m){var o=e.scrollLeft,i=e.scrollTop;if(o>0||i>0){var a=d(n,"x",r),c=d(n,"y",r),l=t.getBoundingClientRect(),u=l.top,s=void 0===u?0:u,f=l.left,h={top:s,left:void 0===f?0:f},v=h.top>0?h.top+i:c,y=h.left>0?h.left+a:a;v===c&&y===a||n.scrollTo(y,v)}}else{var b=e.scrollOffset;if(b>0){var g=d(n,"y",r),_=t.getBoundingClientRect(),E=_.top,S=void 0===E?0:E,x=_.left,P={top:S,left:void 0===x?0:x},k=P.top>0?P.top+b:g;g!==k&&n.scrollTo(0,k)}}}}else j()};return o.a.createElement(u.Provider,{value:{virtualComponentRef:_,virtualContainerRef:O,onScroll:x,virtualWidth:v,virtualHeight:y,virtualContainerStyle:b,isScrollingRef:E}},r?g({virtualComponentRef:_,virtualContainerRef:O,onScroll:x,virtualWidth:v,virtualHeight:y,virtualContainerStyle:b,isScrollingRef:E}):o.a.createElement("div",{ref:w,style:h},g({virtualComponentRef:_,virtualContainerRef:O,onScroll:x,virtualWidth:v,virtualHeight:y,virtualContainerStyle:b,isScrollingRef:E})))}},4110:function(e,t,r){"use strict";r(84);var n=r(45),o=r(0),i=r.n(o),a=r(41),c=r(75),l=r(32),u=r(58),s=r(248),f="BookStatisticsLimit-module_wrapper_CrRJ2",d="BookStatisticsLimit-module_content_akwox",p="BookStatisticsLimit-module_title_ejahI",m="BookStatisticsLimit-module_desc_c-ita",h="BookStatisticsLimit-module_img_Thh7u";function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(){y=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,i)&&(h=g);var w=m.prototype=d.prototype=Object.create(h);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==v(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),l(O.prototype,a,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(w),l(w,c,"Generator"),l(w,i,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function b(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}t.a={hasAbility:function(){return Object(s.getInterest)().interests[u.INTEREST_CODE.book_statistics]},showMemberIntro:function(){var e,t,r,o,s,v,g=null===(e=window)||void 0===e?void 0:e.appData,w=g.organization,_=g.group,O=g.me,E=null==w?void 0:w.id,S=null==w||null===(t=w.abilities)||void 0===t?void 0:t.destroy,j={collab:{title:__("你正在协作的知识库无此权限"),btnText:__("知道了"),btnAction:function(){}},member:{title:__("购买会员可享知识库统计功能"),desc:__("购买会员可查看知识库的详细统计，如文档数、点赞数、知识库各文档的阅读点赞数等。"),btnText:__("购买会员"),btnAction:function(){var e;return null===(e=window.__member_message_ref)||void 0===e?void 0:e.current.showMemberIntro(l.LIMIT_SCENE.book_statistics)}},organization:{title:__("专业版、旗舰版空间专属功能"),desc:__("知识库统计可以查看知识库内容数据统计和阅读、点赞、评论等访问数据统计。"),btnText:S?a.a.getPaymentActionGuide(null==w?void 0:w.payment_type):__("我知道了"),btnAction:function(){return S&&window.open("/r/organizations/dashboard/cashier?action=buy&paySource=".concat(l.LIMIT_SCENE.book_statistics),"","noopener,noreferrer")}}},x=_&&O&&_.id!==O.id;E?(v=j.organization,Object(c.spmClick)(l.ORG_LIMIT_SPM.pay_limit,{pay_source:u.INTEREST_CODE.book_statistics,organization_id:(null==w?void 0:w.id)||0})):v=x?j.collab:j.member,n.a.info({width:480,closable:!0,maskClosable:!0,centered:!0,className:f,content:i.a.createElement("div",null,i.a.createElement("img",{className:h,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*Wl-qQ4teHLUAAAAAAAAAAAAAARQnAQ"}),i.a.createElement("div",{className:d},i.a.createElement("p",{className:p},null===(r=v)||void 0===r?void 0:r.title),i.a.createElement("p",{className:m},null===(o=v)||void 0===o?void 0:o.desc))),okText:null===(s=v)||void 0===s?void 0:s.btnText,onOk:function(){return(e=y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=v)||void 0===t||t.btnAction();case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){b(i,n,o,a,c,"next",e)}function c(e){b(i,n,o,a,c,"throw",e)}a(void 0)}))})();var e}})}}},4121:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0),o=r(4445);function i(){var e=Object(n.useContext)(o.a);if(!e)throw new Error("Managers not found, please use ManagersProvider");return e}},4125:function(e,t,r){"use strict";r.d(t,"a",(function(){return S})),r.d(t,"b",(function(){return j})),r.d(t,"c",(function(){return C}));var n=r(19),o=r(46),i=r(898),a=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function c(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],o=t[r],!(n===o||a(n)&&a(o)))return!1;var n,o;return!0}var l=function(e,t){var r;void 0===t&&(t=c);var n,o=[],i=!1;return function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return i&&r===this&&t(a,o)||(n=e.apply(this,a),i=!0,r=this,o=a),n}},u=r(0),s=r(715),f="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function d(e){cancelAnimationFrame(e.id)}function p(e,t){var r=f();var n={id:requestAnimationFrame((function o(){f()-r>=t?e.call(null):n.id=requestAnimationFrame(o)}))};return n}var m=-1;function h(e){if(void 0===e&&(e=!1),-1===m||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),m=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return m}var v=null;function y(e){if(void 0===e&&(e=!1),null===v||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),o=n.style;return o.width="100px",o.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?v="positive-descending":(t.scrollLeft=1,v=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),v}return v}var b=function(e){var t=e.columnIndex;e.data;return e.rowIndex+":"+t};function g(e){var t,r=e.getColumnOffset,a=e.getColumnStartIndexForOffset,c=e.getColumnStopIndexForStartIndex,s=e.getColumnWidth,f=e.getEstimatedTotalHeight,m=e.getEstimatedTotalWidth,v=e.getOffsetForColumnAndAlignment,g=e.getOffsetForRowAndAlignment,_=e.getRowHeight,O=e.getRowOffset,E=e.getRowStartIndexForOffset,S=e.getRowStopIndexForStartIndex,j=e.initInstanceProps,x=e.shouldResetStyleCacheOnItemSizeChange,P=e.validateProps;return(t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=j(n.props,Object(o.a)(n)),n._resetIsScrollingTimeoutId=null,n._outerRef=void 0,n.state={instance:Object(o.a)(n),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:"number"==typeof n.props.initialScrollLeft?n.props.initialScrollLeft:0,scrollTop:"number"==typeof n.props.initialScrollTop?n.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},n._callOnItemsRendered=void 0,n._callOnItemsRendered=l((function(e,t,r,o,i,a,c,l){return n.props.onItemsRendered({overscanColumnStartIndex:e,overscanColumnStopIndex:t,overscanRowStartIndex:r,overscanRowStopIndex:o,visibleColumnStartIndex:i,visibleColumnStopIndex:a,visibleRowStartIndex:c,visibleRowStopIndex:l})})),n._callOnScroll=void 0,n._callOnScroll=l((function(e,t,r,o,i){return n.props.onScroll({horizontalScrollDirection:r,scrollLeft:e,scrollTop:t,verticalScrollDirection:o,scrollUpdateWasRequested:i})})),n._getItemStyle=void 0,n._getItemStyle=function(e,t){var o,i=n.props,a=i.columnWidth,c=i.direction,l=i.rowHeight,u=n._getItemStyleCache(x&&a,x&&c,x&&l),f=e+":"+t;if(u.hasOwnProperty(f))o=u[f];else{var d=r(n.props,t,n._instanceProps),p="rtl"===c;u[f]=o={position:"absolute",left:p?void 0:d,right:p?d:void 0,top:O(n.props,e,n._instanceProps),height:_(n.props,e,n._instanceProps),width:s(n.props,t,n._instanceProps)}}return o},n._getItemStyleCache=void 0,n._getItemStyleCache=l((function(e,t,r){return{}})),n._onScroll=function(e){var t=e.currentTarget,r=t.clientHeight,o=t.clientWidth,i=t.scrollLeft,a=t.scrollTop,c=t.scrollHeight,l=t.scrollWidth;n.setState((function(e){if(e.scrollLeft===i&&e.scrollTop===a)return null;var t=n.props.direction,u=i;if("rtl"===t)switch(y()){case"negative":u=-i;break;case"positive-descending":u=l-o-i}u=Math.max(0,Math.min(u,l-o));var s=Math.max(0,Math.min(a,c-r));return{isScrolling:!0,horizontalScrollDirection:e.scrollLeft<i?"forward":"backward",scrollLeft:u,scrollTop:s,verticalScrollDirection:e.scrollTop<a?"forward":"backward",scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&d(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=p(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1)}))},n}Object(i.a)(t,e),t.getDerivedStateFromProps=function(e,t){return w(e,t),P(e),null};var k=t.prototype;return k.scrollTo=function(e){var t=e.scrollLeft,r=e.scrollTop;void 0!==t&&(t=Math.max(0,t)),void 0!==r&&(r=Math.max(0,r)),this.setState((function(e){return void 0===t&&(t=e.scrollLeft),void 0===r&&(r=e.scrollTop),e.scrollLeft===t&&e.scrollTop===r?null:{horizontalScrollDirection:e.scrollLeft<t?"forward":"backward",scrollLeft:t,scrollTop:r,scrollUpdateWasRequested:!0,verticalScrollDirection:e.scrollTop<r?"forward":"backward"}}),this._resetIsScrollingDebounced)},k.scrollToItem=function(e){var t=e.align,r=void 0===t?"auto":t,n=e.columnIndex,o=e.rowIndex,i=this.props,a=i.columnCount,c=i.height,l=i.rowCount,u=i.width,s=this.state,d=s.scrollLeft,p=s.scrollTop,y=h();void 0!==n&&(n=Math.max(0,Math.min(n,a-1))),void 0!==o&&(o=Math.max(0,Math.min(o,l-1)));var b=f(this.props,this._instanceProps),w=m(this.props,this._instanceProps)>u?y:0,_=b>c?y:0;this.scrollTo({scrollLeft:void 0!==n?v(this.props,n,r,d,this._instanceProps,_):d,scrollTop:void 0!==o?g(this.props,o,r,p,this._instanceProps,w):p})},k.componentDidMount=function(){var e=this.props,t=e.initialScrollLeft,r=e.initialScrollTop;if(null!=this._outerRef){var n=this._outerRef;"number"==typeof t&&(n.scrollLeft=t),"number"==typeof r&&(n.scrollTop=r)}this._callPropsCallbacks()},k.componentDidUpdate=function(){var e=this.props.direction,t=this.state,r=t.scrollLeft,n=t.scrollTop;if(t.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("rtl"===e)switch(y()){case"negative":o.scrollLeft=-r;break;case"positive-ascending":o.scrollLeft=r;break;default:var i=o.clientWidth,a=o.scrollWidth;o.scrollLeft=a-i-r}else o.scrollLeft=Math.max(0,r);o.scrollTop=Math.max(0,n)}this._callPropsCallbacks()},k.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&d(this._resetIsScrollingTimeoutId)},k.render=function(){var e=this.props,t=e.children,r=e.className,o=e.columnCount,i=e.direction,a=e.height,c=e.innerRef,l=e.innerElementType,s=e.innerTagName,d=e.itemData,p=e.itemKey,h=void 0===p?b:p,v=e.outerElementType,y=e.outerTagName,g=e.rowCount,w=e.style,_=e.useIsScrolling,O=e.width,E=this.state.isScrolling,S=this._getHorizontalRangeToRender(),j=S[0],x=S[1],P=this._getVerticalRangeToRender(),k=P[0],C=P[1],I=[];if(o>0&&g)for(var A=k;A<=C;A++)for(var D=j;D<=x;D++)I.push(Object(u.createElement)(t,{columnIndex:D,data:d,isScrolling:_?E:void 0,key:h({columnIndex:D,data:d,rowIndex:A}),rowIndex:A,style:this._getItemStyle(A,D)}));var T=f(this.props,this._instanceProps),L=m(this.props,this._instanceProps);return Object(u.createElement)(v||y||"div",{className:r,onScroll:this._onScroll,ref:this._outerRefSetter,style:Object(n.default)({position:"relative",height:a,width:O,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:i},w)},Object(u.createElement)(l||s||"div",{children:I,ref:c,style:{height:T,pointerEvents:E?"none":void 0,width:L}}))},k._callPropsCallbacks=function(){var e=this.props,t=e.columnCount,r=e.onItemsRendered,n=e.onScroll,o=e.rowCount;if("function"==typeof r&&t>0&&o>0){var i=this._getHorizontalRangeToRender(),a=i[0],c=i[1],l=i[2],u=i[3],s=this._getVerticalRangeToRender(),f=s[0],d=s[1],p=s[2],m=s[3];this._callOnItemsRendered(a,c,f,d,l,u,p,m)}if("function"==typeof n){var h=this.state,v=h.horizontalScrollDirection,y=h.scrollLeft,b=h.scrollTop,g=h.scrollUpdateWasRequested,w=h.verticalScrollDirection;this._callOnScroll(y,b,v,w,g)}},k._getHorizontalRangeToRender=function(){var e=this.props,t=e.columnCount,r=e.overscanColumnCount,n=e.overscanColumnsCount,o=e.overscanCount,i=e.rowCount,l=this.state,u=l.horizontalScrollDirection,s=l.isScrolling,f=l.scrollLeft,d=r||n||o||1;if(0===t||0===i)return[0,0,0,0];var p=a(this.props,f,this._instanceProps),m=c(this.props,p,f,this._instanceProps),h=s&&"backward"!==u?1:Math.max(1,d),v=s&&"forward"!==u?1:Math.max(1,d);return[Math.max(0,p-h),Math.max(0,Math.min(t-1,m+v)),p,m]},k._getVerticalRangeToRender=function(){var e=this.props,t=e.columnCount,r=e.overscanCount,n=e.overscanRowCount,o=e.overscanRowsCount,i=e.rowCount,a=this.state,c=a.isScrolling,l=a.verticalScrollDirection,u=a.scrollTop,s=n||o||r||1;if(0===t||0===i)return[0,0,0,0];var f=E(this.props,u,this._instanceProps),d=S(this.props,f,u,this._instanceProps),p=c&&"backward"!==l?1:Math.max(1,s),m=c&&"forward"!==l?1:Math.max(1,s);return[Math.max(0,f-p),Math.max(0,Math.min(i-1,d+m)),f,d]},t}(u.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},t}var w=function(e,t){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,t.instance},_=function(e,t){return e};function O(e){var t,r=e.getItemOffset,a=e.getEstimatedTotalSize,c=e.getItemSize,s=e.getOffsetForIndexAndAlignment,f=e.getStartIndexForOffset,m=e.getStopIndexForStartIndex,v=e.initInstanceProps,b=e.shouldResetStyleCacheOnItemSizeChange,g=e.validateProps;return t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=v(n.props,Object(o.a)(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:Object(o.a)(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=l((function(e,t,r,o){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:o})})),n._callOnScroll=void 0,n._callOnScroll=l((function(e,t,r){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,o=n.props,i=o.direction,a=o.itemSize,l=o.layout,u=n._getItemStyleCache(b&&a,b&&l,b&&i);if(u.hasOwnProperty(e))t=u[e];else{var s=r(n.props,e,n._instanceProps),f=c(n.props,e,n._instanceProps),d="horizontal"===i||"horizontal"===l,p="rtl"===i,m=d?s:0;u[e]=t={position:"absolute",left:p?void 0:m,right:p?m:void 0,top:d?0:s,height:d?"100%":f,width:d?f:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=l((function(e,t,r){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,r=t.clientWidth,o=t.scrollLeft,i=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===o)return null;var t=n.props.direction,a=o;if("rtl"===t)switch(y()){case"negative":a=-o;break;case"positive-descending":a=i-r-o}return a=Math.max(0,Math.min(a,i-r)),{isScrolling:!0,scrollDirection:e.scrollOffset<o?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,r=t.clientHeight,o=t.scrollHeight,i=t.scrollTop;n.setState((function(e){if(e.scrollOffset===i)return null;var t=Math.max(0,Math.min(i,o-r));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&d(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=p(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}Object(i.a)(t,e),t.getDerivedStateFromProps=function(e,t){return E(e,t),g(e),null};var w=t.prototype;return w.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},w.scrollToItem=function(e,t){void 0===t&&(t="auto");var r=this.props,n=r.itemCount,o=r.layout,i=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1));var a=0;if(this._outerRef){var c=this._outerRef;a="vertical"===o?c.scrollWidth>c.clientWidth?h():0:c.scrollHeight>c.clientHeight?h():0}this.scrollTo(s(this.props,e,t,i,this._instanceProps,a))},w.componentDidMount=function(){var e=this.props,t=e.direction,r=e.initialScrollOffset,n=e.layout;if("number"==typeof r&&null!=this._outerRef){var o=this._outerRef;"horizontal"===t||"horizontal"===n?o.scrollLeft=r:o.scrollTop=r}this._callPropsCallbacks()},w.componentDidUpdate=function(){var e=this.props,t=e.direction,r=e.layout,n=this.state,o=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var i=this._outerRef;if("horizontal"===t||"horizontal"===r)if("rtl"===t)switch(y()){case"negative":i.scrollLeft=-o;break;case"positive-ascending":i.scrollLeft=o;break;default:var a=i.clientWidth,c=i.scrollWidth;i.scrollLeft=c-a-o}else i.scrollLeft=o;else i.scrollTop=o}this._callPropsCallbacks()},w.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&d(this._resetIsScrollingTimeoutId)},w.render=function(){var e=this.props,t=e.children,r=e.className,o=e.direction,i=e.height,c=e.innerRef,l=e.innerElementType,s=e.innerTagName,f=e.itemCount,d=e.itemData,p=e.itemKey,m=void 0===p?_:p,h=e.layout,v=e.outerElementType,y=e.outerTagName,b=e.style,g=e.useIsScrolling,w=e.width,O=this.state.isScrolling,E="horizontal"===o||"horizontal"===h,S=E?this._onScrollHorizontal:this._onScrollVertical,j=this._getRangeToRender(),x=j[0],P=j[1],k=[];if(f>0)for(var C=x;C<=P;C++)k.push(Object(u.createElement)(t,{data:d,key:m(C,d),index:C,isScrolling:g?O:void 0,style:this._getItemStyle(C)}));var I=a(this.props,this._instanceProps);return Object(u.createElement)(v||y||"div",{className:r,onScroll:S,ref:this._outerRefSetter,style:Object(n.default)({position:"relative",height:i,width:w,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:o},b)},Object(u.createElement)(l||s||"div",{children:k,ref:c,style:{height:E?"100%":I,pointerEvents:O?"none":void 0,width:E?I:"100%"}}))},w._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],r=e[1],n=e[2],o=e[3];this._callOnItemsRendered(t,r,n,o)}if("function"==typeof this.props.onScroll){var i=this.state,a=i.scrollDirection,c=i.scrollOffset,l=i.scrollUpdateWasRequested;this._callOnScroll(a,c,l)}},w._getRangeToRender=function(){var e=this.props,t=e.itemCount,r=e.overscanCount,n=this.state,o=n.isScrolling,i=n.scrollDirection,a=n.scrollOffset;if(0===t)return[0,0,0,0];var c=f(this.props,a,this._instanceProps),l=m(this.props,c,a,this._instanceProps),u=o&&"backward"!==i?1:Math.max(1,r),s=o&&"forward"!==i?1:Math.max(1,r);return[Math.max(0,c-u),Math.max(0,Math.min(t-1,l+s)),c,l]},t}(u.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var E=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},S=g({getColumnOffset:function(e,t){return t*e.columnWidth},getColumnWidth:function(e,t){return e.columnWidth},getRowOffset:function(e,t){return t*e.rowHeight},getRowHeight:function(e,t){return e.rowHeight},getEstimatedTotalHeight:function(e){var t=e.rowCount;return e.rowHeight*t},getEstimatedTotalWidth:function(e){var t=e.columnCount;return e.columnWidth*t},getOffsetForColumnAndAlignment:function(e,t,r,n,o,i){var a=e.columnCount,c=e.columnWidth,l=e.width,u=Math.max(0,a*c-l),s=Math.min(u,t*c),f=Math.max(0,t*c-l+i+c);switch("smart"===r&&(r=n>=f-l&&n<=s+l?"auto":"center"),r){case"start":return s;case"end":return f;case"center":var d=Math.round(f+(s-f)/2);return d<Math.ceil(l/2)?0:d>u+Math.floor(l/2)?u:d;default:return n>=f&&n<=s?n:f>s||n<f?f:s}},getOffsetForRowAndAlignment:function(e,t,r,n,o,i){var a=e.rowHeight,c=e.height,l=e.rowCount,u=Math.max(0,l*a-c),s=Math.min(u,t*a),f=Math.max(0,t*a-c+i+a);switch("smart"===r&&(r=n>=f-c&&n<=s+c?"auto":"center"),r){case"start":return s;case"end":return f;case"center":var d=Math.round(f+(s-f)/2);return d<Math.ceil(c/2)?0:d>u+Math.floor(c/2)?u:d;default:return n>=f&&n<=s?n:f>s||n<f?f:s}},getColumnStartIndexForOffset:function(e,t){var r=e.columnWidth,n=e.columnCount;return Math.max(0,Math.min(n-1,Math.floor(t/r)))},getColumnStopIndexForStartIndex:function(e,t,r){var n=e.columnWidth,o=e.columnCount,i=e.width,a=t*n,c=Math.ceil((i+r-a)/n);return Math.max(0,Math.min(o-1,t+c-1))},getRowStartIndexForOffset:function(e,t){var r=e.rowHeight,n=e.rowCount;return Math.max(0,Math.min(n-1,Math.floor(t/r)))},getRowStopIndexForStartIndex:function(e,t,r){var n=e.rowHeight,o=e.rowCount,i=e.height,a=t*n,c=Math.ceil((i+r-a)/n);return Math.max(0,Math.min(o-1,t+c-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.columnWidth,e.rowHeight}}),j=O({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,r,n,o,i){var a=e.direction,c=e.height,l=e.itemCount,u=e.itemSize,s=e.layout,f=e.width,d="horizontal"===a||"horizontal"===s?f:c,p=Math.max(0,l*u-d),m=Math.min(p,t*u),h=Math.max(0,t*u-d+u+i);switch("smart"===r&&(r=n>=h-d&&n<=m+d?"auto":"center"),r){case"start":return m;case"end":return h;case"center":var v=Math.round(h+(m-h)/2);return v<Math.ceil(d/2)?0:v>p+Math.floor(d/2)?p:v;default:return n>=h&&n<=m?n:n<h?h:m}},getStartIndexForOffset:function(e,t){var r=e.itemCount,n=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(t/n)))},getStopIndexForStartIndex:function(e,t,r){var n=e.direction,o=e.height,i=e.itemCount,a=e.itemSize,c=e.layout,l=e.width,u=t*a,s="horizontal"===n||"horizontal"===c?l:o,f=Math.ceil((s+r-u)/a);return Math.max(0,Math.min(i-1,t+f-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function x(e,t){for(var r in e)if(!(r in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1}var P=["style"],k=["style"];function C(e,t){var r=e.style,n=Object(s.default)(e,P),o=t.style,i=Object(s.default)(t,k);return!x(r,o)&&!x(n,i)}},4136:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(129),o=r(3166);function i(e){var t=window.appData,r=t.sharePage,i=t.enableUserFeed,a=t.organization;if(r||null!=a&&a.id)return!1;var c=e.group,l=e.doc,u=e.book,s=e.version,f=e.me;if(s)return!1;if(!l||!u||!c)return!1;var d=Object(o.c)({type:"doc",target:l,group:c,book:u}),p=(f||window.appData.me||{}).id;return[n.PUBLIC.public,n.PUBLIC.intranet_all,n.PUBLIC.intranet].includes(d)&&u.user_id===p&&i}},4140:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(26),o=r.n(n),i=r(4444);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function s(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"model",{visible:!1,currentPanel:null,containerStyle:{}}),s(this,"_renderInstanceCachedMap",new Map),s(this,"_shouldCachedSet",new Set),s(this,"_contentMap",new Map),s(this,"_renderer",i.b),s(this,"_subscribers",new Set),s(this,"_deferedPanel",{}),s(this,"emitter",void 0),e.inited=!0,this.emitter=new o.a}var t,r,n;return t=e,(r=[{key:"render",value:function(e){var t=this;this.model=l(l({},this.model),e),this._renderer(this.model),this._subscribers.forEach((function(e){e({visible:t.model.visible,currentPanel:t.model.currentPanel})}))}},{key:"getPanelContent",value:function(e){var t=this._contentMap.get(e);return t||console.warn("%s Panel not found, you should check registry",e),t||i.a}},{key:"registerContent",value:function(e,t,r){this._contentMap.set(e,t),null!=r&&r.cached&&this._shouldCachedSet.add(e),this._deferedPanel.panel&&(this.show(this._deferedPanel.panel,this._deferedPanel.options),this._deferedPanel={})}},{key:"registerCachedPanelInstance",value:function(e,t){this._shouldCachedSet.has(e)&&this._renderInstanceCachedMap.set(e,t)}},{key:"getCachedPanelInstance",value:function(e){return this._renderInstanceCachedMap.get(e)}},{key:"setRenderer",value:function(e){this._renderer=e}},{key:"show",value:function(e,t){e!==this.model.currentPanel&&(this._contentMap.get(e)?this.render({visible:!0,currentPanel:e,panelProps:null==t?void 0:t.panelProps,containerStyle:null==t?void 0:t.containerStyle}):this._deferedPanel={panel:e,options:t})}},{key:"hide",value:function(e){e?this.flushCacheByPanel(e):this.flushCaches(),e&&this.model.currentPanel!==e||this.render({visible:!1,currentPanel:null,panelProps:{},containerStyle:{}})}},{key:"subscribe",value:function(e){var t=this;return this._subscribers.add(e),function(){t._subscribers.delete(e)}}},{key:"flushCacheByPanel",value:function(e){this._renderInstanceCachedMap.delete(e)}},{key:"flushCaches",value:function(){this._renderInstanceCachedMap.clear()}},{key:"flushPanels",value:function(){this._shouldCachedSet.clear(),this._contentMap.clear()}},{key:"flushSubscribers",value:function(){this._subscribers.clear()}},{key:"flushAll",value:function(){this.flushCaches(),this.flushPanels()}}])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();s(d,"inited",!1)},4143:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return c}));var n=r(0),o=r.n(n);var i=Object(n.createContext)({showHistory:function(){}});function a(e){return o.a.createElement(i.Provider,{value:e},e.children)}function c(){return Object(n.useContext)(i)}},4150:function(e,t,r){"use strict";r.d(t,"a",(function(){return X}));r(95);var n=r(38),o=r(0),i=r.n(o),a=r(8),c=r.n(a),l=r(30),u=r(67),s="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function f(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on".concat(t),(function(){r(window.event)}))}function d(e,t){for(var r=t.slice(0,t.length-1),n=0;n<r.length;n++)r[n]=e[r[n].toLowerCase()];return r}function p(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),r=t.lastIndexOf("");r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}for(var m={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":s?173:189,"=":s?61:187,";":s?59:186,"'":222,"[":219,"]":221,"\\":220},h={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},v={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},y={16:!1,18:!1,17:!1,91:!1},b={},g=1;g<20;g++)m["f".concat(g)]=111+g;var w=[],_=!1,O="all",E=[],S=function(e){return m[e.toLowerCase()]||h[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function j(e){O=e||"all"}function x(){return O||"all"}var P=function(e){var t=e.key,r=e.scope,n=e.method,o=e.splitKey,i=void 0===o?"+":o;p(t).forEach((function(e){var t=e.split(i),o=t.length,a=t[o-1],c="*"===a?"*":S(a);if(b[c]){r||(r=x());var l=o>1?d(h,t):[];b[c]=b[c].filter((function(e){return!((!n||e.method===n)&&e.scope===r&&function(e,t){for(var r=e.length>=t.length?e:t,n=e.length>=t.length?t:e,o=!0,i=0;i<r.length;i++)-1===n.indexOf(r[i])&&(o=!1);return o}(e.mods,l))}))}}))};function k(e,t,r,n){var o;if(t.element===n&&(t.scope===r||"all"===t.scope)){for(var i in o=t.mods.length>0,y)Object.prototype.hasOwnProperty.call(y,i)&&(!y[i]&&t.mods.indexOf(+i)>-1||y[i]&&-1===t.mods.indexOf(+i))&&(o=!1);(0!==t.mods.length||y[16]||y[18]||y[17]||y[91])&&!o&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function C(e,t){var r=b["*"],n=e.keyCode||e.which||e.charCode;if(I.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===w.indexOf(n)&&229!==n&&w.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var r=v[t];e[t]&&-1===w.indexOf(r)?w.push(r):!e[t]&&w.indexOf(r)>-1?w.splice(w.indexOf(r),1):"metaKey"===t&&e[t]&&3===w.length&&(e.ctrlKey||e.shiftKey||e.altKey||(w=w.slice(w.indexOf(r))))})),n in y){for(var o in y[n]=!0,h)h[o]===n&&(I[o]=!0);if(!r)return}for(var i in y)Object.prototype.hasOwnProperty.call(y,i)&&(y[i]=e[v[i]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===w.indexOf(17)&&w.push(17),-1===w.indexOf(18)&&w.push(18),y[17]=!0,y[18]=!0);var a=x();if(r)for(var c=0;c<r.length;c++)r[c].scope===a&&("keydown"===e.type&&r[c].keydown||"keyup"===e.type&&r[c].keyup)&&k(e,r[c],a,t);if(n in b)for(var l=0;l<b[n].length;l++)if(("keydown"===e.type&&b[n][l].keydown||"keyup"===e.type&&b[n][l].keyup)&&b[n][l].key){for(var u=b[n][l],s=u.splitKey,f=u.key.split(s),d=[],p=0;p<f.length;p++)d.push(S(f[p]));d.sort().join("")===w.sort().join("")&&k(e,u,a,t)}}}function I(e,t,r){w=[];var n=p(e),o=[],i="all",a=document,c=0,l=!1,u=!0,s="+",m=!1;for(void 0===r&&"function"==typeof t&&(r=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(i=t.scope),t.element&&(a=t.element),t.keyup&&(l=t.keyup),void 0!==t.keydown&&(u=t.keydown),void 0!==t.capture&&(m=t.capture),"string"==typeof t.splitKey&&(s=t.splitKey)),"string"==typeof t&&(i=t);c<n.length;c++)o=[],(e=n[c].split(s)).length>1&&(o=d(h,e)),(e="*"===(e=e[e.length-1])?"*":S(e))in b||(b[e]=[]),b[e].push({keyup:l,keydown:u,scope:i,mods:o,shortcut:n[c],method:r,key:n[c],splitKey:s,element:a});void 0!==a&&!function(e){return E.indexOf(e)>-1}(a)&&window&&(E.push(a),f(a,"keydown",(function(e){C(e,a)}),m),_||(_=!0,f(window,"focus",(function(){w=[]}),m)),f(a,"keyup",(function(e){C(e,a),function(e){var t=e.keyCode||e.which||e.charCode,r=w.indexOf(t);if(r>=0&&w.splice(r,1),e.key&&"meta"===e.key.toLowerCase()&&w.splice(0,w.length),93!==t&&224!==t||(t=91),t in y)for(var n in y[t]=!1,h)h[n]===t&&(I[n]=!1)}(e)}),m))}var A={setScope:j,getScope:x,deleteScope:function(e,t){var r,n;for(var o in e||(e=x()),b)if(Object.prototype.hasOwnProperty.call(b,o))for(r=b[o],n=0;n<r.length;)r[n].scope===e?r.splice(n,1):n++;x()===e&&j(t||"all")},getPressedKeyCodes:function(){return w.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=S(e)),-1!==w.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,r=t.tagName,n=!0;return!t.isContentEditable&&("INPUT"!==r&&"TEXTAREA"!==r&&"SELECT"!==r||t.readOnly)||(n=!1),n},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(b).forEach((function(r){var n=b[r].find((function(r){return r.scope===t&&r.shortcut===e}));n&&n.method&&n.method()}))},unbind:function(e){if(void 0===e)Object.keys(b).forEach((function(e){return delete b[e]}));else if(Array.isArray(e))e.forEach((function(e){e.key&&P(e)}));else if("object"==typeof e)e.key&&P(e);else if("string"==typeof e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r[0],i=r[1];"function"==typeof o&&(i=o,o=""),P({key:e,scope:o,method:i,splitKey:"+"})}},keyMap:m,modifier:h,modifierMap:v};for(var D in A)Object.prototype.hasOwnProperty.call(A,D)&&(I[D]=A[D]);if("undefined"!=typeof window){var T=window.hotkeys;I.noConflict=function(e){return e&&window.hotkeys===I&&(window.hotkeys=T),I},window.hotkeys=I}I.filter=function(){return!0};var L=function(e,t){var r=e.target,n=r&&r.tagName;return Boolean(n&&t&&t.includes(n))},N=function(e){return L(e,["INPUT","TEXTAREA","SELECT"])};function R(e,t,r,n){r instanceof Array&&(n=r,r=void 0);var i=r||{},a=i.enableOnTags,c=i.filter,l=i.keyup,u=i.keydown,s=i.filterPreventDefault,f=void 0===s||s,d=i.enabled,p=void 0===d||d,m=i.enableOnContentEditable,h=void 0!==m&&m,v=Object(o.useRef)(null),y=Object(o.useCallback)((function(e,r){var n,o;return c&&!c(e)?!f:!!(N(e)&&!L(e,a)||null!=(n=e.target)&&n.isContentEditable&&!h)||!!(null===v.current||document.activeElement===v.current||null!=(o=v.current)&&o.contains(document.activeElement))&&(t(e,r),!0)}),n?[v,a,c].concat(n):[v,a,c]);return Object(o.useEffect)((function(){if(p)return l&&!0!==u&&(r.keydown=!1),I(e,r||{},y),function(){return I.unbind(e,y)};I.unbind(e,y)}),[y,e,p]),v}I.isPressed;function M(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],i=t.slice(2);return R.apply(void 0,[n,function(){var e;null!==(e=document.activeElement)&&void 0!==e&&e.closest('[contenteditable="true"]')||o.apply(void 0,arguments)}].concat(M(i)))}var G=r(229),W=r(3982),z=r(31),U="index-module_present_RJR62",H="index-module_btn_nQfFi";function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K={overlayClassName:"index-module_tooltip_-a6S+",placement:"bottom",title:i.a.createElement(i.a.Fragment,null,__("演示")+__("：")+__("P")),trigger:["hover"]};function Y(e){var t=e.doc,r=e.onPresent;function o(e){e.preventDefault(),"Doc"===t.type&&"function"==typeof r&&r()}return F(l.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p",o),i.a.createElement(n.a,K,i.a.createElement("button",{type:"button","data-aspm-click":"d129827",id:"present-btn","data-testid":"present-btn",className:H,onClick:o},i.a.createElement(z.b,{name:"present",width:20,height:20})))}function Q(e){var t=e.doc,r=e.onPresent;function o(e){e.preventDefault(),"Doc"===t.type&&"function"==typeof r&&r()}return F(l.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p",o),i.a.createElement(n.a,K,i.a.createElement("button",{type:"button","data-aspm-click":"d129827",id:"present-btn","data-testid":"present-btn",className:H,onClick:o},i.a.createElement(z.b,{name:"present",width:20,height:20})))}Y.propTypes={doc:c.a.object.isRequired,onPresent:c.a.func.isRequired},Q.propTypes=Y.propTypes;var X=function(e){var t=e.doc,r=e.button,n=V(Object(o.useState)(!1),2),a=n[0],c=n[1],l=Object(o.useCallback)((function(){c(!1)}),[]),s=Object(o.useCallback)((function(){var e;c(!0),(e=document.body).requestFullScreen=e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen,e.requestFullScreen&&e.requestFullScreen()}),[]),f=Object(u.useLocation)().hash,d=i.a.useMemo((function(){return f.slice(1)}),[f]);return i.a.createElement("div",{className:U},i.a.createElement(r,{doc:t,onPresent:s}),a&&i.a.createElement(W.b,{headingId:d,doc:t,onCancel:l}))};X.propTypes={doc:c.a.object.isRequired,button:c.a.elementType.isRequired};var J=function(e){var t=e.doc;return i.a.createElement(G.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return i.a.createElement(X,{doc:t,button:Y})}},i.a.createElement(X,{doc:t,button:Q}))};J.propTypes={doc:c.a.object.isRequired},J.displayName="ExposedPresentButton";t.b=J},4156:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l.a}));var n=r(0),o=r.n(n),i=r(4140),a=r(4445);function c(e){var t=Object(n.useMemo)((function(){return{sidePanelManager:new i.a}}),[]);return o.a.createElement(a.a.Provider,{value:t},e.children)}var l=r(4121)},4388:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r(95);var n=r(38),o=(r(61),r(23)),i=r(0),a=r(67),c=r(157),l=r(86),u=function(e){var t,r,u=e.doc,s=e.book,f=e.group,d=Object(a.useHistory)(),p=i.useMemo((function(){var e,t;return Object(c.c)({type:"book",target:s,group:f})!==l.PRIVACY.private?null!==(t=s.abilities)&&void 0!==t&&t.read_private?__("当前文档归属公开知识库，你和游客都可查看完整的知识库目录"):__("当前文档归属公开知识库，你可查看完整的知识库目录"):null!==(e=s.abilities)&&void 0!==e&&e.read_private?__("你拥有知识库权限，可回到知识库目录中查看，游客不可见该功能"):void 0}),[s,f]),m=i.createElement(o.a,{onClick:function(){var e=new URLSearchParams(d.location.search);e.delete("singleDoc"),d.push({pathname:d.location.pathname,search:"?".concat(e.toString())}),window.location.reload()}},null!==(t=s.abilities)&&void 0!==t&&t.read||null===(r=u.abilities)||void 0===r||!r.update?__("回到知识库"):__("查看原始文档"));return p?i.createElement(n.a,{placement:"bottom",title:p||""},m):m}},4406:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(0),o=r(1532),i=r(155),a=r(4010),c=(r(55),r(22)),l=r(158),u=r(35);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(e,r,c)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p={};function m(){}function h(){}function v(){}var y={};l(y,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,i)&&(y=g);var w=v.prototype=m.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,i,a,c){var l=d(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==s(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=d(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:h,configurable:!0}),h.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),l(O.prototype,a,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(w),l(w,c,"Generator"),l(w,i,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function d(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){d(i,n,o,a,c,"next",e)}function c(e){d(i,n,o,a,c,"throw",e)}a(void 0)}))}}var m=["docId","currentUser"];function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var v=function(e){var t=e.docId,r=(e.currentUser,h(e,m)),o=function(e){var t=window.appData.me;return{handleShare:n.useCallback(p(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.a.docs.shareToPersonalFeed({id:e});case 2:c.a.success({content:n.createElement(n.Fragment,null,__("分享成功 "),n.createElement("a",{target:"_blank","data-desktopTarget":"_browser",href:"".concat(l.b.getHost(),"/").concat(t.login)},__("去查看")))});case 3:case"end":return r.stop()}}),r)}))),[e])}}(t),i=o.handleShare;return n.createElement(n.Fragment,null,n.createElement(a.a,{type:"doc",restProps:r,overlayClassName:"share-note-button",onShare:i}))},y=function(e){return n.createElement(i.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return n.createElement(o.a,{role:"alternative",iconName:"digitalgarden",tooltip:__("我的花园")})}},n.createElement(v,e))}},4411:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(75);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(){i=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(e,r,c)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function m(){}function h(){}function v(){}var y={};s(y,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,c)&&(y=g);var w=v.prototype=m.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function i(n,a,c,l){var u=d(e[n],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==o(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,c,l)}),(function(e){i("throw",e,c,l)})):t.resolve(f).then((function(e){s.value=e,c(s)}),(function(e){return i("throw",e,c,l)}))}l(u.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=d(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:h,configurable:!0}),h.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),s(O.prototype,l,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(w),s(w,u,"Generator"),s(w,c,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function a(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function c(){return l.apply(this,arguments)}function l(){var e;return e=i().mark((function e(){var t,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.waitUntil)((function(){var e;return null===(e=window.Tracert)||void 0===e?void 0:e.clientId}),{retryTime:10,ms:100});case 2:if("string"==typeof(o=null===(t=window.Tracert)||void 0===t?void 0:t.clientId)){e.next=5;break}return e.abrupt("return",!1);case 5:if(a=Number(null===(r=o.split("_")[1])||void 0===r?void 0:r.slice(-1)),!Number.isNaN(a)){e.next=8;break}return e.abrupt("return",!1);case 8:if(!(a<5)){e.next=10;break}return e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})),l=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,l,"next",e)}function l(e){a(i,n,o,c,l,"throw",e)}c(void 0)}))},l.apply(this,arguments)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(e,r,c)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function m(){}function h(){}function v(){}var y={};l(y,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(k([])));g&&g!==t&&r.call(g,i)&&(y=g);var w=v.prototype=m.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function o(n,i,a,c){var l=d(e[n],e,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==u(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=d(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:h,configurable:!0}),h.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),l(O.prototype,a,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(w),l(w,c,"Generator"),l(w,i,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function f(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}var d=window.appData;function p(e){return m.apply(this,arguments)}function m(){var e;return e=s().mark((function e(t){var r,n,o,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t||!d.isYuque||null!==(r=d.organization)&&void 0!==r&&r.id)){e.next=2;break}return e.abrupt("return",!1);case 2:return i=null===(n=d.doc)||void 0===n||null===(o=n.abilities)||void 0===o?void 0:o.update,e.next=5,c();case 5:return a=e.sent,e.abrupt("return",!t&&!i&&a);case 7:case"end":return e.stop()}}),e)})),m=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){f(i,n,o,a,c,"next",e)}function c(e){f(i,n,o,a,c,"throw",e)}a(void 0)}))},m.apply(this,arguments)}},4444:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=function(){return null};function o(){}},4445:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),o=r.n(n).a.createContext(null)},4447:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),o=r.n(n).a.createContext({ref:{current:null}})},4451:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return de}));r(84);var n=r(45),o=(r(3195),r(3196)),i=(r(95),r(38)),a=r(0),c=r.n(a),l=r(11),u=r.n(l),s=r(316),f=r(849),d=r(507),p=r(246),m=r(540),h=r(31),v={statisticHead:"style-module_statisticHead_M8b22",interactHead:"style-module_interactHead_aw+2s",visitorsHead:"style-module_visitorsHead_6oKqL",title:"style-module_title_XUMRT",iconWrapper:"style-module_iconWrapper_vYWpL",tipIcon:"style-module_tipIcon_aQ3h4",download:"style-module_download_U1-mK",downloadAreaIcon:"style-module_downloadAreaIcon_tXk4f",downloadTxt:"style-module_downloadTxt_FH9kd",statisticBody:"style-module_statisticBody_1ft2Y",interactBody:"style-module_interactBody_V1bDl",visitorsBody:"style-module_visitorsBody_jTS0T",basicInfo:"style-module_basicInfo_wa0uq",row2Col2Item:"style-module_row2Col2Item_qtrTw",row2Col2Clickable:"style-module_row2Col2Clickable_ZlaMW",rightArrow:"style-module_rightArrow_6Rftv",name:"style-module_name_IyunN",value:"style-module_value_NDE+i",authorInfo:"style-module_authorInfo_UtZn1",row2Col1Item:"style-module_row2Col1Item_ECpAN",creatorName:"style-module_creatorName_-uWSQ",longValueItem:"style-module_longValueItem_Q6CK9",infoValueWrapper:"style-module_infoValueWrapper_+ZcEA",infoItemValue:"style-module_infoItemValue_DV6Qa",interactInfo:"style-module_interactInfo_UwF70",row1Col4Item:"style-module_row1Col4Item_ay5bD",row1Col4Clickable:"style-module_row1Col4Clickable_20wcl",active:"style-module_active_AN7V9",pv:"style-module_pv_VqoM8",uv:"style-module_uv_4GFCm",userListContainer:"style-module_userListContainer_BPEvb",userColumnListWrapper:"style-module_userColumnListWrapper_vogM8",empty:"style-module_empty_KEDVQ",userColumnList:"style-module_userColumnList_RFhhE",userItem:"style-module_userItem_g7TOe",userItemLeft:"style-module_userItemLeft_zhOUj",userItemNameWrapper:"style-module_userItemNameWrapper_LdzE2",userItemName:"style-module_userItemName_8FJg8",userTagList:"style-module_userTagList_ES-d5",tag:"style-module_tag_Cxaqq",commentTag:"style-module_commentTag_3E6h-",likeTag:"style-module_likeTag_xe+8Z",frequentVisitTag:"style-module_frequentVisitTag_x1wae",paginationWrapper:"style-module_paginationWrapper_j7srn"},y=r(429),b=r(114),g=r.n(b),w=r(915),_=r.n(w),O=r(178),E=r.n(O),S=r(3199),j=r(3202),x=r(3184),P=function(){return function(e,t,r){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,r)}("queryCommandValue","wordCount")},k=r(4143),C=(r(55),r(22)),I=r(732),A=r(3177),D=r.n(A);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=["creator","contributors","last_editor"],R=["creator","contributors","last_editor"];function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function B(){B=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(x([])));y&&y!==t&&r.call(y,i)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==M(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function F(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function G(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){F(i,n,o,a,c,"next",e)}function c(e){F(i,n,o,a,c,"throw",e)}a(void 0)}))}}function W(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==M(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===M(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=4;function X(){var e=Object(k.b)().showHistory,t=Object(y.f)((function(e){var t=e.doc,r=t.type,n=t.id,o=t.user,i=t.contributors,a=t.last_editor,c=t.hits,l=t.created_at,u=t.content_updated_at,s=t.likes_count,f=t.word_count,d=e.litecomment.comments,p=e.me,m=d.sort((function(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()})),h=E()(m,"user.id").map((function(e){var t=e.user,r=e.created_at;return K(K({},t),{},{time:r})}));return{statisticDoc:{id:n,creator:o,contributors:i,last_editor:a,pv:c,created_at:l,content_updated_at:u,likes_count:s,word_count:f,comments_count:d.length,type:r},commentUsers:h,me:p}}),(function(e,t){var r=e.statisticDoc,n=r.creator,o=r.contributors,i=r.last_editor,a=V(r,N),c={creatorId:null==n?void 0:n.id,contributorsCount:o.length,lastEditor:null==i?void 0:i.id},l=t.statisticDoc,u=l.creator,s=l.contributors,f=l.last_editor,d=V(l,R),p={creatorId:null==u?void 0:u.id,contributorsCount:s.length,lastEditor:null==f?void 0:f.id};return e.commentUsers.length===t.commentUsers.length&&g()(c,p)&&g()(a,d)})),r=t.statisticDoc,n=t.commentUsers,o=t.me,i=r.id,l=r.contributors,u=r.last_editor,s=r.creator,f=r.pv,d=r.comments_count,p=r.likes_count,m=r.word_count,h=r.content_updated_at,v=r.created_at,b=r.type,w=z(Object(a.useState)(0),2),O=w[0],A=w[1],T=z(Object(a.useState)(0),2),M=T[0],F=T[1],U=z(Object(a.useState)(0),2),H=U[0],q=U[1],Y=z(Object(a.useState)([]),2),X=Y[0],J=Y[1],Z=z(Object(a.useState)([]),2),$=Z[0],ee=Z[1],te=z(Object(a.useState)([]),2),re=te[0],ne=te[1],oe=z(Object(a.useState)({frequentVisitMap:{},commentTagMap:{},likeTagMap:{}}),2),ie=oe[0],ae=oe[1],ce=z(Object(a.useState)("uv"),2),le=ce[0],ue=ce[1],se=z(Object(a.useState)([]),2),fe=se[0],de=se[1],pe=c.a.useMemo((function(){var e=l.findIndex((function(e){return e.name===u.name})),t=W(l);-1!==e&&t.splice(e,1);var r=t;return r.unshift(u),r.map((function(e){return e.name})).join("、")}),[l,u]),me=l.length>=2?" ".concat(__("{count}人",{count:l.length})):"";return Object(a.useEffect)((function(){function e(){return(e=G(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.find)({doc_id:i,doc_type:"Doc",published:!0,limit:100});case 2:t=e.sent,A(t.length);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return t=G(B().mark((function e(){var t,r,n,o;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=[],n=0;case 3:if(!(n<1e3&&t)){e.next=12;break}return e.next=6,Object(j.users)({action_type:"like",target_type:"Doc",target_id:i,limit:200,offset:n},{useOriginResp:!0});case 6:o=e.sent,t=o.meta.hasMore,r=[].concat(W(r),W(o.data.map((function(e){return K(K({},e),{},{time:e.action_created_at})}))));case 9:e.next=3;break;case 12:ne(r);case 13:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}function r(){return(r=G(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.pvList)({id:i});case 2:t=e.sent,J(t.recentVisitHistory.map((function(e){return K(K({},e.user),{},{time:e.updated_at})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=G(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.uvList)({id:i});case 2:t=e.sent,q(t.uv),ee(t.recentVisitors.map((function(e){return K(K({},e.user),{},{time:e.updated_at})})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){r.apply(this,arguments)}(),function(){n.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){F(P()||m||0)}),[]),Object(a.useEffect)((function(){"pv"===le?de(X):"uv"===le?de($):"comment"===le?de(n):"like"===le&&de(re)}),[le,X,$,n,re]),Object(a.useEffect)((function(){var e=_()(X,(function(e){return e.id})),t=Object.keys(e).reduce((function(t,r){return e[r].length>Q&&(t[e[r][0].id]=!0),t}),{});delete t[o.id],ae(K(K({},ie),{},{frequentVisitMap:t}))}),[X]),Object(a.useEffect)((function(){var e=re.reduce((function(e,t){return e[t.id]=!0,e}),{});ae(K(K({},ie),{},{likeTagMap:e}))}),[re]),Object(a.useEffect)((function(){var e=n.reduce((function(e,t){return e[t.id]=!0,e}),{});ae(K(K({},ie),{},{commentTagMap:e}))}),[n]),{type:b,wordCount:M,versionCount:O,contributorsStr:pe,contributorSuffix:me,contentUpdatedAt:h,createdAt:v,pv:f,uv:H,commentCount:d,likeCount:p,userListDataSource:fe,setUserListDataSource:de,creator:s,selectedType:le,setSelectedType:ue,tagMaps:ie,showHistory:e,handleDownloadVisitors:function(){!function(e){var t=e.filename,r=e.dataSource;if(0===r.length)return C.a.warning(__("暂无数据可导出"));var n=r.map((function(e){var t;return L(t={},__("用户名"),e.name),L(t,__("时间"),e.time),t})),o=D.a.unparse(n);Object(I.downloadCsvFile)(o,t)}({dataSource:fe,filename:__("访问人数信息")})}}}var J=r(4509);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function te(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Z(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(){}function ne(e){var t=e.name,r=e.value,n=e.clickable,o=e.onClick,i=void 0===o?re:o;return c.a.createElement("div",{className:u()(v.row2Col2Item,te({},v.row2Col2Clickable,n)),onClick:i},c.a.createElement("div",null,c.a.createElement("div",{className:v.value},r),c.a.createElement("div",{className:v.name},t)),n&&c.a.createElement(h.b,{name:"ArrowRight",className:v.rightArrow}))}function oe(e){var t=e.wordCount,r=e.versionCount,n=e.contentUpdatedAt,o=e.createdAt,i=e.showHistory,a=e.type;return c.a.createElement("div",{className:v.basicInfo},"Doc"===a?c.a.createElement(ne,{name:__("字数"),value:t}):null,"Table"!==a?c.a.createElement(ne,{name:__("历史版本#docStatistic"),value:r>99?"99+":r,clickable:!0,onClick:function(){i("all",{published:!0})}}):null,c.a.createElement(ne,{name:__("更新时间#docStatistic"),value:n}),c.a.createElement(ne,{name:__("创建时间#docStatistic"),value:o}))}function ie(e){var t=e.name,r=e.value,n=e.suffix,o=Object(J.a)(),a=o.hasEllipsis,l=o.ellipsisDomRef,u=c.a.createElement("div",{className:v.infoValueWrapper},c.a.createElement("div",{ref:l,className:v.infoItemValue},r),c.a.createElement("div",null,n));return c.a.createElement("div",{className:v.longValueItem},a?c.a.createElement(i.a,{title:r,placement:"bottomRight"},u):u,c.a.createElement("div",{className:v.name},t))}function ae(e){var t=e.name,r=e.value;return c.a.createElement("div",{className:v.row2Col1Item},c.a.createElement("div",{className:v.value},r),c.a.createElement("div",{className:v.name},t))}function ce(e){var t=e.creator,r=e.contributorsStr,n=e.contributorSuffix;return c.a.createElement("div",{className:v.authorInfo},c.a.createElement(ae,{name:c.a.createElement("div",{style:{marginTop:6}},__("创建者")),value:c.a.createElement(m.a,{user:t},c.a.createElement("div",null,c.a.createElement(p.a,{src:t.avatar_url,size:20,name:t.name}),c.a.createElement("span",{className:v.creatorName},t.name)))}),c.a.createElement(ie,{name:__("编辑者"),value:r,suffix:n}))}function le(e){var t,r=e.name,n=e.value,o=e.clickable,i=e.onClick,a=void 0===i?re:i,l=e.active;return c.a.createElement("div",{className:u()(v.row1Col4Item,(t={},te(t,v.row1Col4Clickable,o),te(t,v.active,l),t)),onClick:a},c.a.createElement("div",{className:v.value},n),c.a.createElement("div",{className:v.name},r))}function ue(e){var t=e.pv,r=e.commentCount,n=e.likeCount;return c.a.createElement("div",{className:v.interactInfo},c.a.createElement(le,{name:c.a.createElement("div",{className:v.pv},__("阅读数"),c.a.createElement(i.a,{title:__("去除了编辑者的访问次数")},c.a.createElement("div",{className:v.iconWrapper},c.a.createElement(h.b,{name:"ActionDocInfo",className:v.tipIcon})))),value:t}),c.a.createElement(le,{name:__("评论数"),value:r}),c.a.createElement(le,{name:__("点赞数"),value:n}))}function se(e){var t=e.type;return"comment"===t?c.a.createElement("span",{className:u()(v.tag,v.commentTag)},__("评过")):"like"===t?c.a.createElement("span",{className:u()(v.tag,v.likeTag)},__("赞过")):"frequentVisit"===t?c.a.createElement("span",{className:u()(v.tag,v.frequentVisitTag)},__("常来")):null}function fe(e){var t=e.dataSource,r=e.tagMaps,n=r.frequentVisitMap,i=r.commentTagMap,l=r.likeTagMap,u=10,f=$(Object(a.useState)([]),2),d=f[0],h=f[1],y=$(Object(a.useState)(1),2),b=y[0],g=y[1],w=t.length;Object(a.useEffect)((function(){var e=t.slice((b-1)*u,b*u);h(e)}),[b,t]);var _=[d.slice(0,5),d.slice(5,u)],O=w>u,E=0===w;return c.a.createElement("div",{className:v.userListContainer},c.a.createElement("div",{className:v.userColumnListWrapper},E?c.a.createElement("p",{className:v.empty},__("暂无数据")):_.map((function(e,t){return c.a.createElement("div",{className:v.userColumnList,key:t},e.map((function(e,t){var r=e.id,o=[{type:"frequentVisit",did:n[r]},{type:"like",did:l[r]},{type:"comment",did:i[r]}];return c.a.createElement("div",{className:v.userItem,key:t},c.a.createElement("div",{className:v.userItemLeft},c.a.createElement(m.a,{user:e,className:v.userItemNameWrapper},c.a.createElement(p.a,{src:e.avatar_url,size:20,name:e.name}),c.a.createElement("span",{className:v.userItemName},e.name)),c.a.createElement("span",{className:v.userTagList},o.map((function(e){return e.did?c.a.createElement(se,{type:e.type}):null})))),c.a.createElement(s.a,{time:e.time}))})))}))),c.a.createElement("div",{className:v.paginationWrapper},O&&c.a.createElement(o.a,{className:v.pagination,size:"small",current:b,total:w,pageSize:u,onChange:function(e){g(e)}})))}function de(e){var t=e.visible,r=e.hide,o=X(),a=o.type,l=o.wordCount,u=o.versionCount,s=o.contributorsStr,p=o.contributorSuffix,m=o.createdAt,y=o.contentUpdatedAt,b=o.creator,g=o.pv,w=o.commentCount,_=o.likeCount,O=o.userListDataSource,E=o.tagMaps,S=o.showHistory,j=o.handleDownloadVisitors,x={type:a,wordCount:l,versionCount:u,contentUpdatedAt:d.default.format(y),createdAt:d.default.format(m),showHistory:S,hide:r},P={creator:b,contributorsStr:s,contributorSuffix:p},k={pv:g,commentCount:w,likeCount:_},C=Object(f.b)().isYuque;return c.a.createElement(n.a,{centered:!0,style:{paddingBottom:0},width:700,zIndex:999,footer:null,visible:t,onCancel:r},c.a.createElement("div",null,c.a.createElement("div",{className:v.statisticHead},c.a.createElement("span",{className:v.title},__("统计详情"))),c.a.createElement("div",{className:v.statisticBody},c.a.createElement(oe,x),c.a.createElement(ce,P)),c.a.createElement("div",{className:v.interactHead},c.a.createElement("span",{className:v.title},__("阅读数据"))),c.a.createElement("div",{className:v.interactBody},c.a.createElement(ue,k)),c.a.createElement("div",{className:v.visitorsHead},c.a.createElement("span",{className:v.title},__("访问人员"),C?c.a.createElement(i.a,{title:__("仅显示空间内部访问成员的明细")},c.a.createElement("div",{className:v.iconWrapper},c.a.createElement(h.b,{name:"ActionDocInfo",className:v.tipIcon}))):null),c.a.createElement("div",{className:v.download,onClick:j},c.a.createElement(h.b,{name:"Download",className:v.downloadAreaIcon}),c.a.createElement("span",{className:v.downloadTxt},__("下载明细")))),c.a.createElement("div",{className:v.visitorsBody},c.a.createElement(fe,{dataSource:O,tagMaps:E}))))}},4456:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l}));var n=r(0),o=r.n(n);var i=Object(n.createContext)({isShare:!1}),a={isShare:!1};function c(e){return o.a.createElement(i.Provider,{value:a},e.children)}function l(){return Object(n.useContext)(i)}},4479:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(90),o=r.n(n),i=(r(0),r(26)),a=r.n(i);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===c(i)?i:String(i)),n)}var o,i}var u=o()("biz.doc_events"),s={rename:"rename"},f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._event=new a.a}var t,r,n;return t=e,(r=[{key:"emit",value:function(e,t){if(!Object.keys(s).includes(e))throw new Error("event type ".concat(e," not support."));if(!t.doc_id)throw new Error("emit data missing data_id, data: ".concat(JSON.stringify(t)));u("".concat(e," emitted")),this._event.emit(e,t)}},{key:"off",value:function(e,t){this._event.off(e,t)}},{key:"on",value:function(e,t){if(!s[e])throw new Error("event type ".concat(e," not support."));this._event.on(e,t)}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=new f},4483:function(e,t,r){"use strict";r.d(t,"b",(function(){return b})),r.d(t,"a",(function(){return u}));var n=r(0),o=r.n(n),i=r(905),a=r(4121),c=r(67),l=r(4444),u={Outline:"Outline",WordingComment:"WordingComment",SideComment:"SideComment",MoreFeature:"MoreFeature",EditDocMeta:"EditDocMeta",Review:"Review",DocStyle:"DocStyle"},s={PanelLayoutChange:"PanelLayoutChange"},f={panel:"sidePanel-module_panel_Vr-DC",toggleShow:"sidePanel-module_toggleShow_o7eFp",toggleHide:"sidePanel-module_toggleHide_BreQk"};function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=Object(i.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(5),r.e(1190)]).then(r.bind(null,5187))}),{suspense:!0}),v=Object(i.b)((function(){return Promise.all([r.e(0),r.e(6),r.e(8),r.e(11),r.e(1196)]).then(r.bind(null,5206))}),{suspense:!0}),y=305;function b(e){var t=Object(c.useParams)().doc,r=Object(a.a)().sidePanelManager,i=p(Object(n.useState)({visible:!1,currentPanel:null,panelProps:{},containerStyle:{}}),2),u=i[0],m=i[1],b=u.visible,g=u.currentPanel,w=u.panelProps,_=u.containerStyle,O=Object(n.useRef)(null),E=function(e){m(e)},S=function(e){r.emitter.emit(s.PanelLayoutChange,{width:e.width})},j=g?r.getPanelContent(g):l.a,x=o.a.createElement(j,d({panel:g,hide:function(e){r.hide(e)},maxWidth:y,onLayout:S},w));return Object(n.useEffect)((function(){r.setRenderer(E)}),[r]),Object(n.useEffect)((function(){b||S({width:0})}),[b]),Object(n.useEffect)((function(){r.flushAll(),r.hide(),r.registerContent("MoreFeature",h),r.registerContent("SideComment",v)}),[t,r]),Object(n.useEffect)((function(){return function(){r.flushAll(),r.hide()}}),[r]),o.a.createElement("div",{id:"sidePanel",ref:O,className:f.panel,style:_},x)}r(4140)},4491:function(e,t,r){"use strict";r(61);var n=r(23),o=(r(95),r(38)),i=r(0),a=r.n(i),c=r(8),l=r.n(c),u=r(1501),s=r(1500),f=r.n(s),d=r(3577);var p=function(e,t){Object(i.useEffect)((function(){var r=new URLSearchParams(window.location.search);if("doc_embed"!==r.get("view")&&!r.get("inner")&&"Thread"!==t.type)return t.abilities&&t.abilities.update&&f()(d.e.edit.key,(function(r){var n=r.target;"INPUT"!==n.tagName&&(n.isContentEditable&&!n.classList.contains("textarea-cell")||("Sheet"===t.type||"Table"===t.type?u.a.saveSheetPosition(t.id):u.a.saveReadPosition(t.id),window.location.href="/".concat(e.namespace,"/").concat(t.slug,"/edit")))})),function(){f.a.unbind(d.e.edit.key)}}),[])};function m(e){var t=e.book,r=e.doc,i="Sheet"===r.type||"Table"===r.type;return p(t,r),a.a.createElement(n.a,{type:"primary",style:{marginRight:8},onClick:function(){i?u.a.saveSheetPosition(r.id):u.a.saveReadPosition(r.id)},href:"/".concat(t.namespace,"/").concat(r.slug,"/edit").concat(i?window.location.hash:"")},a.a.createElement(o.a,{title:a.a.createElement("p",{style:{textAlign:"center"}},__("编辑")+__("：")+__("E")),placement:"bottom"},__("编辑")))}m.propTypes={book:l.a.object.isRequired,doc:l.a.object.isRequired};t.a=m},4509:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(){var e=o(Object(n.useState)(!1),2),t=e[0],r=e[1],i=Object(n.useRef)(null);return Object(n.useEffect)((function(){i.current&&i.current.clientWidth!==i.current.scrollWidth&&r(!0)}),[]),{ellipsisDomRef:i,hasEllipsis:t}}},4513:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p})),r.d(t,"DocStatisticModal",(function(){return m.default})),r.d(t,"DocStatisticProvider",(function(){return s})),r.d(t,"useDocStatisticStore",(function(){return f}));var n=r(0),o=r.n(n),i=r(905);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(){}var u=Object(n.createContext)({visible:!1,hide:l,show:l});function s(e){var t=a(Object(n.useState)(!1),2),r=t[0],i=t[1],c=Object(n.useMemo)((function(){return{visible:r,hide:function(){i(!1)},show:function(){i(!0)}}}),[r]);return o.a.createElement(u.Provider,{value:c},e.children)}function f(){return Object(n.useContext)(u)}var d=Object(i.c)((function(){return Promise.resolve().then(r.bind(null,4451))}),{suspense:!0});function p(){var e=f(),t=e.visible,r=e.hide;return Object(n.useEffect)((function(){t&&d.start()}),[t]),o.a.createElement(d,{key:t,visible:t,hide:r})}var m=r(4451)},4542:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return a}));var n=850,o=305,i=39,a=305},4543:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return a}));var n=480,o=259,i=0,a=991},4549:function(e,t,r){"use strict";var n=r(0),o=r.n(n),i=r(39),a=r.n(i),c=r(3722),l=r(11),u=r.n(l),s=r(429),f=r(31),d=r(160),p=(r(95),r(38)),m=(r(55),r(22)),h=r(932),v=r(2870),y=r(35),b=r(2867),g=r(229),w=r(3551),_=(r(98),r(37)),O="index-module_singleLineInputWrapper_0V8Wg",E="index-module_input_l1Smp",S="index-module_iconWrapper_7CyRy",j="index-module_icon_UQHPD";function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e,t){var r=e.onEnter,i=x(Object(n.useState)(""),2),a=i[0],c=i[1],l=Object(n.useRef)(null);return o.a.useImperativeHandle(t,(function(){return{get textArea(){return l.current},focus:function(){var e;null===(e=l.current)||void 0===e||e.focus()},clear:function(){c("")}}}),[l.current]),o.a.createElement("div",{className:u()(O,e.className)},o.a.createElement(_.a.TextArea,{value:a,placeholder:__("来问我呀，雀雀很高兴为你服务！"),autoSize:{minRows:1,maxRows:4},ref:l,className:E,bordered:!1,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),null==r||r(a))},onChange:function(e){c(e.target.value)}}),o.a.createElement("div",{className:S,onClick:function(){return null==r?void 0:r(a)}},o.a.createElement(f.b,{name:"IconSendSolid",className:j})))},C=o.a.forwardRef(k),I=(r(418),r(112)),A=(r(183),r(104)),D=(r(145),r(42)),T=(r(3063),r(1883)),L=r(179),N=r.n(L),R=r(536),M=r(663),B=r(255),F="Dialogs-module_completion_q+KSZ",G="Dialogs-module_pair_j2j76",W="Dialogs-module_item_ZHTYl",z="Dialogs-module_questionContentWrapper_Tbz2v",U="Dialogs-module_userName_lLYkG",H="Dialogs-module_content_hLq6l",V="Dialogs-module_text_1feXF",q="Dialogs-module_completionContentWrapper_pvqQB",K="Dialogs-module_images_B2lsH",Y="Dialogs-module_image_u-bOO",Q="Dialogs-module_textWrapper_s7kJe",X="Dialogs-module_operateList_L0E9H",J="Dialogs-module_operateItem_CrZfR",Z="Dialogs-module_operateIcon_suq+E",$="Dialogs-module_operateText_VSCAq",ee="Dialogs-module_unLike_SHJe7",te="Dialogs-module_referenceListWrapper_4BwFB",re="Dialogs-module_referenceListHeader_jq+CW",ne="Dialogs-module_source_lZKbW",oe="Dialogs-module_docIcon_nHMoV",ie="Dialogs-module_title_kNpF2",ae="Dialogs-module_loadingViewWrapper_XpmTR",ce="Dialogs-module_loadingSkeleton1_5wasz",le="Dialogs-module_loadingSkeleton2_5v1J2",ue="Dialogs-module_FAQListContainer_Py05Z",se="Dialogs-module_FAQListLinkBtn_nPiPh",fe="Dialogs-module_FAQListLinkBtnText_DNG4X",de="Dialogs-module_FAQListLinkBtnIcon_E02I7",pe="Dialogs-module_addFAQ_f53-b";function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function he(e){return function(e){if(Array.isArray(e))return _e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||we(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(){ve=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(x([])));y&&y!==t&&r.call(y,i)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==me(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function ye(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function be(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ye(i,n,o,a,c,"next",e)}function c(e){ye(i,n,o,a,c,"throw",e)}a(void 0)}))}}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||we(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){if(e){if("string"==typeof e)return _e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_e(e,t):void 0}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oe=function(){var e,t=Object(s.f)((function(e){return e.group})),r=Object(M.a)(y.a.groupAssistant.listFAQ),o=Object(M.a)(y.a.groupAssistant.addFAQ),i=Object(M.a)(y.a.groupAssistant.removeFAQ),a=ge(Object(n.useState)([]),2),c=a[0],l=a[1],u=function(){var e=be(ve().mark((function e(r){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(c.filter((function(e){return e.id!==r}))),e.next=3,i.request({promptId:r,groupId:t.id});case 3:m.a.success(__("已成功移除问题"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=be(ve().mark((function e(r){var n;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.request({groupId:t.id,prompt:r});case 3:(n=e.sent)&&(l([].concat(he(c),[n])),m.a.success(__("已添加"))),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",m.a.error(__("添加失败")));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=be(ve().mark((function e(){var n;return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({id:t.id});case 2:n=e.sent,l(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){d()}),[t.id]),{loading:r.loading,data:c,removeFAQ:u,addFAQ:f,listFAQ:d,ability:null==t||null===(e=t.abilities)||void 0===e?void 0:e.manage,group:t}},Ee=function(e){var t=e.commitPrompt,r=e.data,n=e.removeFAQ,i=e.ability;return null!=r&&r.length?o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{mb:12,variant:"title",ml:16},__("或许你想了解：")),o.a.createElement(T.a,{className:ue,size:8,direction:"vertical"},r.map((function(e){return o.a.createElement("div",{className:se},o.a.createElement(w.a,{onClick:function(){t(e.prompt)},variant:"link",className:fe},e.prompt),i&&o.a.createElement(p.a,{title:__("移除该问题")},o.a.createElement(w.a,{onClick:function(){return n(e.id)},component:f.b,componentProps:{name:"nopin-outlined",size:16},className:de})))})))):null},Se=function(e){var t,r,n=e.pair,i=e.renderOperate,a=e.commitPrompt,c=e.FAQHook,l=Object(R.a)().isDarkMode,u=function(){var e=n.images;return null!=e&&e.length?o.a.createElement("div",{className:K},e.map((function(t,r){return o.a.createElement("div",{className:Y,key:r,style:{backgroundImage:"url(".concat(t,")")},onClick:function(){var t=e.map((function(e){return{src:e,msrc:e}}));Object(B.getImageBrowser)().open(t,r)}})}))):null},s=n.paragraphs||[n.completion||""];return n.type===v.a.System?o.a.createElement("div",{className:q},o.a.createElement("div",{className:H},o.a.createElement("div",{className:Q},o.a.createElement("span",{className:V},n.completion)),o.a.createElement(Ee,{data:c.data,removeFAQ:c.removeFAQ,commitPrompt:a,ability:c.ability}))):o.a.createElement("div",{className:q},o.a.createElement("div",{className:H},o.a.createElement("div",{className:Q},s.map((function(e,t){return o.a.createElement("span",{className:V,key:t},e)}))),n.isValid&&(null==u?void 0:u()),!(null==n||null===(t=n.reference)||void 0===t||null===(r=t.chunks)||void 0===r||!r.length)&&n.isValid&&o.a.createElement("div",{className:te},o.a.createElement("div",{className:re},__("信息来源：")),n.reference.chunks.map((function(e,t){var r,n,i,a,c,u,s=null!==(r=e.url)&&void 0!==r&&r.startsWith("/")?"".concat(window.location.origin).concat(e.url):e.url;return o.a.createElement("a",{key:t,className:ne,href:s,target:"_blank"},o.a.createElement(f.b,{className:oe,name:l?"DocTypeDefaultDark":"DocTypeDefault"}),o.a.createElement("span",{className:ie},(i=(n=e).showTitle,a=n.chunkTitle,c=n.title,u=n.content,i&&a?"《".concat(i,"》- ").concat(a):c||u)))}))),0!==n.id&&(null==i?void 0:i(n))))};function je(e,t){var r=e.conversationId,i=e.completions,a=e.user,l=Object(c.d)(),s=Object(n.useRef)(null),d=Oe();Object(n.useEffect)((function(){v(!0)}),[]);var v=function(){var e;arguments.length>0&&void 0!==arguments[0]&&arguments[0]?null===(e=s.current)||void 0===e||e.scroll({left:0,top:s.current.scrollHeight}):setTimeout((function(){var e;null===(e=s.current)||void 0===e||e.scroll({left:0,top:s.current.scrollHeight,behavior:"smooth"})}),300)};o.a.useImperativeHandle(t,(function(){return{onCompletionsUpdated:function(){l(),v()},scrollToBottom:v}}),[s.current]);var b=function(){var e=be(ve().mark((function e(t,n){return ve().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.feedback!==n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y.a.conversation.feedback({conversation_id:r,completion_id:t.id,feedback:n});case 4:e.sent.success&&(t.feedback=n,l());case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g=function(e){var t=h.FEEDBACK_TYPE.POSITIVE===e.feedback,r=h.FEEDBACK_TYPE.NEGATIVE===e.feedback;return o.a.createElement("div",{className:X},o.a.createElement("div",{className:J,onClick:function(){return b(e,h.FEEDBACK_TYPE.POSITIVE)}},o.a.createElement(f.b,{className:Z,name:t?"IconLikeSolid":"Like"})),o.a.createElement("div",{className:u()(J,ee),onClick:function(){return b(e,h.FEEDBACK_TYPE.NEGATIVE)}},o.a.createElement(f.b,{className:Z,name:r?"IconLikeSolid":"Like"})),o.a.createElement("div",{className:J,onClick:function(){N()(e.completion||""),m.a.success(__("已复制到剪贴板"))}},o.a.createElement(f.b,{name:"ActionCopy",className:Z}),o.a.createElement("span",{className:$},__("复制"))))},w=function(){return o.a.createElement("div",{className:ae},o.a.createElement(I.a,{title:{size:"sm"},paragraph:!1,active:!0,className:ce}),o.a.createElement(I.a,{title:{size:"sm"},paragraph:!1,active:!0,className:le}))};return o.a.createElement("div",{className:u()(F,e.className),ref:s},r?i.map((function(t){return o.a.createElement("div",{className:G,key:t.id},t.prompt&&o.a.createElement("div",{className:W},o.a.createElement("div",{style:{flex:1}}),o.a.createElement("div",{className:z},o.a.createElement("div",{className:U},a.name),d.ability?o.a.createElement(A.a,{overlayClassName:pe,trigger:"click",content:o.a.createElement(D.a,null,o.a.createElement(p.a,{title:__("添加到常用问题")},o.a.createElement(f.b,{size:16,name:"PinOutlined",onClick:function(){return d.addFAQ(t.prompt)}})))},o.a.createElement("div",{className:H},o.a.createElement("span",{className:V},t.prompt))):o.a.createElement("div",{className:H},o.a.createElement("span",{className:V},t.prompt)))),o.a.createElement("div",{className:W},t.completion?o.a.createElement(Se,{pair:t,renderOperate:g,commitPrompt:e.commitPrompt,FAQHook:d}):w()))})):w())}var xe=Object(n.memo)(o.a.forwardRef(je));function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e,t,r){return t=function(e){var t=function(e,t){if("object"!==Pe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pe(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ie(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function De(e){var t,r=e.completion,n=e.reference,o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){Ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),i=[];null==n||null===(t=n.chunks)||void 0===t||t.forEach((function(e){var t,r;null===(t=e.extras)||void 0===t||null===(r=t.externalRefs)||void 0===r||r.forEach((function(e){"image"===e.type&&e.url&&i.push(e.url)}))})),o.images=i,o.isValid=function(e){if(!e)return!1;for(var t=0,r=["无法回答该问题","知识库没有提供足够的相关信息","我只能回答知识库相关的问题"];t<r.length;t++){var n=r[t];if(e.indexOf(n)>=0)return!1}return!0}(r);try{var a=function(e){if(e){var t=/(\d+\.)\s*/g;if(e.match(t)){var r,n="",o=0,i=0,a=[],c=/^(\d+)\./,l=Ie(e.split(t));try{for(l.s();!(r=l.n()).done;){var u=r.value;if(u=u.trim()){var s=u.match(c);if(s&&s.length>=2){var f=parseInt(s[1],10);if(!f||f<=0)return;if(i>0&&f!==i+1)return;n&&a.push(n),++o,i=f,n="".concat(u," ")}else n+=u}}}catch(e){l.e(e)}finally{l.f()}return""!==n&&a.push(n),o>=2&&a.length>=2?a:void 0}}}(r);null!=a&&a.length&&(o.paragraphs=a)}catch(e){}return o}var Te={contentWrapper:"index-module_contentWrapper_ywxL8",headerWrapper:"index-module_headerWrapper_iJ-cc",aiLogoWrapper:"index-module_aiLogoWrapper_xYww2",aiIcon:"index-module_aiIcon_CmNTn",aiTitle:"index-module_aiTitle_IyWYq",operateWrapper:"index-module_operateWrapper_7tKQg",iconWrapper:"index-module_iconWrapper_aWseD",icon:"index-module_icon_p4VWU",footerWrapper:"index-module_footerWrapper_73nUe",technicalSupportWrapper:"index-module_technicalSupportWrapper_1z-r2",normalContentWrapper:"index-module_normalContentWrapper_AcoZt",input:"index-module_input_wXeyg",betaTag:"index-module_betaTag_qOeVX",betaTagOnTitle:"index-module_betaTagOnTitle_5CpbM"};function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){Me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Me(e,t,r){return t=function(e){var t=function(e,t){if("object"!==Le(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Le(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Be(){Be=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(x([])));y&&y!==t&&r.call(y,i)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==Le(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function Fe(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function Ge(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Fe(i,n,o,a,c,"next",e)}function c(e){Fe(i,n,o,a,c,"throw",e)}a(void 0)}))}}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ue(e){var t=e.className,r=void 0===t?"":t;return o.a.createElement("img",{src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*aZeASKSOaUkAAAAAAAAAAAAADvuFAQ/original",className:u()(Te.betaTag,r)})}var He=Object(n.memo)(Object(g.b)((function(e){var t=e.user,r=e.group,i=e.visible,a=r.id||0,l=window.appData||{},s=l.isYuque,g=l.me,_=We(Object(n.useState)(i),2),O=_[0],E=_[1],S=We(Object(n.useState)(0),2),j=S[0],x=S[1],P=We(Object(n.useState)([]),2),k=P[0],I=P[1],A=We(Object(n.useState)(!1),2),D=A[0],T=A[1],L=Object(n.useRef)(),N=Object(n.useRef)(null),R=Object(c.d)();Object(n.useEffect)((function(){E(e.visible)}),[e.visible]),Object(n.useEffect)((function(){var e=document.querySelector(".ai-conversation-panel");if(e){var t=s?g.id:g.work_id;Object(b.b)({el:e,text:"".concat(null==g?void 0:g.name,"(").concat(t,")"),style:{width:160},backgroundImage:null})}}),[]),Object(n.useEffect)((function(){y.a.conversation.list({group_id:a}).then(function(){var e=Ge(Be().mark((function e(t){var r,n,o,i,c,l,u;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.conversations,o=[],null==n||!n.length){e.next=11;break}return c=n[0],e.next=6,y.a.conversation.findOne({id:c.id});case 6:l=e.sent,x(c.id),o=(null==l||null===(i=l.conversation)||void 0===i?void 0:i.completions)||[],e.next=15;break;case 11:return e.next=13,y.a.conversation.create({group_id:a});case 13:u=e.sent,x(u.conversation_id);case 15:o.unshift({id:0,prompt:"",completion:__("你好{userName} 👋🏻，有什么可以帮助你？",{userName:g.name}),type:v.a.System}),T(!1),I(o.map(De)),null===(r=N.current)||void 0===r||r.scrollToBottom();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[r]),Object(n.useEffect)((function(){var e;O&&(null===(e=N.current)||void 0===e||e.scrollToBottom(!0))}),[O]);var M=function(){var e=Ge(Be().mark((function e(){var t;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.conversation.create({group_id:a});case 2:t=e.sent,x(t.conversation_id),I([{id:0,prompt:"",completion:__("你好{userName} 👋🏻，有什么可以帮助你？",{userName:g.name}),type:v.a.System}]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Ge(Be().mark((function e(t){var r,n,o,i,a,c,l,u,s,f,d;return Be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:if(!D){e.next=5;break}return m.a.info(__("我正在回答上一个问题，请等一等")),e.abrupt("return");case 5:return T(!0),k.push({id:0,prompt:t,feedback:h.FEEDBACK_TYPE.UNKNOWN}),null===(r=N.current)||void 0===r||r.onCompletionsUpdated(),null===(n=L.current)||void 0===n||n.clear(),null===(o=L.current)||void 0===o||o.focus(),i=k.length-1,a=function(e){var t;k[i]=De(Re(Re({},k[i]),e)),R(),null===(t=N.current)||void 0===t||t.onCompletionsUpdated()},e.prev=12,e.next=15,y.a.conversation.completion({conversation_id:j,prompt:t});case 15:c=e.sent,(l=c.completion)?(u=l.id,s=l.completion,f=l.reference,a({id:u,completion:s,reference:f})):a({completion:__("你这个问题我还回答不了，换个问题吧")}),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(12),d=__("抱歉刚刚走神了，请再问一次哦"),429===e.t0.status&&(d=__("提问过于频繁，请稍候再试")),a({completion:d});case 25:T(!1);case 26:case"end":return e.stop()}}),e,null,[[12,20]])})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:u()(Te.contentWrapper,Te.normalContentWrapper)},o.a.createElement("div",{className:Te.headerWrapper},o.a.createElement("div",{className:Te.aiLogoWrapper},o.a.createElement(d.a,{src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*bKneSq4nY-gAAAAAAAAAAAAADvuFAQ/original",darkAlpha:.7,className:Te.aiIcon}),o.a.createElement("div",{className:Te.aiTitle},__("团队 AI 助手")),o.a.createElement(Ue,{className:Te.betaTagOnTitle})),o.a.createElement("div",{className:Te.operateWrapper,onClick:M},o.a.createElement(w.a,{fontSize:14,type:"strong",variant:"title"},__("换个话题")),o.a.createElement(p.a,{title:__("每次问答都会关联上文，如果是全新的问题，及时点击“换个话题”会更准确哦。"),placement:"bottom"},o.a.createElement("div",{className:Te.iconWrapper},o.a.createElement(f.b,{name:"Change",className:Te.icon}))))),o.a.createElement(xe,{className:Te.bodyWrapper,conversationId:j,completions:k,user:t,ref:N,commitPrompt:B}),o.a.createElement("div",{className:Te.footerWrapper},o.a.createElement(C,{ref:L,className:Te.input,autoFocus:!0,placeholder:__("请输入你的问题进行问答"),onEnter:B})))}))),Ve="index-module_aiAssistantWrapper_1H4UO",qe="index-module_rotateWrapper_b4Zh-",Ke="index-module_iconWrapper_IFVyf",Ye="index-module_botIcon_ZiXJu",Qe="index-module_botIconImg_mXRHu",Xe="index-module_rotateWrapperHidden_koaTF",Je="index-module_robotWrapper_Ek-pd",Ze="index-module_rotateWrapperVisible_Ri40K",$e="index-module_arrowDownWrapper_ZBt2h",et="index-module_arrowDownIcon_f9NgK",tt="index-module_conversationPanelWrapper_-s8tz",rt="index-module_conversationPanelVisibleWrapper_f6cTQ";function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function ot(e,t,r){return t=function(e){var t=function(e,t){if("object"!==nt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nt(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return at(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return at(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ct(){var e,t=it(Object(n.useState)(!1),2),r=t[0],i=t[1],a=Object(n.useRef)(!1),l=Object(s.f)((function(e){return{group:e.group,book:e.book}})),p=l.group,m=l.book.id,h=p.abilities.manage,v=Object(c.c)(),y=Object(n.useMemo)((function(){return r&&(a.current=!0),a.current?o.a.createElement(He,{visible:r,group:p,bookId:m,user:window.appData.me,isGroupManage:h}):null}),[r,p,m,h]);return v?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:Ve},o.a.createElement("div",{className:u()(qe,(e={},ot(e,Xe,!r),ot(e,Ze,r),e)),onClick:function(){i(!r)}},o.a.createElement("span",{className:u()(Ke,$e)},o.a.createElement(f.b,{name:"Close",className:et,width:16,height:16})),o.a.createElement("span",{className:u()(Ke,Je)},o.a.createElement("span",{className:Ye},o.a.createElement(d.a,{src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*a1sxRY5KTzQAAAAAAAAAAAAADvuFAQ/original",darkAlpha:.7,className:Qe}))))),o.a.createElement("div",{className:u()(tt,"ai-conversation-panel",ot({},rt,r))},y)):null}var lt=Object(n.memo)(ct);t.a=function(){var e=Object(c.a)({id:"__yuque_ai_bubble"});return a.a.createPortal(o.a.createElement(lt,null),e)}},4559:function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));r(55);var n=r(22),o=r(0),i=r.n(o),a=r(31),c=r(11),l=r.n(c),u=r(155),s=r(4156),f=r(4483),d=r(3810),p=r(3847),m={iconWrapper:"style-module_iconWrapper_bAMkc",editMode:"style-module_editMode_Qtazl",editModeActive:"style-module_editModeActive_qdlNh",icon:"style-module_icon_ucXPM",iconEditMode:"style-module_iconEditMode_55y65",disabled:"style-module_disabled_4E4EI",container:"style-module_container_5pQ7D",switchContent:"style-module_switchContent_FKoVH",switchActiveBg:"style-module_switchActiveBg_3DMlv",commentActive:"style-module_commentActive_dTftF",moreFeatureActive:"style-module_moreFeatureActive_zPkBd",isPrevNotActive:"style-module_isPrevNotActive_xWwFe"};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g={WordingComment:f.a.WordingComment,SideComment:f.a.SideComment,MoreFeature:f.a.MoreFeature,Outline:f.a.Outline};function w(){}var _=function(e){var t=e.enableComment,r=e.docType,n="Doc"===r,a=y(Object(o.useState)(null),2),c=a[0],l=a[1],f=Object(s.b)().sidePanelManager;return Object(o.useEffect)((function(){var e=f.subscribe((function(e){var t=e.currentPanel;e.visible?"EditDocMeta"===t||"Review"===t?l("MoreFeature"):t!==c&&l("MoreFeature"===t||"WordingComment"===t||"SideComment"===t||null===t?t:null):l(null)}));return function(){e()}}),[c]),i.a.createElement(u.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return i.a.createElement(O,{enableComment:t,isWordingComment:n,onTabClick:w,docType:r})}},i.a.createElement(O,{sidePanelManager:f,enableComment:t,isWordingComment:n,activeTab:c,onTabClick:function(e){c===e?(l(null),f.hide()):(l(e),f.show(e))},docType:r}))};function O(e){var t,r=e.activeTab,o=e.onTabClick,c=e.enableComment,u=e.isWordingComment,s=e.sidePanelManager,f=e.docType,h=null===Object(d.a)(r),y=Object(p.c)().editMode;return y&&"Table"!==f?i.a.createElement("div",{className:l()(m.iconWrapper,m.editMode,v({},m.editModeActive,r===g.MoreFeature)),onMouseOver:function(){s&&s.getPanelContent("MoreFeature").preload&&s.getPanelContent("MoreFeature").preload()},onClick:function(){return o(g.MoreFeature)}},i.a.createElement(a.b,{name:"Rightboard",className:m.iconEditMode})):i.a.createElement("div",{className:l()(m.container,(t={},v(t,m.commentActive,r===g.WordingComment||r===g.SideComment),v(t,m.moreFeatureActive,r===g.MoreFeature),v(t,m.isPrevNotActive,h),t))},i.a.createElement("div",{className:m.switchActiveBg}),i.a.createElement("div",{className:m.switchContent},i.a.createElement("div",{className:l()(m.iconWrapper,v({},m.disabled,!c)),onMouseOver:function(){s&&s.getPanelContent("SideComment").preload&&s.getPanelContent("SideComment").preload()},onClick:function(){c?y&&"Table"!==f?n.a.info(__("编辑模式暂不支持划词评论")):o(u?g.WordingComment:g.SideComment):n.a.info(__("请开启知识库设置中的评论功能"))}},i.a.createElement(a.b,{name:"CommentReply",className:m.icon})),i.a.createElement("div",{className:m.iconWrapper,onMouseOver:function(){s&&s.getPanelContent("MoreFeature").preload&&s.getPanelContent("MoreFeature").preload()},onClick:function(){return o(g.MoreFeature)}},i.a.createElement(a.b,{name:"Rightboard",className:m.icon}))))}},4560:function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));r(183);var n=r(104),o=(r(61),r(23)),i=r(0),a=r(155),c=r(630),l=(r(3063),r(1883)),u=(r(230),r(65)),s=(r(95),r(38)),f=(r(55),r(22)),d=(r(84),r(45)),p=r(11),m=r.n(p),h=r(429),v=r(35),y=r(24),b=r(1605),g=r(3556),w=r(146),_=r(32),O=r(58),E=r(88),S=r(158),j=r(304),x=r(1503),P={popover:"index-module_popover_qKMQ0",shareIcon:"index-module_shareIcon_2tsVL",cardArea:"index-module_cardArea_4ySac",radioOption:"index-module_radioOption_QzUCq",disabledOption:"index-module_disabledOption_6kUkH",tooltip:"index-module_tooltip_ck55t",memberAbleIcon:"index-module_memberAbleIcon_cDHHk"};function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function C(){C=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(x([])));y&&y!==t&&r.call(y,i)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==k(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){T(i,n,o,a,c,"next",e)}function c(e){T(i,n,o,a,c,"throw",e)}a(void 0)}))}}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=function(e){var t=e.doc,r=e.book,n=e.group,o=e.organization,a=e.me,c=i.useRef(!1),p=Object(h.e)(),k=N(d.a.useModal(),2),I=k[0],T=k[1],R=i.useMemo((function(){var e=null!=o&&o.id?E.a.ORG:E.a.PERSON;return Object(S.a)()?e:E.a.INTERNAL}),[o]),M=Object(x.a)(),B=!Object(w.f)(n),F=!M.interests[O.INTEREST_CODE.create_public_resource],G=function(){var e;null===(e=window.__member_message_ref)||void 0===e||e.current.showMemberIntro(_.LIMIT_SCENE.share_public)},W=function(){if((null==o||!o.id)&&"User"===(null==n?void 0:n.type)&&F)return n.id===a.id?__("会员可公开内容至互联网 {btn}",{btn:i.createElement("a",{onClick:G,style:{marginLeft:"5px"}},__("购买会员"))}):__("联系知识库所有者购买会员可公开内容至互联网")},z=function(){var e=L(C().mark((function e(r){var n,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=A(A({},r),{},{id:t.id}),e.next=3,v.a.docs.updateMeta(n,{ignoreGlobalMessage:!0});case 3:o=e.sent,p({type:"doc/update",payload:{public:o.public}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();i.useEffect((function(){var e=function(){var e=L(C().mark((function e(){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visible"!==document.visibilityState||!c.current){e.next=5;break}return e.next=3,v.a.docs.findOne({id:t.id,book_id:r.id},{});case 3:n=e.sent,t.public!==n.public&&p({type:"doc/update",payload:{public:n.public}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return document.addEventListener("visibilitychange",e,!0),function(){document.removeEventListener("visibilitychange",e,!0)}}),[]);var U=function(){var e=L(C().mark((function e(r){var n,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==y.PRIVACY.public||!F){e.next=2;break}return e.abrupt("return");case 2:if(r!==y.PRIVACY.public){e.next=33;break}if(Object(S.a)()){e.next=27;break}return e.prev=4,e.next=7,z({public:r});case 7:e.next=27;break;case 9:if(e.prev=9,e.t0=e.catch(4),n=b.TargetType.Doc,o=b.WorkflowType.DocPublicPrivacyWorkflow,(null===e.t0||void 0===e.t0?void 0:e.t0.errorCode)!==y.PUBLIC_SET_CODE.public_has_approve){e.next=17;break}return c.current=!0,S.b.windowOpen("/g/approve_workflow?target_id=".concat(t.id,"&target_type=").concat(n,"&type=").concat(o)),e.abrupt("return");case 17:if((null===e.t0||void 0===e.t0?void 0:e.t0.errorCode)!==y.PUBLIC_SET_CODE.public_need_approve){e.next=26;break}return e.next=20,Object(j.f)(E.b.DOC,I);case 20:if(e.sent){e.next=23;break}return e.abrupt("return");case 23:return c.current=!0,S.b.windowOpen("/g/approve_workflow?target_id=".concat(t.id,"&target_type=").concat(n,"&type=").concat(o)),e.abrupt("return");case 26:f.a.error((null===e.t0||void 0===e.t0?void 0:e.t0.message)||__("操作失败"));case 27:if(!Object(S.a)()){e.next=33;break}return e.next=30,Object(j.f)(E.b.DOC,I);case 30:if(e.sent){e.next=33;break}return e.abrupt("return");case 33:if(r!==y.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE){e.next=37;break}return e.next=36,z({public:y.PRIVACY.private});case 36:return e.abrupt("return");case 37:return e.next=39,z({public:r});case 39:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}();return i.createElement("div",{className:P.cardArea},i.createElement(u.a.Group,{buttonStyle:"solid",value:t.public===y.PRIVACY.private&&r.extend_private===y.EXTEND_PRIVATE.BIND_DEPARTMENTS?y.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE:t.public,onChange:function(e){return U(e.target.value)}},i.createElement(l.a,{direction:"vertical",size:16,style:{display:"flex"}},j.a[R].action.map((function(e){var t;if(R===E.a.INTERNAL){if(e.value===y.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE&&r.extend_private===y.EXTEND_PRIVATE.NONE)return null;if(e.value===y.PRIVACY.private&&r.extend_private===y.EXTEND_PRIVATE.BIND_DEPARTMENTS)return null}var a=e.value===y.PRIVACY.public&&F,c=i.createElement(i.Fragment,null,i.createElement("span",{className:P.label},e.label),e.value===y.PRIVACY.public&&B&&i.createElement(g.a,{className:P.memberAbleIcon,noTooltip:!0,group:n,organization:o,isYuque:Object(S.a)()}));return i.createElement(u.a,{key:"docPublicSet-".concat(e.value),value:e.value,disabled:a,className:m()(P.radioOption,D({},P.disabledOption,a))},a?i.createElement(s.a,{overlayClassName:P.tooltip,title:a?i.createElement(i.Fragment,null,R===E.a.ORG&&i.createElement("span",null,null===(t=e.tip)||void 0===t?void 0:t.call(e,o)),R===E.a.PERSON&&i.createElement("span",null,W())):void 0,placement:"right",autoAdjustOverflow:!0},c):c)})))),T)},B=function(e){var t=e.doc,r=e.book,a=e.group,l=e.organization,u=e.me,s=e.canShare,f=e.style;return i.createElement(i.Fragment,null,s?i.createElement(n.a,{overlayClassName:P.popover,content:i.createElement(M,{doc:t,book:r,group:a,organization:l,me:u}),trigger:["click"],placement:"bottom",destroyTooltipOnHide:!0,noArrow:!0},i.createElement(o.a,{type:"text",className:P.shareIcon,style:f,icon:i.createElement(c.b,{book:r,group:a,doc:t,organization:l,onlyIcon:!0})})):i.createElement(c.b,{book:r,group:a,doc:t,organization:l}))},F=function(e){var t=e.doc,r=e.book,n=e.group,o=e.organization;return i.createElement(a.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return i.createElement(c.b,{book:r,group:n,doc:t,organization:o})}},i.createElement(B,e))}},4570:function(e,t,r){"use strict";r(95);var n=r(38),o=r(0),i=r.n(o),a=r(8),c=r.n(a),l=r(31),u=r(316),s=r(29),f=r.n(s),d="index-module_saveTip_xnDOu";function p(e){var t=e.doc,r=e.saving,o=e.mode,a=e.autoPublish,c=e.showHistory,s=e.savedAt,p=function(){if(!0===r)return e.showTime?i.a.createElement("span",null,a?__("正在保存并发布..."):__("正在保存...")):i.a.createElement("span",null,__("保存中..."));if(s){if(!e.showTime)return i.a.createElement("span",null,__("已保存"));var n=f()(s).format("H:mm:ss");return a?i.a.createElement("span",null,__("保存并发布于 {time}",{time:n})):i.a.createElement("span",null,__("保存于 {time}",{time:n}))}return e.showTime?t.last_editor&&0===t.status?"embed"===o?i.a.createElement("span",null,__("最后更改于 {time}",{time:i.a.createElement(u.a,{time:t.content_updated_at})})):i.a.createElement("span",null,__("{name} 最后更改于 {time}",{name:i.a.createElement("a",{href:"/".concat(t.last_editor.login),target:"_blank"},t.last_editor.name),time:i.a.createElement(u.a,{time:t.content_updated_at})})):t.content_updated_at?i.a.createElement("span",null,__("最后更改于{time}",{time:i.a.createElement(u.a,{time:t.content_updated_at})})):null:null}(),m=i.a.createElement("span",{className:d,onClick:function(e){return function(e){var t;"a"!==(null===(t=e.target)||void 0===t?void 0:t.tagName.toLowerCase())&&c&&c()}(e)}},p,i.a.createElement(l.b,{name:"cloud",width:16}));return p&&c?i.a.createElement(n.a,{title:__("查看历史版本"),trigger:["hover","click"],placement:"bottom"},m):m}p.defaultProps={showTime:!0},p.propTypes={saving:c.a.bool,savedAt:c.a.instanceOf(Date),autoPublish:c.a.bool,doc:c.a.object,mode:c.a.string,book:c.a.object,showTime:c.a.bool,showHistory:c.a.func};t.a=p},4587:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(){return window.self!==window.top}},4588:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(139);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function l(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}var s=function(e){try{return JSON.parse(e)}catch(e){return{}}},f=function(){function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{tab:"Catalog",sort:"content_updated_at"};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fallbackValue=o,l(this,"namespace","ACTIVE_TAB_KEY"),l(this,"key",void 0),this.key="".concat(t.id,"/").concat(r.id,"/").concat(n.id)}var t,r,o;return t=e,(r=[{key:"getValue",value:function(){return(s(n.a.get(this.namespace))||{})[this.key]||this.fallbackValue}},{key:"setValue",value:function(e){var t=s(n.a.get(this.namespace))||{};t[this.key]=a(a(a({},this.fallbackValue),t[this.key]||{}),e),n.a.set(this.namespace,JSON.stringify(t))}},{key:"getTab",value:function(){var e,t;return null!==(e=null===(t=this.getValue())||void 0===t?void 0:t.tab)&&void 0!==e?e:this.fallbackValue.tab}},{key:"setTab",value:function(e){this.setValue({tab:e})}},{key:"getSort",value:function(){var e,t;return null!==(e=null===(t=this.getValue())||void 0===t?void 0:t.sort)&&void 0!==e?e:this.fallbackValue.sort}},{key:"setSort",value:function(e){this.setValue({sort:e})}}])&&c(t.prototype,r),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},4600:function(e,t,r){"use strict";r.r(t);r(55);var n=r(22),o=(r(145),r(42)),i=r(0),a=r.n(i),c=r(888),l=r(1908),u=r(1924),s=r(890),f=r(887),d=r(3809),p=r(35),m=r(1524),h=r(4110),v=r(3164),y=r(636),b=r(58),g=r(409),w={bookOverviewMoreActionsOverlay:"bookOverviewMoreSetting-module_bookOverviewMoreActionsOverlay_LvPUV",memberIcon:"bookOverviewMoreSetting-module_memberIcon_2acB1",actionIconDelete:"bookOverviewMoreSetting-module_actionIconDelete_XULUN",actionTextDelete:"bookOverviewMoreSetting-module_actionTextDelete_LtGB1"};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function O(){O=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:E(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==t&&r.call(y,i)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==_(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function E(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){E(i,n,o,a,c,"next",e)}function c(e){E(i,n,o,a,c,"throw",e)}a(void 0)}))}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t,r,i,_,E=e.book,x=e.group,P=e.showBasicSettings,k=void 0===P||P,C=e.showMoreSettings,I=void 0===C||C,A=e.showDelete,D=void 0!==A&&A,T=window.appData.organization;if(!E.abilities)return null;var L=null===(t=E.abilities)||void 0===t?void 0:t.create_doc,N=null===(r=E.abilities)||void 0===r?void 0:r.read_private,R=null===(i=E.abilities)||void 0===i?void 0:i.manage,M=null===(_=E.abilities)||void 0===_?void 0:_.destroy,B=j(a.a.useState(!1),2),F=B[0],G=B[1];function W(){return(W=S(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.books.destroy({id:E.id});case 3:n.a.success(__("操作成功"),3),G(!1),setTimeout((function(){window.location.href="/".concat(x.login)}),300),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n.a.error(__("操作失败"),3);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return N?a.a.createElement(v.a,{direction:"horizontal",className:e.className,overlayClassName:w.bookOverviewMoreActionsOverlay,getPopupContainer:e.getPopupContainer||function(e){return e.parentNode},placement:e.placement||"bottomLeft",isMenuType:!1,content:a.a.createElement(o.a,{selectable:!1,mode:"vertical"},e.prepend,(I||k)&&[{key:"permission",href:"/r/".concat(x.login,"/").concat(E.slug,"/collaborators"),icon:a.a.createElement(c.default,{width:16,height:16,className:w.actionIcon}),name:__("权限"),enabled:N&&k},{key:"statistics",href:"/r/".concat(x.login,"/").concat(E.slug,"/statistics"),icon:a.a.createElement(l.default,{width:16,height:16,className:w.actionIcon}),name:__("统计"),enabled:R&&k},{key:"toc",href:"/r/".concat(x.login,"/").concat(E.slug,"/toc"),icon:a.a.createElement(u.default,{width:16,height:16,className:w.actionIcon}),name:__("目录管理"),enabled:L&&k},{key:"setting",href:"/".concat(x.login,"/").concat(E.slug,"/settings/basic"),icon:a.a.createElement(s.default,{width:16,height:16,className:w.actionIcon}),name:__("更多设置"),enabled:L&&I}].map((function(e){if(!e.enabled)return null;var t="statistics"===e.key;return a.a.createElement(o.a.Item,{key:e.key,onClick:S(O().mark((function r(){return O().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t||h.a.hasAbility()){r.next=3;break}return h.a.showMemberIntro(),r.abrupt("return");case 3:Object(g.b)({targetUrl:e.href,isNewWindow:!0},(function(){Object(y.b)(e.href,{page:"bookManage"})}));case 4:case"end":return r.stop()}}),r)}))),icon:e.icon},a.a.createElement("span",{"data-setting-url":e.href},e.name),t&&a.a.createElement(d.a,{className:w.memberIcon,group:x,code:b.INTEREST_CODE.book_statistics,organization:T}))})),D&&M&&a.a.createElement(a.a.Fragment,null,a.a.createElement(o.a.Divider,{key:"divider-1"}),a.a.createElement(o.a.Item,{key:"delete",icon:a.a.createElement(f.default,{width:16,height:16,className:w.actionIconDelete}),onClick:function(){return G(!0)}},a.a.createElement("span",{className:w.actionTextDelete},__("删除"))),F&&a.a.createElement(m.a,{visible:F,book:E,onDelete:function(){return W.apply(this,arguments)},closeModal:function(){G(!1)}})))}):null}},4642:function(e,t,r){"use strict";r(95);var n=r(38),o=(r(183),r(104)),i=(r(55),r(22)),a=r(0),c=r.n(a),l=r(39),u=r(8),s=r.n(u),f=r(11),d=r.n(f),p=r(120),m=r.n(p),h=r(429),v=r(67),y=r(3615),b=r.n(y),g=r(249),w=r.n(g),_=r(1500),O=r.n(_),E=r(420),S=r(3187),j=r(198),x=r(1423),P=r(1922),k=r(31),C=r(574),I=r(562),A=r(53),D=r(536),T=r(905),L=r(4411),N=r(4542),R=r(4447),M=r(4143),B=r(4456),F=r(3571),G=r(4513),W=r(3184),z=r(207),U=r(3169),H=r(4013),V=r(4543),q=r(3629),K=r(35),Y=r(3697),Q=r(4406),X=(r(61),r(23)),J=r(29),Z=r.n(J),$=r(160),ee=r(32),te="ReaderTrialTip-module_wrapper_OXnjx",re="ReaderTrialTip-module_popover_UmsWw",ne="ReaderTrialTip-module_img_wrvlK",oe="ReaderTrialTip-module_content_-4R3d",ie="ReaderTrialTip-module_title_6NWWY",ae="ReaderTrialTip-module_list_005xm",ce="ReaderTrialTip-module_item_o3ZxA",le="ReaderTrialTip-module_icon_ZqInb",ue="ReaderTrialTip-module_bold_mC3sw",se="ReaderTrialTip-module_button_pGJVj",fe="ReaderTrialTip-module_bg_OfSs9",de="ReaderTrialTip-module_tip_Pnf1Y";var pe=function(e){var t=e.me,r=e.group,n=e.organization,i=t.isTrial,a=t.expired_at;if(null!=n&&n.id)return null;if("Group"===r.type)return null;if(!(i&&t.id===r.id))return null;var l=Z()(a).diff(Z()(),"days");return c.a.createElement(o.a,{placement:"bottomLeft",overlayClassName:te,getPopupContainer:function(e){return e.parentNode},content:c.a.createElement("div",{className:re},c.a.createElement($.a,{className:ne,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*2wZjTKpA734AAAAAAAAAAAAADvuFAQ/original",darkSrc:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*a_77Q5IGMCoAAAAAAAAAAAAADvuFAQ/original"}),c.a.createElement("div",{className:oe},c.a.createElement("p",{className:ie},__("试用专业会员权益")),c.a.createElement("ul",{className:ae},c.a.createElement("li",{className:ce},c.a.createElement("span",{className:le}),c.a.createElement("span",{className:ue},__("无限")),__("文稿和知识库#trial")),c.a.createElement("li",{className:ce},c.a.createElement("span",{className:le}),__("邀请")," ",c.a.createElement("span",{className:ue}," ",__("50 个")),__("好友协作")),c.a.createElement("li",{className:ce},c.a.createElement("span",{className:le}),c.a.createElement("span",{className:ue},"500MB "),__("附件上传#trial")),c.a.createElement("li",{className:ce},c.a.createElement("span",{className:le}),__("插入并播放#trial"),c.a.createElement("span",{className:ue},__("视频"))),c.a.createElement("li",{className:ce},c.a.createElement("span",{className:le}),__("文档对#trial"),c.a.createElement("span",{className:ue},__("互联网公开"))),c.a.createElement("li",{className:ce},c.a.createElement("span",{className:le}),c.a.createElement("span",{className:ue},__("公开")),__("我的花园"))),c.a.createElement(X.a,{className:se,type:"primary",onClick:function(){var e,t;null===(e=window.__member_message_ref)||void 0===e||null===(t=e.current)||void 0===t||t.showMemberIntro(ee.LIMIT_SCENE.read_trial_tip)}},__("立即升级")),c.a.createElement($.a,{className:fe,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*2RlmSawSoHwAAAAAAAAAAAAADvuFAQ/original",darkSrc:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*1jffRYP2mh8AAAAAAAAAAAAADvuFAQ/original"})))},c.a.createElement("div",{className:de},0===l?__("专业会员试用今天到期"):__("专业会员试用还有 {day} 天到期",{day:c.a.createElement("span",{style:{color:l<2?"#E4495B":"#00B96B"}},l)})))},me=r(4479),he=r(3847),ve=r(1607),ye={netStatus:"index-module_netStatus_p3BrJ"};function be(e){var t;return"offline"===e.netStatus&&(t=c.a.createElement(c.a.Fragment,null,c.a.createElement(ve.default,null),c.a.createElement("span",{className:""},__("断网状态下不支持编辑")))),c.a.createElement("div",{className:ye.netStatus},t)}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _e(){var e=ge(Object(a.useState)(""),2),t=e[0],r=e[1];return Object(a.useEffect)((function(){function e(){r("offline")}function t(){r("")}return window.addEventListener("offline",e),window.addEventListener("online",t),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t)}}),[]),c.a.createElement(be,{netStatus:t})}var Oe=r(4570),Ee="index-module_text_fdCRQ";function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xe(e){var t=e.editable,r=e.doc,n=Se(Object(a.useState)(!1),2),o=n[0],i=n[1],l=Se(Object(a.useState)(null),2),u=l[0],s=l[1],f=Se(Object(a.useState)(""),2),d=f[0],p=f[1];return Object(a.useEffect)((function(){function e(){p("offline")}function t(){p("")}function r(e){var t=e.detail,r=t.type,n=t.payload;"savingChanged"===r?i(n):"savedAtChanged"===r&&(s(n),i(!1))}return window.addEventListener("offline",e),window.addEventListener("online",t),window.addEventListener("table_sync_change",r),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t),window.removeEventListener("table_sync_change",r)}}),[]),t?"offline"===d?null:o||u?c.a.createElement(Oe.a,{doc:r,saving:o,savedAt:u,showHistory:!1,showTime:!1,autoPublish:!0}):c.a.createElement("span",{className:Ee},__("数据表当前页可直接编辑")):null}var Pe=r(178),ke=r.n(Pe),Ce=r(3577),Ie=r(246),Ae={avatar:"index-module_avatar_A3sqR",name:"index-module_name_Qc35G",sign:"index-module_sign_d9jTU",signInner:"index-module_signInner_y+xaX",more:"index-module_more_k7ofk",moreUsers:"index-module_moreUsers_sk4Xt"};function De(e){var t=e.user;return c.a.createElement("span",{className:Ae.avatar},c.a.createElement(Ie.a,{src:t.avatar_url,name:t.name,size:24}),t.color&&c.a.createElement("span",{className:Ae.sign},c.a.createElement("div",{className:Ae.signInner,style:{background:t.color}})))}function Te(e){var t=e.users,r=e.me,i=e.maxUsersToShow,a=void 0===i?9:i,l=[],u=[];return t.length<=a?l=t.slice(0,t.length):(l=t.slice(0,a),u=t.slice(a)),c.a.createElement(c.a.Fragment,null,l.map((function(e){return c.a.createElement(n.a,{title:e.name,key:e.id},c.a.createElement("span",null,c.a.createElement(De,{user:e})))})),u.length>0&&c.a.createElement(o.a,{placement:"bottom",content:c.a.createElement("ul",{className:Ae.moreUsers},u.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(De,{user:e}),c.a.createElement("a",{href:"/".concat(e.login),className:Ae.name,target:"_blank"},e.name))})))},c.a.createElement("a",{className:"".concat(Ae.avatar," ").concat(Ae.more)},"+",u.length)),c.a.createElement(n.a,{title:e.onlyMeTip||(0===t.length?__("语雀已支持多人同时编辑文档，当前编辑者的头像将显示在此"):__("我")),overlayStyle:{minWidth:"24px",width:e.onlyMeTip||0!==t.length?"unset":"192px"}},c.a.createElement("span",null,c.a.createElement(De,{user:r}))))}Te.propTypes={users:s.a.array.isRequired,me:s.a.object.isRequired,maxUsersToShow:s.a.number,onlyMeTip:s.a.string};var Le=Te;function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Me(e){var t=e.me,r=e.doc,n=Ne(Object(a.useState)([]),2),o=n[0],i=n[1],l=Ne(Object(a.useState)(null),2),u=l[0],s=l[1],f=ke()((null==o?void 0:o.filter((function(e){return e.id!==t.id})))||[],"login");return Object(a.useEffect)((function(){function e(e){var t=e.detail;s(t)}return window.addEventListener("edit_workflow_init",e),u&&u.on(Ce.i.collabUsersChange,(function(e){i(e)})),function(){window.removeEventListener("edit_workflow_init",e)}}),[u]),c.a.createElement(Le,{users:f,me:t,maxUsersToShow:"Table"===r.type?5:9,onlyMeTip:"Table"===r.type?__("我"):void 0})}var Be=r(1501);function Fe(e){var t=e.book,r=e.doc,o=Object(he.c)(),i=o.editMode,l=o.setEditMode;if(console.log("🚀 ~ file: ViewerHeaderEditSwitch.tsx:11 ~ ViewerHeaderEditSwitch ~ editMode:",i),window.__setEditMode=l,Object(a.useEffect)((function(){if(!i){var e=new URLSearchParams(window.location.search);if("doc_embed"===e.get("view")||e.get("inner"))return;if("Thread"===r.type)return;r.abilities&&r.abilities.update&&O()(Ce.e.edit.key,(function(e){var t=e.target;"INPUT"!==t.tagName&&(t.isContentEditable&&!t.classList.contains("textarea-cell")||("Sheet"===r.type||"Table"===r.type?Be.a.saveSheetPosition(r.id):Be.a.saveReadPosition(r.id),A.b&&Object(he.b)("get",r.slug)&&Object(he.b)("save",r.slug,!1),l(!0)))}))}return function(){O.a.unbind(Ce.e.edit.key)}}),[i]),!i)return c.a.createElement(n.a,{title:c.a.createElement("p",{style:{textAlign:"center"}},__("编辑")+__("：")+__("E")),placement:"bottom"},c.a.createElement(X.a,{type:"primary",onClick:function(){A.b&&Object(he.b)("get",r.slug)&&Object(he.b)("save",r.slug,!1),l(!0)}},__("编辑")));var u="inline_block";return A.b&&null!=t&&t.enable_auto_publish&&i&&(u="none"),c.a.createElement("div",{id:"publishButtonContainer",style:{marginRight:8,display:u}})}var Ge=r(4491),We=(r(98),r(37)),ze="index-module_nameTitle_PZiLN",Ue="index-module_editable_7Jdyy";function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qe=__("无标题"),Ke=function(e){var t=He(Object(a.useState)(!1),2),r=t[0],n=t[1],o=He(Object(a.useState)(e.title||qe),2),i=o[0],l=o[1];Object(a.useEffect)((function(){e.title!==i&&l(e.title||qe)}),[e.title]);var u=function(){var t=i||qe;e.saveTitle(t),l(t),n(!1)};return r?c.a.createElement(We.a,{autoFocus:!0,type:"text",maxLength:128,style:{width:200},value:i,onChange:function(e){l(e.target.value)},onFocus:function(e){r&&e.target.select()},onBlur:u,onPressEnter:u}):c.a.createElement("span",{className:"".concat(ze," ").concat(e.editable?Ue:""),title:i,onClick:function(){e.editable&&n(!0)}},i)};Ke.defaultProps={editable:!0},Ke.propTypes={title:s.a.string.isRequired,editable:s.a.bool,saveTitle:s.a.func.isRequired};var Ye=Ke,Qe=r(4150),Xe=r(3932),Je=r(4388),Ze=r(4560),$e=r(4559),et=r(4136),tt=r(4015);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function nt(){return nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nt.apply(this,arguments)}function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(r),!0).forEach((function(t){mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function at(){at=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(x([])));y&&y!==t&&r.call(y,i)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==rt(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function ct(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function lt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ct(i,n,o,a,c,"next",e)}function c(e){ct(i,n,o,a,c,"throw",e)}a(void 0)}))}}function ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ht(n.key),n)}}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=pt(e);if(t){var o=pt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dt(e)}(this,r)}}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}function mt(e,t,r){return(t=ht(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ht(e){var t=function(e,t){if("object"!==rt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rt(t)?t:String(t)}var vt=Object(T.d)((function(){return r.e(83).then(r.bind(null,5217))}),{suspense:!0}),yt=Object(T.d)((function(){return r.e(25).then(r.bind(null,4764))}),{suspense:!0}),bt=Object(T.d)((function(){return r.e(1142).then(r.bind(null,3657))}),{suspense:!0}),gt=Object(T.b)((function(){return r.e(1137).then(r.bind(null,3122)).then((function(e){return e.default.Login}))}),{suspense:!0}),wt=Object(T.b)((function(){return r.e(33).then(r.bind(null,3723)).then((function(e){return e.ShareButton}))}),{suspense:!0}),_t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(a,e);var t,r,o,i=ft(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return mt(dt(e=i.call.apply(i,[this].concat(r))),"showContentReportEntry",(function(){var t=e.props,r=t.doc,n=t.book,o=t.group,i=t.me,a=window.appData,c=a.isPublicCloud,l=a.share;return c&&r.user_id!==i.id&&(Object(q.a)(o,n,r)||Object(q.b)(l,n,r))})),mt(dt(e),"isAnonymous",(function(){return!e.props.me.id})),mt(dt(e),"showEditEntry",(function(){if(window.appData.sharePage)return!1;var t=e.props,r=t.doc,n=t.version;return!e.isSingleDocMode()&&(!n&&("Thread"!==r.type&&"Table"!==r.type&&(r.abilities&&r.abilities.update)))})),mt(dt(e),"onChangeShare",function(){var t=lt(at().mark((function t(r){var n;return at().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.a.docs.updateMeta(r,{ignoreGlobalMessage:!0});case 2:return n=t.sent,e.props.dispatch({type:"doc/update",payload:{public:n.public,password:n.password,indexed_level:n.indexed_level}}),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),mt(dt(e),"handleWorkflowSaveTitle",(function(t){var r=t.detail;e.handleSaveTitle(r,{updateMeta:!1})})),mt(dt(e),"handleSaveTitle",function(){var t=lt(at().mark((function t(r){var n,o,i,a,c,l=arguments;return at().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(l.length>1&&void 0!==l[1]?l[1]:{updateMeta:!0}).updateMeta,o=e.props,i=o.doc,a=o.dispatch,c={id:i.id,title:r},!n){t.next=7;break}return t.next=7,a({type:"proxy.web/docs.updateMeta",payload:{data:c}});case 7:a({type:"doc/update",payload:c}),me.a.emit("rename",it(it({},c),{},{doc_id:c.id}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return t=a,(r=[{key:"componentDidMount",value:function(){setTimeout((function(){vt.start(),yt.start(),bt.start()}),2e3),window.addEventListener("WORKFLOW_EVENT.saveTitle",this.handleWorkflowSaveTitle)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("WORKFLOW_EVENT.saveTitle",this.handleWorkflowSaveTitle)}},{key:"isSingleDocMode",value:function(){return"singleDoc"in this.props.location.query}},{key:"showBackToToc",value:function(){var e,t,r=this.props,n=r.doc,o=r.book;return!r.version&&!!o&&this.isSingleDocMode()&&((null===(e=o.abilities)||void 0===e?void 0:e.read)||(null===(t=n.abilities)||void 0===t?void 0:t.update))}},{key:"showShareToDigitalGarden",value:function(){return!this.isSingleDocMode()&&Object(et.a)(this.props)}},{key:"showShareEntry",value:function(){var e,t;if(window.appData.sharePage)return!1;var r=this.props,n=r.doc,o=r.version,i=r.editMode;return!this.isSingleDocMode()&&!o&&!(i&&"Table"!==n.type&&!A.b)&&((null===(e=n.abilities)||void 0===e?void 0:e.share)||(null===(t=n.abilities)||void 0===t?void 0:t.create_collaborator))}},{key:"showShareCheckout",value:function(){var e;if(window.appData.sharePage)return!1;var t=this.props,r=t.doc,n=t.version;return!this.isSingleDocMode()&&!n&&(null===(e=r.abilities)||void 0===e?void 0:e.share)}},{key:"showCollaborationEntry",value:function(){if(window.appData.sharePage)return!1;var e=this.props,t=e.doc;return!e.version&&t.abilities&&t.abilities.create_collaborator}},{key:"showSkylinkEntry",value:function(){var e=this.props,t=e.doc;return!e.version&&["Doc","Board","Sheet"].includes(t.type)}},{key:"renderEdit",value:function(){var e,t=this.props,r=t.doc,n=t.book,o=null===(e=window.appData.settings)||void 0===e?void 0:e.enable_edit_mode;if(this.showEditEntry()){var i=o&&r.origin_format||r.format,a=o?c.a.createElement(c.a.Fragment,null,"markdown"!==i&&c.a.createElement(Fe,{book:n,doc:r}),"markdown"===i&&c.a.createElement(Ge.a,{book:n,doc:r})):c.a.createElement(Ge.a,{book:n,doc:r});return c.a.createElement("span",{className:"header-action-item",style:{marginLeft:8}},a)}return null}},{key:"render",value:function(){var e,t,r,o,i,a,l,u=this,s=this.props,f=s.book,p=s.group,m=s.me,h=s.doc,v=s.version,y=s.style,b=s.shouldHideLogo,g=s.shouldShowSeparator,w=s.showBreadcrumb,_=s.editMode,O=window.appData.organization,E=d()("header",this.props.className,[tt.a.wrapper],mt({"doc-version-head":!!v},tt.a.docTypeHead,"Doc"===h.type)),S={id:h.mark&&h.mark.id,target_id:h&&h.id,target_type:h.mark&&h.mark.target_type,action_tags:h.mark&&h.mark.action_tags};return c.a.createElement("div",{id:"header",className:E,"data-header-mode":"title","data-aspm":"c36321",style:y},c.a.createElement("div",{className:"doc-head-inner"},c.a.createElement("div",{className:d()("header-crumb","title-visible",{"with-separator":g,"only-doc-title":b&&!w})},h.loaded?h.error?null!==(a=h.error)&&void 0!==a&&a.docTitle?c.a.createElement("span",{className:"doc-title"},null==h||null===(l=h.error)||void 0===l?void 0:l.docTitle):null:c.a.createElement(c.a.Fragment,null,c.a.createElement(Ye,{title:h.title,editable:null==h||null===(o=h.abilities)||void 0===o?void 0:o.update,saveTitle:u.handleSaveTitle}),c.a.createElement(Ze.a,{doc:h,book:f,group:p,organization:O,me:m,canShare:u.showShareCheckout(),style:{marginLeft:5}}),"Table"===(null==h?void 0:h.type)&&h.loaded&&c.a.createElement(_e,null),"Table"===(null==h?void 0:h.type)&&h.loaded&&c.a.createElement("span",{style:{marginLeft:4}},c.a.createElement(xe,{doc:h,editable:null===(i=h.abilities)||void 0===i?void 0:i.update})),"Table"!==(null==h?void 0:h.type)&&h.loaded&&c.a.createElement("div",{style:{marginLeft:4}},c.a.createElement("div",{id:"docSaveTipContainer"})),"Doc"===(null==h?void 0:h.type)&&!_&&c.a.createElement("span",{style:{marginLeft:8}},c.a.createElement(yt,{isTagMode:!0,showClose:!0})),!_&&c.a.createElement(vt,{doc:h,showClose:!0}),!_&&c.a.createElement(bt,{doc:h,type:"Doc",tagMode:!0})):null),c.a.createElement("div",{className:"header-action"},null!=h&&h.error?null:c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,{me:m,group:p,organization:O}),h.id&&!v&&(!_||"Table"===h.type||A.b)&&c.a.createElement("div",{className:tt.a.mark,"data-aspm-click":"d223108"},c.a.createElement(Y.a,{key:"mark-doc-".concat(h.id,"-").concat(_),me:m,iconSize:20,target:S,targetType:"Doc",isMiniType:!0,getPopupContainer:function(e){return _?document.body:e.parentNode}})),this.showCollaborationEntry()&&c.a.createElement("div",{className:tt.a.collaborate},c.a.createElement(wt,{shareViewType:"DOC",key:"collaborator-doc-".concat(h.id,"-").concat(_),targetResource:h,organization:O,book:f,group:p,canCollaborator:null===(e=h.abilities)||void 0===e?void 0:e.create_collaborator,onlyCollaborator:!0,me:m,getPopupContainer:function(e){return _?document.body:e.parentNode}},c.a.createElement(n.a,{title:__("协作"),placement:"bottom"},c.a.createElement("span",{"data-testid":"doc-action-collaborate","data-aspm-click":"d225876",className:tt.a.iconWrapper},c.a.createElement(k.b,{name:"nav-invite",className:tt.a.icon}))))),"Doc"===h.type&&!_&&c.a.createElement(Qe.b,{group:p,book:f,doc:h}),"Show"===h.type&&!_&&c.a.createElement("div",{className:[tt.a.collaborate,tt.a.playButton].join(" "),"data-class":"header-action-item"},c.a.createElement(Xe.a,null)),this.isAnonymous()&&c.a.createElement("span",{className:"header-action-item header-action-anonymous"},c.a.createElement(gt,{goto:window.location.href})),this.showShareToDigitalGarden()&&(!_||"Table"===h.type)&&c.a.createElement(Q.a,{style:{marginLeft:8},docId:h.id,currentUser:window.appData.me}),"Table"===h.type?c.a.createElement(Me,{doc:h,me:m}):c.a.createElement("div",{id:"collabUsersContainer"}),this.showBackToToc()&&c.a.createElement("div",{className:"header-action-item"},c.a.createElement(Je.a,{doc:h,book:f,group:p})),this.showShareEntry()&&c.a.createElement("div",{className:"header-action-item"},c.a.createElement(wt,{shareViewType:"DOC",key:"share-doc-".concat(h.id,"-").concat(_),targetResource:h,onChangeShare:this.onChangeShare,organization:O,book:f,group:p,me:m,canShare:null===(t=h.abilities)||void 0===t?void 0:t.share,canCollaborator:null===(r=h.abilities)||void 0===r?void 0:r.create_collaborator,getPopupContainer:function(e){return _?document.body:e.parentNode}})),this.renderEdit(),c.a.createElement("span",{className:"header-action-item",style:{marginLeft:8}},c.a.createElement($e.a,{enableComment:f.enable_comment,docType:h.type}))))))}}])&&ut(t.prototype,r),o&&ut(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(c.a.Component);_t.propTypes={className:s.a.string,me:s.a.object,group:s.a.object,book:s.a.object,doc:s.a.object,note:s.a.object,version:s.a.object,history:s.a.object,showVersion:s.a.func,dispatch:s.a.func.isRequired,style:s.a.object,shouldHideLogo:s.a.bool,shouldShowSeparator:s.a.bool,editMode:s.a.bool};var Ot=c.a.memo((function(e){var t=Object(he.c)().editMode;return c.a.createElement(_t,nt({editMode:t},e))})),Et=Object(h.d)((function(e){return{me:e.me,group:e.group,book:e.book,doc:e.doc,review:e.review}}))(Object(v.withRouter)(Ot)),St=r(3635),jt="ReaderLayout-module_wrapper_l-8F+",xt="ReaderLayout-module_desktopWrapper_LRxkD",Pt="ReaderLayout-module_desktopAsideHeadWrapper_Lb35v",kt="ReaderLayout-module_higherBackTop_RpYEv",Ct="ReaderLayout-module_collectHigherBackTop_ca0M8",It="ReaderLayout-module_asidePinned_owRmW",At="ReaderLayout-module_crumb_wF-5C",Dt="ReaderLayout-module_yuqueLogo_KdpAI",Tt="ReaderLayout-module_miniDropdown_7uya+",Lt="ReaderLayout-module_crumbText_l2jpO",Nt="ReaderLayout-module_bookInfo_FivMr",Rt="ReaderLayout-module_bookName_7LuCC",Mt="ReaderLayout-module_icon_HU4bU",Bt="ReaderLayout-module_text_3S3RN",Ft="ReaderLayout-module_asideWrapper_+Fdu8",Gt="ReaderLayout-module_onlyTocAside_ljsfR",Wt="ReaderLayout-module_aside_WX6k7",zt="ReaderLayout-module_asideHead_dVgz0",Ut="ReaderLayout-module_asideHeadDesktop_5FMGi",Ht="ReaderLayout-module_iconDesktop_wKHzr",Vt="ReaderLayout-module_bookInfoDesktop_-b+Ad",qt="ReaderLayout-module_bookNameDesktop_bSQ1+",Kt="ReaderLayout-module_groupName_aJtI8",Yt="ReaderLayout-module_asideNav_-Kxml",Qt="ReaderLayout-module_pinTip_w+Yhb",Xt="ReaderLayout-module_pinWrapper_8A7Ri",Jt="ReaderLayout-module_pinIconWrapper_WglAw",Zt="ReaderLayout-module_arrowRight_xXebO",$t="ReaderLayout-module_dragbar_NUlrA",er="ReaderLayout-module_dragging_gY9-f",tr="ReaderLayout-module_privateIcon_zehlB",rr="ReaderLayout-module_navIcon_eoaa4",nr="ReaderLayout-module_nav_k8NJg",or="ReaderLayout-module_navDesktop_Ftvl0",ir="ReaderLayout-module_searchNav_KneVs",ar="ReaderLayout-module_searchBar_F9DSq",cr="ReaderLayout-module_searchHotKey_1i9So",lr="ReaderLayout-module_selected_sXnrs",ur="ReaderLayout-module_asideActions_3HOeJ",sr="ReaderLayout-module_asideActionsDesktop_P8EpV",fr="ReaderLayout-module_actionItem_CbOzz",dr="ReaderLayout-module_actionItemDesktop_DRpp5",pr="ReaderLayout-module_bookOverviewMoreActions_fKcZR",mr="ReaderLayout-module_bookOverviewMoreActionsDesktop_c8LaB",hr="ReaderLayout-module_editModeBody_PqN0O",vr=r(1940),yr=r(1909),br=r(172),gr=r(836),wr=r(636),_r=function(e){var t,r=e.me,n=e.org,o=e.group,i=null;null!==(t=o.abilities)&&void 0!==t&&t.read&&(i="User"===o.type&&o.id===r.id?c.a.createElement(wr.a,{to:{pathname:"/dashboard/books",state:{page:"dashboard"}},className:Lt},__("个人知识库")):c.a.createElement(wr.a,{to:{pathname:"/".concat(o.login),state:{page:"dashboard"}},className:Lt,title:o.name},o.name));var a=c.a.createElement(wr.a,{to:{pathname:"/dashboard",state:{page:"dashboard"}},className:Dt},c.a.createElement(vr.default,{width:16,height:16}));return n&&n.id&&n.logo&&(a=c.a.createElement(wr.a,{to:{pathname:"/dashboard",state:{page:"dashboard"}},className:Dt},c.a.createElement(br.c,{src:n.logo,size:16}))),window.appData.isYuque||(a=c.a.createElement(wr.a,{to:{pathname:"/dashboard",state:{page:"dashboard"}},className:Dt},c.a.createElement(gr.b,{height:16,useNewLogo:!0}))),c.a.createElement("div",{className:At},a,o.abilities.read&&c.a.createElement(yr.default,{className:Tt,width:14,height:14}),i)},Or=r(1881),Er=r(4600),Sr=r(409),jr=r(4156),xr=(r(206),r(111)),Pr=(r(430),r(173)),kr=(r(454),r(161)),Cr=r(541),Ir=r(567),Ar=r(49),Dr=r(3713),Tr=r(229),Lr=r(1924),Nr=r(754),Rr=r(1938),Mr="CatalogTreeCollapseTrigger-module_actionItem_ym+tH",Br="CatalogTreeCollapseTrigger-module_icon_k49Ct",Fr=r(4027);function Gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zr={whiteSpace:"nowrap"};function Ur(e){return e}var Hr=function(e){var t=e.onFoldAll,r=void 0===t?Fr.c:t,o=e.onUnfoldAll,i=void 0===o?Fr.c:o,l=Gr(Object(a.useState)(!1),2),u=l[0],s=l[1],f=Object(a.useCallback)((function(){s(!0),r()}),[r]),d=Object(a.useCallback)((function(){s(!1),i()}),[i]);return c.a.createElement(c.a.Fragment,null,u?c.a.createElement(n.a,{title:__("全部展开"),getPopupContainer:Ur,overlayInnerStyle:zr},c.a.createElement("span",{className:Mr,onClick:d},c.a.createElement(k.b,{name:"catalog-fold",width:16,className:Br}))):c.a.createElement(n.a,{title:__("全部折叠"),getPopupContainer:Ur,overlayInnerStyle:zr},c.a.createElement("span",{className:Mr,onClick:f},c.a.createElement(k.b,{name:"catalog-expand",width:16,className:Br}))))},Vr={asiderTab:"BookCatalog-module_asiderTab_0aJLs",tabBar:"BookCatalog-module_tabBar_BKeYX",tabBarPopover:"BookCatalog-module_tabBarPopover_TTy3+",tabItem:"BookCatalog-module_tabItem_CbnYy",subMenuIcon:"BookCatalog-module_subMenuIcon_3FZt3",tabTitle:"BookCatalog-module_tabTitle_Efcqe",asideActionsCont:"BookCatalog-module_asideActionsCont_31lvb",asideActions:"BookCatalog-module_asideActions_NXLy1",actionItem:"BookCatalog-module_actionItem_gOq-V",actionItemGap:"BookCatalog-module_actionItemGap_jbUf6",selectPanel:"BookCatalog-module_selectPanel_F2B3H",selectTitle:"BookCatalog-module_selectTitle_LPXkO",disabled:"BookCatalog-module_disabled_nvCu5",selectItem:"BookCatalog-module_selectItem_Ja1sM",divider:"BookCatalog-module_divider_4+nla",sideCatalog:"BookCatalog-module_sideCatalog_wpCdP",deskTopSideCatalog:"BookCatalog-module_deskTopSideCatalog_FVPUN"},qr=r(4588),Kr={CATALOG:{value:"Catalog",text:__("目录")},ALLDOCS:{value:"All_Docs",text:__("全部文档")}},Yr=r(101),Qr=r.n(Yr),Xr=r(4023),Jr="EmptyPlaceholder-module_container_SWIrn",Zr="EmptyPlaceholder-module_img_46caC",$r="EmptyPlaceholder-module_tip_enK4k",en="EmptyPlaceholder-module_createText_nJumD";function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}function rn(){rn=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(x([])));y&&y!==t&&r.call(y,i)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==tn(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function nn(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function on(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){nn(i,n,o,a,c,"next",e)}function c(e){nn(i,n,o,a,c,"throw",e)}a(void 0)}))}}function an(e){var t=e.book,r=Object(v.useHistory)(),n=Object(h.e)(),o=function(){var e=on(rn().mark((function e(){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(W.find)({book_id:t.id,only_order_by_id:!0});case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),i.a.error(e.t0.msg),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=on(rn().mark((function e(){var i,a,c,l,u,s,f,d,p;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c={insert_to_catalog:!0,action:"prependChild",book_id:t.id,format:Qr.a.FORMAT.LAKE,target_uuid:null,type:"Doc"},null===(i=window.appData.settings)||void 0===i||!i.enable_edit_mode){e.next=13;break}return e.next=4,z.a.createDoc(c,void 0,{useOriginResp:!0});case 4:l=e.sent,u=l.data,s=l.toc,f="/".concat(t.namespace,"/").concat(u.slug,"/edit"),r.push(f),n({type:"book/updateToc",payload:s}),Object(h.c)(on(rn().mark((function e(){var r;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:r=e.sent,n({type:"book/updateDocs",payload:r}),n({type:"searchtool/updateBookToc",payload:{book_id:t.id,docs:r}});case 5:case"end":return e.stop()}}),e)})))),e.next=19;break;case 13:if(null!==(a=window.appData.settings)&&void 0!==a&&a.enable_edit_mode){e.next=19;break}return e.next=16,z.a.createDoc(c);case 16:d=e.sent,p="/".concat(t.namespace,"/").concat(d.slug,"/edit"),window.location.href=p;case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(Xr.a,{disableHeight:!0},(function(e){var r,n=e.width;return c.a.createElement("div",{className:Jr,style:{width:n}},c.a.createElement($.a,{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*2pAiTKqZ54AAAAAAAAAAAAAAARQnAQ",darkAlpha:.7,className:Zr}),null!=t&&null!==(r=t.abilities)&&void 0!==r&&r.create_doc?c.a.createElement("div",{className:$r},__("当前知识库为空，你可以{textNode}",{textNode:c.a.createElement(X.a,{type:"text",className:en,onClick:a},__("新建文档"))})):c.a.createElement("div",{className:$r},__("当前知识库为空")))}))}function cn(e){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(e)}function ln(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(r),!0).forEach((function(t){bn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ln(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sn(){sn=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(x([])));y&&y!==t&&r.call(y,i)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==cn(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function fn(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function dn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){fn(i,n,o,a,c,"next",e)}function c(e){fn(i,n,o,a,c,"throw",e)}a(void 0)}))}}function pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gn(n.key),n)}}function mn(e,t){return mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mn(e,t)}function hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=yn(e);if(t){var o=yn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vn(e)}(this,r)}}function vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return yn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yn(e)}function bn(e,t,r){return(t=gn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gn(e){var t=function(e,t){if("object"!==cn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===cn(t)?t:String(t)}var wn=Object(T.b)((function(){return r.e(69).then(r.bind(null,4761))}),{suspense:!0}),_n=Object(T.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(13),r.e(81)]).then(r.bind(null,5188))}),{suspense:!0}),On=kr.a.TabPane,En=[{id:1,value:"created_at",title:__("按创建时间排序")},{id:2,value:"content_updated_at",title:__("按更新时间排序")},{id:3,value:"title",title:__("按标题排序")}],Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mn(e,t)}(l,e);var t,r,n,a=hn(l);function l(e){var t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),bn(vn(r=a.call(this,e)),"getBookDocs",dn(sn().mark((function e(){var t;return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.a.docs.find({book_id:r.props.book.id,only_order_by_id:!0});case 3:return t=e.sent,r.props.dispatch({type:"searchtool/updateBookToc",payload:{book_id:r.props.book.id,docs:t}}),e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(0),i.a.error(e.t0.msg),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))),bn(vn(r),"loadDocListViewerData",dn(sn().mark((function e(){var t,n,o;return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===(t=r.props.book)||void 0===t||null===(n=t.docs)||void 0===n?void 0:n.length)>0)){e.next=2;break}return e.abrupt("return");case 2:return r.setState({isDocListLoading:!0}),e.next=5,r.getBookDocs();case 5:return o=e.sent,r.props.dispatch({type:"book/updateDocs",payload:o}),r.setState({isDocListLoading:!1}),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))),bn(vn(r),"getSlugFromUrl",(function(e){var t=r.props.book,n=3;t.namespace&&t.namespace.startsWith("books/share/")&&(n=4);var o=e.pathname.split("/")[n];if(o&&o.trim())return o=o.trim()})),bn(vn(r),"onCommandsExecuted",(function(e){e===Ar.a.CATALOG.create_title.cmd&&r.createTitle({activeCatalogTab:!0}),e===Ar.a.CATALOG.create_link.cmd&&r.createLink({activeCatalogTab:!0})})),bn(vn(r),"handleTabChange",function(){var e=dn(sn().mark((function e(t){var n,o,i,a,c,l,u,s;return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setActiveTabKey(t),r.setState({tabVisible:!1}),o=r.props,i=o.currentDocSlug,a=o.book,c=a.docs,l=c.find((function(e){return e.slug===i})),t!==Kr.ALLDOCS.value||c.length){e.next=10;break}return e.next=8,r.loadDocListViewerData();case 8:u=e.sent,l=u.find((function(e){return e.slug===i}));case 10:s=setTimeout((function(){r.revealDoc(l),clearTimeout(s)})),null===(n=r.props)||void 0===n||n.onTabChange(t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),bn(vn(r),"handleCatalogScrollToTop",(function(){var e;null===(e=r.catalogViewer.current)||void 0===e||e.scrollToTop()})),bn(vn(r),"handleCatalogScrollToItem",(function(e){var t,n=r.props.book.toc.find((function(t){return t.doc_id===e.id||t.url===e.slug}));n&&(null===(t=r.catalogViewer.current)||void 0===t||t.scrollToItem(n.uuid))})),bn(vn(r),"handleDocListScrollToItem",(function(e){var t;null===(t=r.docListViewer.current)||void 0===t||t.scrollToItem(e.id)})),bn(vn(r),"revealDoc",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(e.id||e.slug)&&(Object(Ir.isDocNotInToc)(e,r.props.book.toc)&&!t?r.state.activeTabKey!==Kr.ALLDOCS.value?r.setActiveTabKey(Kr.ALLDOCS.value,dn(sn().mark((function t(){return sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.loadDocListViewerData();case 2:r.handleDocListScrollToItem(e);case 3:case"end":return t.stop()}}),t)})))):r.handleDocListScrollToItem(e):r.state.activeTabKey===Kr.CATALOG.value?r.handleCatalogScrollToItem(e):r.handleDocListScrollToItem(e))})),bn(vn(r),"handleSearchSelect",(function(e){var t=setTimeout((function(){r.revealDoc(e,!1),clearTimeout(t)}))})),bn(vn(r),"handleAddToCatalogSuccess",(function(e){var t="/".concat(r.props.book.namespace,"/").concat(e.slug);r.props.history.push(t),r.setActiveTabKey(Kr.CATALOG.value,(function(){r.handleCatalogScrollToItem(e)}))})),bn(vn(r),"handleMoveToStagingBoxSuccess",(function(e){var t=r.props.currentDocSlug;if("DOC"===e.type&&t===e.url){var n="/".concat(r.props.book.namespace,"/").concat(t);r.props.history.push(n)}}));var n=e.space,o=e.book,u=e.group;r.catalogActiveTabKeyStorage=new qr.a(n,u,o);var s=r.catalogActiveTabKeyStorage.getTab()||null;return null===(t=r.props)||void 0===t||t.onTabChange(s),r.state={activeTabKey:s,isDocListLoading:!1,tabVisible:!1},r.catalogViewer=c.a.createRef(),r.docListViewer=c.a.createRef(),r}return t=l,r=[{key:"setActiveTabKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.setState({activeTabKey:e},t),this.catalogActiveTabKeyStorage.setTab(e)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.currentDocSlug;if(this.state.activeTabKey===Kr.ALLDOCS.value)this.loadDocListViewerData().then((function(){var r=setTimeout((function(){e.revealDoc({slug:t}),clearTimeout(r)}))}));else var r=setTimeout((function(){e.revealDoc({slug:t}),clearTimeout(r)}),200);Dr.c.on(Dr.a.DOC_SELECT,(function(t){var r=t.doc,n=t.path;e.revealDoc(r,!1),e.props.history.push(n)}))}},{key:"createTitle",value:function(){var e,t=this,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).activeCatalogTab;null===(e=this.catalogViewer.current)||void 0===e||e.onAction({target_uuid:null,action:Cr.ACTIONS.insert,type:Cr.TYPES.title}),r&&this.setActiveTabKey(Kr.CATALOG.value,(function(){t.handleCatalogScrollToTop()}))}},{key:"createLink",value:function(){var e,t=this,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).activeCatalogTab;null===(e=this.catalogViewer.current)||void 0===e||e.showCatalogLinkForm({target_uuid:null,action:Cr.ACTIONS.insert,type:Cr.TYPES.title,onSubmit:function(){r&&t.setActiveTabKey(Kr.CATALOG.value,(function(){t.handleCatalogScrollToTop()}))}})}},{key:"handleSortSelectClick",value:function(e){this.setState({tabVisible:!1}),this.catalogActiveTabKeyStorage.setSort(e)}},{key:"canCreateDoc",value:function(){var e=this.props.book;return e.abilities&&e.abilities.create_doc}},{key:"handleCatalogDidMount",value:function(){Object(E.a)("finish-catalog-render")}},{key:"render",value:function(){var e=this,t=this.props,r=t.space,n=t.book,i=t.group,a=t.history,l=t.dispatch,u=t.currentDocSlug;return c.a.createElement(c.a.Fragment,null,c.a.createElement(kr.a,{className:Vr.asiderTab,activeKey:this.state.activeTabKey,onChange:this.handleTabChange,renderTabBar:function(t){var r,n;return c.a.createElement("div",{className:Vr.tabBar,onMouseOver:function(){wn.preload(),_n.preload()}},c.a.createElement(o.a,{noArrow:!0,getPopupContainer:function(e){return e.parentNode},overlayClassName:Vr.tabBarPopover,placement:"bottomLeft",trigger:"click",visible:e.state.tabVisible,onVisibleChange:function(t){return e.setState({tabVisible:t})},content:c.a.createElement("div",{className:Vr.selectPanel},c.a.createElement("div",{className:Vr.selectList},c.a.createElement("div",{className:Vr.selectItem,onClick:function(){return t.onTabClick(Kr.CATALOG.value)}},c.a.createElement("span",null,c.a.createElement(Lr.default,{width:16,height:16}),c.a.createElement("span",null,Kr.CATALOG.text)),e.state.activeTabKey===Kr.CATALOG.value&&c.a.createElement(Nr.default,null)),c.a.createElement("div",{className:Vr.selectItem,onClick:function(){return t.onTabClick(Kr.ALLDOCS.value)}},c.a.createElement("span",null,c.a.createElement(Rr.default,{width:16,height:16}),c.a.createElement("span",null,Kr.ALLDOCS.text)),e.state.activeTabKey===Kr.ALLDOCS.value&&c.a.createElement(Nr.default,null))),e.state.activeTabKey===Kr.ALLDOCS.value&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Pr.a,null),c.a.createElement("div",{className:Vr.selectTitle},c.a.createElement("span",null,__("排序"))),c.a.createElement("div",{className:d()(Vr.selectList,bn({},Vr.disabled,e.state.activeTabKey!==Kr.ALLDOCS.value))},En.map((function(t){return c.a.createElement("div",{key:t.value,className:Vr.selectItem,onClick:function(){return e.handleSortSelectClick(t.value)}},c.a.createElement("span",null,t.title),e.state.activeTabKey===Kr.ALLDOCS.value&&e.catalogActiveTabKeyStorage.getSort()===t.value&&c.a.createElement(Nr.default,null))})))))},c.a.createElement("span",{className:Vr.tabTitle,onClick:function(t){return e.setState((function(e){return{tabVisible:!e.tabVisible}}))}},e.state.activeTabKey===Kr.CATALOG.value?c.a.createElement(Lr.default,{width:16,height:16,className:Vr.tabIcon}):c.a.createElement(Rr.default,{width:16,height:16,className:Vr.tabIcon}),c.a.createElement("span",{className:Vr.tabName},e.state.activeTabKey===Kr.CATALOG.value?Kr.CATALOG.text:Kr.ALLDOCS.text))),c.a.createElement("div",{className:Vr.asideActionsCont},e.state.activeTabKey===Kr.CATALOG.value&&c.a.createElement(Hr,{onFoldAll:null===(r=e.catalogViewer.current)||void 0===r?void 0:r.foldAll,onUnfoldAll:null===(n=e.catalogViewer.current)||void 0===n?void 0:n.unFoldAll})))}},c.a.createElement(On,{key:Kr.CATALOG.value},0===n.toc.length?c.a.createElement(an,{book:n}):c.a.createElement(wn,{ref:this.catalogViewer,className:A.b?Vr.deskTopSideCatalog:Vr.sideCatalog,book:n,currentDocSlug:u,onDidMount:this.handleCatalogDidMount})),c.a.createElement(On,{key:Kr.ALLDOCS.value},c.a.createElement("div",{style:{minHeight:100,paddingTop:8}},0!==n.docs.length||this.state.isDocListLoading?c.a.createElement(xr.a,{delay:100,spinning:this.state.isDocListLoading},c.a.createElement(_n,{ref:this.docListViewer,currentDocSlug:u,history:a,group:i,book:n,space:r,onAddToCatalogSuccess:this.handleAddToCatalogSuccess})):c.a.createElement(an,{book:n})))),c.a.createElement(xn,{book:n,dispatch:l}))}}],r&&pn(t.prototype,r),n&&pn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.PureComponent);Sn.propTypes={doc:s.a.object.isRequired,space:s.a.object.isRequired,group:s.a.object.isRequired,book:s.a.object.isRequired,history:s.a.object.isRequired,currentDocSlug:s.a.string,dispatch:s.a.func,onTabChange:s.a.func};var jn=Object(Tr.b)((function(e){var t=c.a.createRef(),r=c.a.useContext(R.a).ref,n=Object(v.useParams)().doc;r.current=t;var o=un(un({ref:t},e),{},{currentDocSlug:n});return c.a.createElement(Sn,o)}),!0);function xn(e){var t=e.book,r=e.dispatch;return Object(a.useEffect)((function(){function e(e){var n=e.title,o=t.toc.map((function(t){return t.doc_id===e.doc_id?un(un({},t),{},{title:n}):t})),i=(t.docs||[]).map((function(t){return t.id===e.doc_id?un(un({},t),{},{title:n}):t}));Object(h.c)((function(){r({type:"book/updateToc",payload:o}),r({type:"book/updateDocs",payload:i})}))}return me.a.on("rename",e),function(){me.a.off("rename",e)}}),[t.docs,t.toc]),null}xn.propTypes={book:s.a.object.isRequired,dispatch:s.a.func};var Pn=r(4483);function kn(e){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(e)}function Cn(){return Cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cn.apply(this,arguments)}function In(){In=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(x([])));y&&y!==t&&r.call(y,i)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==kn(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),l(b,c,"Generator"),l(b,i,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function An(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function Dn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){An(i,n,o,a,c,"next",e)}function c(e){An(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Tn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fn(n.key),n)}}function Ln(e,t){return Ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ln(e,t)}function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Mn(e);if(t){var o=Mn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===kn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rn(e)}(this,r)}}function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e){return Mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mn(e)}function Bn(e,t,r){return(t=Fn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fn(e){var t=function(e,t){if("object"!==kn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===kn(t)?t:String(t)}var Gn=N.a+N.d,Wn=Object(T.c)((function(){return Promise.all([r.e(5),r.e(12),r.e(29),r.e(1134)]).then(r.bind(null,5183))}),{suspense:!0}),zn=Object(T.b)((function(){return Promise.resolve().then(r.bind(null,1530))}),{suspense:!0}),Un=Object(T.b)((function(){return Promise.all([r.e(5),r.e(12),r.e(29),r.e(79)]).then(r.bind(null,3901))}),{suspense:!0}),Hn=Object(T.b)((function(){return r.e(82).then(r.bind(null,4686))}),{suspense:!0}),Vn=Object(T.b)((function(){return Promise.resolve().then(r.bind(null,4513))}),{suspense:!0});function qn(e){var t=e.doc,r=e.editMode,n=e.asideWidth,o=Object(v.useParams)().doc;return r&&"Doc"===t.type&&t.loaded?c.a.createElement("div",{id:"ne-toolbar-container",key:o,style:{left:n}}):null}var Kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ln(e,t)}(s,e);var t,r,a,u=Nn(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),Bn(Rn(t=u.call(this,e)),"handleDashboardSideBarResize",(function(e){var r=e.detail;t.setState({sidebarWidth:r})})),Bn(Rn(t),"initHotKeys",(function(){t.state.asideWidth&&(O()(w.a.windows?"ctrl+alt+,":"⌘+option+,",(function(e){e.preventDefault(),t.togglePin()})),A.b||O()(w.a.windows?"ctrl+j":"⌘+j",(function(e){e.preventDefault(),e.repeat||t.handleSearchClick()})))})),Bn(Rn(t),"getAsideResizable",(function(){return window.innerWidth>V.c})),Bn(Rn(t),"handleTabChange",(function(e){t.setState({activeTabKey:e})})),Bn(Rn(t),"handleCommandsExecuted",(function(e){var r,n;null===(r=t.bookCatalogRef.current)||void 0===r||null===(n=r.current)||void 0===n||n.onCommandsExecuted(e)})),Bn(Rn(t),"handleContentSidebarVisibleChange",(function(e){var r=e.detail.visible;t.setState({contentSidebarVisible:r})})),Bn(Rn(t),"handleResize",m()((function(){t.asideResizable=t.getAsideResizable(),t.asideResizable||t.state.asidePinned||t.togglePin(),!t.asideResizable||t.asideResized||t.state.asidePinned||t.setState({asideWidth:t.getAsideWidth(),asideWrapperWidth:t.getAsideWidth()})}),300)),Bn(Rn(t),"handleMouseOverPinIcon",(function(e){t.state.asidePinned&&(e.stopPropagation(),e.preventDefault())})),Bn(Rn(t),"handleMouseDown",(function(){!0!==t.state.asideResizing&&t.setState({asideResizing:!0})})),Bn(Rn(t),"handleMouseUp",(function(){!1!==t.state.asideResizing&&t.setState({asideResizing:!1})})),Bn(Rn(t),"handleMouseMove",(function(e){t.state.asideResizing&&(t.asideResized=!0,t.setAsideWidth(e),window.dispatchEvent(new Event("resize")))})),Bn(Rn(t),"recalculateHeaderStyle",(function(){t.state.asidePinned&&t.forceUpdate()})),Bn(Rn(t),"setAsideWidth",(function(e){if(t.asideResizable&&t.asideRef&&!t.state.asidePinned){var r=t.asideRef.getBoundingClientRect(),n=r.width,o=e.clientX-r.left;n>=V.a&&e.clientX>r.right?o=V.a:n<=V.b&&e.clientX<r.right&&(o=V.b),o<V.b&&(o=V.b),o>V.a&&(o=V.a),t.setState({asidePinned:!1,asideWidth:o,asideWrapperWidth:o})}})),Bn(Rn(t),"togglePin",(function(e){var r=t.props,n=r.isVisible,o=r.setVisible;e&&(e.preventDefault(),e.stopPropagation()),t.setState((function(e){var r=e.asideWidth;return e.asidePinned?{asideWrapperWidth:t.asideResizable&&r||V.b,asidePinned:!1}:{asideWrapperWidth:V.d,asidePinned:!0}}),(function(){setTimeout((function(){t.recalculateHeaderStyle(),o(!n)}),100)}))})),Bn(Rn(t),"handlePinnedAsideClick",(function(){t.state.asidePinned&&t.togglePin()})),Bn(Rn(t),"bookOverviewNavClick",(function(){t.props.history.push(t.getOverviewPath())})),Bn(Rn(t),"handleSearchCancel",Dn(In().mark((function e(){return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.a)(500);case 2:t.setState({searchModalVisible:!1});case 3:case"end":return e.stop()}}),e)})))),Bn(Rn(t),"handleSearchClick",(function(){t.setState({searchModalVisible:!0})})),Bn(Rn(t),"getOverviewPath",(function(){var e=t.props,r=e.group,n=e.book;return"/".concat(r.login,"/").concat(n.slug)})),Bn(Rn(t),"isOverviewPage",(function(){var e=t.props,r=e.group,n=e.book,o=window.location.pathname;return o==="/".concat(r.login,"/").concat(n.slug)||o==="/".concat(r.login,"/").concat(n.slug,"/")})),Bn(Rn(t),"getBookDocs",Dn(In().mark((function e(){var r;return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(W.find)({book_id:t.props.book.id,only_order_by_id:!0});case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),i.a.error(e.t0.msg),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))),Bn(Rn(t),"fetchUpdateToc",Dn(In().mark((function e(){var r,n,o,i,a;return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.book,o=r.dispatch,e.next=3,U.a.getCatalogNodes(n.id);case 3:i=e.sent,a=i.toc,o({type:"book/updateToc",payload:a});case 6:case"end":return e.stop()}}),e)})))),Bn(Rn(t),"updateDocs",Dn(In().mark((function e(){var r;return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getBookDocs();case 2:r=e.sent,Object(h.c)((function(){t.props.dispatch({type:"searchtool/updateBookToc",payload:{book_id:t.props.book.id,docs:r}}),t.props.dispatch({type:"book/updateDocs",payload:r})}));case 4:case"end":return e.stop()}}),e)})))),Bn(Rn(t),"handleCreateDoc",function(){var e=Dn(In().mark((function e(r,n){return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.props.dispatch({type:"book/updateToc",payload:n}),t.updateDocs();case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Bn(Rn(t),"handleShowHistory",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",r=arguments.length>1?arguments[1]:void 0;t.props.editMode?window.__editMode_show_history():t.setState({historyView:!0,defaultCategory:e,versionPublished:null==r?void 0:r.published})})),Bn(Rn(t),"renderDocAction",(function(){var e,r,n=t.props,i=n.book,a=n.doc,l=n.history,u=(null===(e=window.appData.settings)||void 0===e?void 0:e.enable_edit_mode)&&(null===(r=window.appData.settings)||void 0===r?void 0:r.enable_edit_mode_spa_create);if(t.canCreateDoc())return c.a.createElement(o.a,{type:"menu",overlayStyle:{minWidth:126},trigger:["hover"],placement:"bottomLeft",arrowPointAtCenter:!0,hideWhenInactive:!0,content:c.a.createElement(Un,{history:l,book:i,doc:a,commands:z.a.additionalActionsForNewDoc({canImport:!0,canExport:i.abilities&&i.abilities.export,canCreateCatalogGroup:t.state.activeTabKey===Kr.CATALOG.value,canCreateCatalogLink:t.state.activeTabKey===Kr.CATALOG.value}),commandParams:{insert_to_catalog:!0,action:"prependChild"},onCommandsExecuted:function(e){var r=e.cmd;t.handleCommandsExecuted(r)},spaMode:u,onCreateDoc:u?t.handleCreateDoc:void 0})},c.a.createElement("div",{className:d()([ur],Bn({},sr,A.b)),onMouseOver:function(){Un.preload()}},A.b?c.a.createElement(k.b,{name:"add",width:18,height:18,className:dr}):c.a.createElement(k.b,{name:"add",width:16,height:16,className:fr})))})),Bn(Rn(t),"renderBookCatalog",(function(){var e=t.props,r=e.doc,n=e.book,o=e.group,i=e.dispatch,a=e.space,l=e.history;return c.a.createElement(jn,{ref:t.bookCatalogRef,doc:r,group:o,book:n,space:a,dispatch:i,history:l,onTabChange:t.handleTabChange})})),Bn(Rn(t),"renderDragBar",(function(){var e=w.a.windows?"Ctrl+Alt+,":"⌘+Option+,";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:d()([$t],Bn({},er,t.state.asideResizing)),onClick:t.handlePinnedAsideClick,onMouseDown:t.handleMouseDown,onContextMenu:function(e){e.preventDefault()}}),c.a.createElement("div",{className:Xt},c.a.createElement(n.a,{mouseEnterDelay:.5,placement:"right",title:t.state.asidePinned?c.a.createElement("span",{className:Qt},__("展开"),c.a.createElement("br",null),e):c.a.createElement("span",{className:Qt},__("收起"),c.a.createElement("br",null),e),getTooltipContainer:function(e){return e.parentNode}},c.a.createElement("span",{className:Jt,onMouseOver:t.handleMouseOverPinIcon,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onClick:t.togglePin},c.a.createElement("span",{className:Zt})))))})),Bn(Rn(t),"renderSearch",(function(){if(t.state.searchModalVisible)return c.a.createElement(zn,{name:"LazyScopedSearch",onCancel:t.handleSearchCancel,visible:t.state.searchModalVisible})})),Bn(Rn(t),"renderImportBookModal",(function(){var e=t.props,r=e.book,n=e.group;return c.a.createElement(Wn,{book:r,group:n,onCommandsExecuted:function(e){var r=e.cmd;t.handleCommandsExecuted(r)},onUpdate:t.fetchUpdateToc})})),Bn(Rn(t),"renderAsideHead",(function(){var e=t.props,r=e.group,n=e.book,o=e.me,i=e.organization;return c.a.createElement("div",{className:d()(zt,Bn({},Pt,A.b)),id:"asideHead"},c.a.createElement("div",{className:Nt},c.a.createElement(_r,{me:o,group:r,org:i})),c.a.createElement("div",{className:Nt},c.a.createElement("div",{className:Rt},c.a.createElement(St.a,{className:Mt,value:n.book_icon,disabled:!0}),c.a.createElement("div",{className:Rt},c.a.createElement("span",{className:Bt,title:n.name},n.name),(null==o?void 0:o.is_admin)&&-1===n.status&&c.a.createElement(k.b,{name:"doc-has-content-risk",width:14,style:{opacity:.375,marginLeft:8}}),c.a.createElement("div",{className:tr},c.a.createElement(Or.a,{public:n.public,book:n,group:r,size:14,placement:"bottom"})))),c.a.createElement(Er.default,{group:r,book:n,className:pr,getPopupContainer:function(){return document.getElementById("asideHead")}})))})),Bn(Rn(t),"renderAsideHeadDesktop",(function(){var e,r=t.props,n=r.group,o=r.book,i=r.me;return c.a.createElement("div",{className:Ut,id:"asideHeadDesktop"},c.a.createElement(St.a,{className:Ht,value:o.book_icon,disabled:!0,width:28,height:28}),c.a.createElement("div",{className:Vt},c.a.createElement("div",{className:qt},c.a.createElement("span",{className:Bt,title:o.name},o.name),(null==i?void 0:i.is_admin)&&-1===o.status&&c.a.createElement(k.b,{name:"doc-has-content-risk",width:14,style:{opacity:.375,marginLeft:8}}),c.a.createElement("div",{className:tr},c.a.createElement(Or.a,{public:o.public,book:o,group:n,size:14,placement:"bottom"}))),(null==n||null===(e=n.abilities)||void 0===e?void 0:e.read)&&!("User"===(null==n?void 0:n.type)&&(null==n?void 0:n.id)===(null==i?void 0:i.id))&&c.a.createElement("div",{className:Kt,title:null==n?void 0:n.name},null==n?void 0:n.name)),t.renderDocAction())})),Bn(Rn(t),"renderNav",(function(){var e,r={willChange:"width",transition:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:t.state.asideWidth,maxWidth:V.a,minWidth:V.b};return c.a.createElement("nav",{className:Yt,style:r,id:"navBox",ref:function(e){t.asideRef=e}},!A.b&&c.a.createElement("div",{className:ir},c.a.createElement("div",{className:ar,onMouseOver:function(){zn.preload()},onClick:t.handleSearchClick},c.a.createElement(x.default,{className:rr}),c.a.createElement("span",null,__("搜索#readPage")),c.a.createElement("span",{className:cr},w.a.windows?"Ctrl + J":"⌘ + J")),t.renderDocAction()),c.a.createElement("div",{className:d()((e={},Bn(e,nr,!0),Bn(e,lr,t.isOverviewPage()),e)),onClick:t.bookOverviewNavClick},c.a.createElement(P.default,{className:rr}),c.a.createElement("span",null,__("首页#readPage"))),t.renderBookCatalog())})),Bn(Rn(t),"renderNavDesktop",(function(){var e={willChange:"width",transition:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:t.state.asideWidth,maxWidth:V.a,minWidth:V.b},r=t.props,n=r.group,o=r.book;return c.a.createElement("nav",{className:Yt,style:e,id:"navBox",ref:function(e){t.asideRef=e}},c.a.createElement("div",{className:or},c.a.createElement("div",{className:d()(nr,or,Bn({},lr,t.isOverviewPage())),onClick:t.bookOverviewNavClick},c.a.createElement(P.default,{className:rr}),c.a.createElement("span",null,__("首页#readPage"))),c.a.createElement(Er.default,{group:n,book:o,className:mr})),t.renderBookCatalog())})),Bn(Rn(t),"renderAside",(function(){var e,r={willChange:"width",transition:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:t.state.asideWrapperWidth};return c.a.createElement("div",Cn({className:d()((e={},Bn(e,Ft,!0),Bn(e,It,t.state.asidePinned),Bn(e,Gt,!A.b),e)),"data-testid":"aside"},Bn({},H.c,!0)),c.a.createElement("div",{className:Wt,style:r},A.b?t.renderAsideHeadDesktop():t.renderAsideHead(),A.b?t.renderNavDesktop():t.renderNav()),t.renderDragBar(),t.renderSearch(),t.renderImportBookModal())})),t.state={historyView:!1,defaultCategory:"all",versionPublished:!1,asideWidth:t.getAsideWidth(),asideWrapperWidth:t.getAsideWidth(),sidebarWidth:60,asideResizing:!1,asidePinned:!t.getAsideResizable(),contentSidebarVisible:!1,activeTabKey:null,searchModalVisible:!1},t.asideResized=!1,t.asideResizable=t.getAsideResizable(),t.bookCatalogRef={current:null},t}return t=s,(r=[{key:"componentDidMount",value:function(){var e,t;Object(E.a)("finish-readerlayout-render");var r=this.props,n=r.group,o=r.book,i=r.dispatch;"#import_to_book"===window.location.hash&&Wn.start(),i({type:"search/update",payload:{display:!0,scope:"".concat(n.login,"/").concat(o.slug)}}),this.initHotKeys(),window.addEventListener("resize",this.handleResize),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("contentSidebarVisibleChange",this.handleContentSidebarVisibleChange),window.addEventListener("DashboardSideBar.resize",this.handleDashboardSideBarResize),document.body.classList.add(kt),document.body.classList.add("with-miniapp-code"),Object(L.a)().then((function(e){e&&document.body.classList.add(Ct)})),Un.preload();var a=this.state.sidebarWidth;this.setState({sidebarWidth:parseInt((null===(e=document.getElementById("dragBarContainer"))||void 0===e||null===(t=e.style)||void 0===t?void 0:t.width.replace("px",""))||a,10)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("contentSidebarVisibleChange",this.handleContentSidebarVisibleChange),window.removeEventListener("DashboardSideBar.resize",this.handleDashboardSideBarResize),document.body.classList.remove(kt),document.body.classList.remove(Ct);try{O.a.unbind(w.a.windows?"ctrl+j":"⌘+j"),O.a.unbind(w.a.windows?"ctrl+alt+,":"⌘+option+,")}catch(e){}}},{key:"componentDidUpdate",value:function(){var e;null!==(e=this.props.doc)&&void 0!==e&&e.marked&&document.body.classList.remove(Ct)}},{key:"canCreateDoc",value:function(){var e=this.props.book;return e.abilities&&e.abilities.create_doc}},{key:"getAsideWidth",value:function(){if(!this.props.withAside)return 0;var e=window.innerWidth;if(e<=V.c)return 0;var t=Math.max(Math.min(Math.floor(.18*e),V.a),V.b);return e-t<=Gn?V.b:t}},{key:"renderSideBar",value:function(){if(!this.props.withAside)return null;if(A.b){var e=document.getElementById("dragBarContainer");return e?Object(l.createPortal)(this.renderAside(),e):null}return this.renderAside()}},{key:"render",value:function(){var e,t,r=this,n=this.props,o=n.book,a=n.doc,l=n.children,u=n.withAside,s=n.isDarkMode,f=n.hideHeader,p=n.isBookOverview,m=n.editMode,h=n.history,v=this.state,y=v.asidePinned,g=v.asideWrapperWidth,w=v.historyView,_=v.contentSidebarVisible,O=v.defaultCategory,E=v.versionPublished,S=v.sidebarWidth,x=d()((Bn(t={"doc-head":!0},"doc-head-".concat(null==a||null===(e=a.type)||void 0===e?void 0:e.toLowerCase()),!0),Bn(t,"doc-type-head","Doc"===(null==a?void 0:a.type)&&!_),Bn(t,It,y),t)),P=null;this.isOverviewPage()&&(P=s?j.themeDarkToken["@yuque-color-bg-primary"]:j.themeToken["@yuque-color-bg-secondary"],o.cover&&(P=s?"linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0, rgba(0, 0, 0, 1) 70vh, rgba(0, 0, 0, 1) 100%), url(".concat(Object(C.a)(o.cover,{blur:"r_50,s_2"}),") center top/100% no-repeat"):"linear-gradient(to bottom, rgba(255, 255, 255, 0) 0, rgba(255, 255, 255, 1) 70vh, rgba(255, 255, 255, 1) 100%), url(".concat(Object(C.a)(o.cover,{blur:"r_50,s_2"}),") center top/100% no-repeat")));var k=A.b?g+(this.props.isVisible?S:0):g,D=0;A.e&&!Object(Sr.a)()&&this.props.isVisible&&(D=this.props.isCollapsed?I.a:Object(I.b)());var T=(y||g)+D;return Object(Sr.a)()&&(k=60,T=0),c.a.createElement(b.a,{title:this.isOverviewPage()?null==o?void 0:o.name:null==a?void 0:a.title},c.a.createElement("div",{className:"lark","data-testid":"reader-main"},c.a.createElement("div",{className:"main-wrapper"},c.a.createElement(M.a,{showHistory:this.handleShowHistory},c.a.createElement(R.a.Provider,{value:{ref:this.bookCatalogRef}},c.a.createElement("div",{className:d()(jt,Bn({},xt,A.d)),style:{paddingLeft:T,background:P}},!f&&c.a.createElement(Et,{className:x,isBookOverView:p,me:this.props.me,group:this.props.group,book:this.props.book,doc:this.props.doc,key:"doc-header-".concat(a.id),shouldHideLogo:u,shouldShowSeparator:y,style:{left:k},handleSearch:this.handleSearchClick,history:h}),p?null:c.a.createElement(qn,{editMode:m,doc:a,asideWidth:A.b?g+S-60:g}),l),w&&c.a.createElement(Hn,{doc:a,docDomain:"Doc",onCancel:function(){r.setState({historyView:!1})},onReverted:function(){i.a.success(__("恢复成功，正在跳转至编辑页，你可以在确认内容无误后更新文档"),3,(function(){window.location.href="/".concat(o.namespace,"/").concat(a.slug,"/edit")}))},defaultCategory:O,versionPublished:E}),this.renderSideBar(),!p&&c.a.createElement(B.a,{isShare:window.appData.sharePage},c.a.createElement(Pn.b,{doc:a}),c.a.createElement(Vn,null)))))))}}])&&Tn(t.prototype,r),a&&Tn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),s}(a.Component);Kn.propTypes={history:s.a.object,group:s.a.object,book:s.a.object,doc:s.a.object,space:s.a.object,me:s.a.object,children:s.a.node,withAside:s.a.bool,renderHeader:s.a.object,isBookOverview:s.a.bool},Kn.displayName="ReaderLayout";var Yn=c.a.memo((function(e){var t=Object(D.a)().isDarkMode,r=Object(T.e)(),n=Object(he.c)().editMode,o=Object(F.c)(),i=o.isVisible,l=o.setVisible,u=Object(F.b)().isCollapsed;return Object(a.useEffect)((function(){r.startRender()}),[]),Object(a.useEffect)((function(){var e=document.querySelector(".default-back-top.ant-back-top");e.style.display=n&&e?"none":"flex",n?document.body.classList.add(hr):document.body.classList.remove(hr)}),[n]),c.a.createElement(jr.a,null,c.a.createElement(G.DocStatisticProvider,null,c.a.createElement(Kn,Cn({},e,{isDarkMode:t,isVisible:i,isCollapsed:u,setVisible:l,editMode:n}))))})),Qn=Object(h.d)((function(e){return{group:e.group,book:e.book,doc:e.doc,space:e.space,me:e.me,organization:e.organization}}))(Object(v.withRouter)(Yn));Qn.displayName="WrapperReaderLayout";t.a=Qn},5180:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(8),a=r.n(i),c=r(429),l=r(67),u=r(207),s=r(4587),f=r(4549),d=r(905),p=r(53),m=r(3847),h=r(4642);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=Object(d.b)((function(){return Promise.all([r.e(6),r.e(11),r.e(30),r.e(1135)]).then(r.bind(null,5162))}),{suspense:!0}),g=Object(d.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(6),r.e(7),r.e(84)]).then(r.bind(null,5163))}),{suspense:!0}),w=Object(d.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(14),r.e(67)]).then(r.bind(null,5164))}),{suspense:!0}),_=Object(d.b)((function(){return Promise.all([r.e(6),r.e(11),r.e(1146)]).then(r.bind(null,5169))}),{suspense:!0}),O=Object(d.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(6),r.e(8),r.e(1141)]).then(r.bind(null,4756))}),{suspense:!0});function E(e){var t,r,i,a,c,l=e.doc,d=e.book,y=e.location,E=e.isBookOverview,S=u.a.normalizeReadPageQuery(y.query),j=v(Object(n.useReducer)((function(e){return e+1}),0),2),x=(j[0],j[1]),P=Object(n.useRef)(null);if(Object(n.useEffect)((function(){var e,t;null===(e=P.current)||void 0===e||null===(t=e.readWriteView)||void 0===t||t.renderCtx.registerRerenderHandler((function(){x()}))}),[l.id]),Object(n.useEffect)((function(){var e=setTimeout((function(){_.preload(),w.preload()}),8e3);return function(){clearTimeout(e)}}),[]),"Doc"===l.type&&S.inner)return o.a.createElement(b,e);if("doc_embed"===S.view&&!E)return o.a.createElement(g,{from:S.from});var k={ref:P};!u.a.isRunAtRaw(l)||Object(s.a)()||null!==(t=window.appData)&&void 0!==t&&t.sharePage?c=_:(c=O,k.key=l.id);var C=E||!("singleDoc"in y.query)&&(null===(r=d.abilities)||void 0===r?void 0:r.read),I=E||"need_verify_password"===(null==l||null===(i=l.error)||void 0===i?void 0:i.code);return p.d&&(I=!0,C=!1),o.a.createElement(m.a,{canUpdateDoc:null===(a=l.abilities)||void 0===a?void 0:a.update,docType:l.type},o.a.createElement(h.a,{withAside:C,hideHeader:I,isBookOverview:E},E?o.a.createElement(w,null):o.a.createElement(c,k),o.a.createElement(f.a,null)))}E.propTypes={group:a.a.object.isRequired,book:a.a.object.isRequired,doc:a.a.object.isRequired,location:a.a.object,match:a.a.object,history:a.a.object,dispatch:a.a.func,isBookOverview:a.a.bool},E.defaultProps={isBookOverview:!1},t.default=Object(c.d)((function(e){return{group:e.group,book:e.book,doc:e.doc}}))(Object(l.withRouter)(E))}}]);