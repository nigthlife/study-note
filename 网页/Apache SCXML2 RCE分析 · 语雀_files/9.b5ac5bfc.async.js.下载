/*! For license information please see 9.b5ac5bfc.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[9,209,219,380],{1601:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-comment-hide",e.className].filter(Boolean).join(" ")}),n.createElement("defs",null,n.createElement("path",{id:"2573787990a",d:"M0 0h256v256H0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm0 20c-50.81 0-92 41.19-92 92s41.19 92 92 92 92-41.19 92-92-41.19-92-92-92Zm55.143 52.902c3.795 3.873 3.801 10.047.067 13.928l-.212.213-63.285 62a10 10 0 0 1-13.776.209l-.219-.208-32.715-32.041c-3.946-3.865-4.012-10.196-.147-14.142 3.794-3.873 9.966-4.007 13.924-.354l.217.207 25.717 25.187 56.288-55.144c3.945-3.865 10.276-3.8 14.141.145Z",fill:"currentColor",fillRule:"nonzero"})))},1602:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({viewBox:"64 64 896 896",fill:"currentColor",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-antd-undo",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 0 0-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 0 1-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 0 1-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 0 0-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}))},1603:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-closecircleoutlined",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm0 20c-50.81 0-92 41.19-92 92s41.19 92 92 92 92-41.19 92-92-41.19-92-92-92Zm44.071 47.929c3.834 3.834 3.904 10.007.21 13.927l-.21.215-29.725 29.725 29.773 30.181.208.217c3.668 3.944 3.556 10.117-.304 13.925-3.932 3.879-10.263 3.836-14.142-.096l-29.678-30.084-30.132 30.132c-3.905 3.905-10.237 3.905-14.142 0-3.834-3.834-3.904-10.007-.21-13.927l.21-.215 30.227-30.229-29.275-29.677-.208-.217c-3.668-3.944-3.556-10.117.304-13.925 3.932-3.879 10.263-3.836 14.142.096l29.18 29.58 29.63-29.628c3.905-3.905 10.237-3.905 14.142 0Z",fill:"currentColor",fillRule:"nonzero"}))},1882:function(e,t,r){"use strict";r(206);var n=r(111),o=(r(293),r(124)),a=(r(98),r(37)),i=(r(230),r(65)),c=(r(223),r(77)),l=(r(236),r(60)),u=(r(247),r(66)),s=r(0),f=r.n(s),p=r(8),d=r.n(p),y=r(1603),m=r(1601),h={docTask:"DocTask-module_docTask_NywmO",settingFile:"DocTask-module_settingFile_bFy51",hr:"DocTask-module_hr_y8Wz9",settingFileIcon:"DocTask-module_settingFileIcon_++xRm",settingContent:"DocTask-module_settingContent_leSlb",isFirst:"DocTask-module_isFirst_RPJNh",settingTitlt2:"DocTask-module_settingTitlt2_OZfjd",settingFileTypeName:"DocTask-module_settingFileTypeName_S4Bv1",settingFileTypeExt:"DocTask-module_settingFileTypeExt_GCoBd"};function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}var g={STATUS:{INIT:"init",SETTING:"setting",PROCESSING:"processing",UPLOADING:"uploading",PENDING:"pending",DONE:"done",SUCCESS:"success",ERROR:"error"}};g.AdvanceSetting=u.a.create({name:"advanceSettingForm"})(Object(s.forwardRef)((function(e,t){var r=e.type,n=e.target,p=void 0===n?{}:n,d=e.settings,y=e.actions,m=e.title,g=e.form;if(!r)return null;var b=g.getFieldDecorator;return Object(s.useImperativeHandle)(t,(function(){return{form:g,getValue:function(){var e=g.getFieldsValue()||{};return Object.keys(e).forEach((function(t){if(Array.isArray(e[t])){var r=e[t][0];null==r?delete e[t]:e[t]=r}})),e}}})),f.a.createElement("div",{"data-testid":"docTask-".concat(r.key)},f.a.createElement(c.a,{className:h.settingFile,type:"flex",justify:"start",align:"middle"},f.a.createElement(l.a,{className:h.settingFileIcon},f.a.createElement("img",{src:r.icon,className:""})),f.a.createElement(l.a,{className:h.settingFileTypeMeta},f.a.createElement("div",{className:h.settingFileTypeName},m||p.title||p.name||r.name),f.a.createElement("div",{className:h.settingFileTypeExt},r.extensions.join(" ")))),f.a.createElement("div",{className:h.settingContent},f.a.createElement("h2",{className:h.settingTitlt2},__("高级选项")),f.a.createElement(u.a,null,d.map((function(e,t){if(Array.isArray(e)){var r=0===t?h.isFirst:"";return f.a.createElement(u.a.Item,{className:r},b(e[0].name,{initialValue:e.find((function(e){return e.default})).value})(f.a.createElement(i.a.Group,null,e.map((function(e){return f.a.createElement(i.a,{value:e.value},e.label)})))))}if("text"===e.type){var n={};return e.validator&&(e.validateOnBlur&&(n.validateTrigger=["onChange","onBlur"]),n.rules=[{validator:e.validator}]),f.a.createElement(u.a.Item,{label:e.label,colon:e.colon},b(e.name,n)(f.a.createElement(a.a,v({type:"text",autoComplete:"off",maxLength:"1000"},e))))}return f.a.createElement(u.a.Item,null,b(e.name,{initialValue:[e.default&&e.value]})(f.a.createElement(o.a.Group,null,f.a.createElement(o.a,{value:e.value},e.label))))})))),f.a.createElement("div",{className:h.settingFooter},y))}))),g.Error=function(e){return f.a.createElement("div",{className:"".concat(h.docTask," ").concat(h.docTaskError)},f.a.createElement("p",{className:"icon"},f.a.createElement(y.default,null)),f.a.createElement("p",{className:"tip"},e.tip),f.a.createElement("p",{className:"error"},e.error),f.a.createElement("p",{className:"action"},e.action))},g.Error.propTypes={tip:d.a.string,action:d.a.node,error:d.a.string},g.Success=function(e){return f.a.createElement("div",{className:"".concat(h.docTask," ").concat(h.docTaskSuccess)},f.a.createElement("p",{className:"icon"},f.a.createElement(m.default,null)),f.a.createElement("p",{className:"tip"},e.tip),f.a.createElement("p",{className:"action"},e.action))},g.Success.propTypes={tip:d.a.string,action:d.a.node},g.Processing=function(e){return f.a.createElement("div",{className:"".concat(h.docTask," ").concat(h.docTaskProcessing)},f.a.createElement(n.a,{justify:"block"}),f.a.createElement("p",{className:"tip"},f.a.createElement("span",null,e.tip)))},g.Processing.propTypes={tip:d.a.string};t.a=g},3062:function(e,t,r){"use strict";var n=r(178),o=r.n(n),a=r(101),i=r.n(a),c=r(182),l=r(567),u=r(49),s={getExportFormats:function(){return i.a.BOOK_EXPORT_FORMATS},adaptDocTypography:function(e){if(!e.doc_typography)return{type:c.DOC_TYPOGRAPHY.traditional,scope:"all"};var t=e.doc_typography.split("_");return 1===t.length?{type:t[0],scope:null}:{type:t[0],scope:t[1]}},actionsForNavMore:function(e,t,r){var n=e.abilities;if(!n)return[];var o=[];"Design"===e.type&&o.push({action:u.a.BOOK.manage_assets,can:n.create_doc}),o.push({action:u.a.BOOK.collaborators,can:n.create_doc}),s.isMixingType(e)&&o.push({action:u.a.BOOK.statistics,can:n.manage}),"Design"!==e.type&&o.push({action:u.a.BOOK.recycles,can:n.create_doc});var a=[];return a.push({action:u.a.BOOK.rename_book,can:n.modify_setting||n.manage}),a.push({action:u.a.BOOK.delete_book,can:n.destroy}),a.push({action:u.a.BOOK.settings,can:n.create_doc}),o.find((function(e){return e.can}))&&a.find((function(e){return e.can}))&&o.push({action:{cmd:"divider"}}),o.push.apply(o,a),o},sortByUpdatedAt:function(e,t){return new Date(e.content_updated_at)-new Date(t.content_updated_at)},sortByCreatedAt:function(e,t){return new Date(e.created_at)-new Date(t.created_at)},sortByTitle:function(e,t){return e.name.localeCompare(t.name,"zh-Hans-CN",{sensitivity:"accent"})},getBelong:function(e){var t={type:"",text:""};if(!e)return t;var r=e.user;return r?t={type:r.login,text:r.name}:t},getBelongs:function(e){var t=this,r=e.map((function(e){return t.getBelong(e)}));return(r=o()(r,"type").filter((function(e){return!!e.type}))).unshift({type:null,text:__("所有")}),r},filterByBelong:function(e,t){var r=this;return t?e.filter((function(e){return r.getBelong(e).type===t})):e},isMixingType:function(e){return!(!e||!e.type)&&c.MIXING_BOOK_TYPES.includes(e.type)},shouldShowTempStoreBox:function(e){var t;return null==e||null===(t=e.abilities)||void 0===t?void 0:t.create_doc},MEMBER_LIST_CONSTANT:{MAX_SIZE:2e3,PAGE_SIZE:500},getMemberCount:function(e,t){return e>s.MEMBER_LIST_CONSTANT.MAX_SIZE?"".concat(s.MEMBER_LIST_CONSTANT.MAX_SIZE,"+"):e<s.MEMBER_LIST_CONSTANT.PAGE_SIZE?(null==t?void 0:t.length)||0:e},getDefaultBookCover:function(){return l.defaultBookCovers}};t.a=s},3165:function(e,t,r){"use strict";r(223);var n=r(77),o=(r(236),r(60)),a=(r(95),r(38)),i=(r(709),r(369)),c=(r(55),r(22)),l=r(0),u=r.n(l),s=r(8),f=r.n(s),p=r(11),d=r.n(p),y=r(228),m={fileTypeSelector:"index-module_fileTypeSelector_73BHW",item:"index-module_item_H3xgY",fileType:"index-module_fileType_l65Jm",fileTypeIcon:"index-module_fileTypeIcon_eSmiM",fileTypeMeta:"index-module_fileTypeMeta_4eYr8",fileTypeName:"index-module_fileTypeName_9B0Rn",fileTypeExt:"index-module_fileTypeExt_wTTFB",fileTypeReady:"index-module_fileTypeReady_TAUvL"};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(this,r)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function w(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}function T(){T=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:w(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function p(){}function d(){}function y(){}var m={};l(m,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(j([])));g&&g!==t&&r.call(g,a)&&(m=g);var b=y.prototype=p.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==h(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return N()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return d.prototype=y,n(b,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},E(_.prototype),l(_.prototype,i,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(b),l(b,c,"Generator"),l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function S(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function k(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var R={lakebook:__("语雀知识库")},L=function(e){var t,r,n,o,a,s=e.fileOption,f=e.getParamsOption,p=e.book,d=e.importType,m=e.onBeforeUpload,h=e.onUploadChange,v=e.customRequest,g=e.maxCount,b=j(Object(l.useState)([]),2),E=b[0],_=b[1],w=function(e){var t=k(e.fileList);_(t),h(e)},O=function(){var e,r=(e=T().mark((function e(r,n){var o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g&&n.length>g)){e.next=4;break}throw o="一次最多上传 ".concat(g," 个文件。"),t||(c.a.warn(__(o)),t=!0),new Error(o);case 4:if(!m){e.next=7;break}return e.next=7,m();case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){S(a,n,o,i,c,"next",e)}function c(e){S(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}();return u.a.createElement(i.a,x({},(r=s.extensions.join(", "),n="/api/import?ctoken=".concat(Object(y.a)(window)),o={book_id:p.id,type:s.key,import_type:d},a={name:"file",action:n,data:function(){if(f){var e=f();e&&(o.options=JSON.stringify(e))}return o},showUploadList:!1,dataType:"json",multiple:!0,supportServerRender:!1,accept:r,withCredentials:!0,beforeUpload:O,onChange:w},"function"==typeof v&&(a.customRequest=v),a),{fileList:E,key:s.key}),e.children)};L.defaultProps={maxCount:10};var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(l,e);var t,r,i,c=b(l);function l(e){var t,r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),w(E(t=c.call(this,e)),"handleSelect",(function(e){t.setState({selected:e}),t.props.onSelect(e)})),t.state={selected:null},"export"===e.mode)&&(null===(r=e.types)||void 0===r||r.forEach((function(e){e.extensions.length=1})));return t}return t=l,(r=[{key:"renderItem",value:function(e){var t,r=this,n="ready"===e.status,o=this.props.mode,i=u.a.createElement("div",{className:d()((t={},w(t,m.fileType,!0),w(t,m.fileTypeReady,n),w(t,m.fileTypeSelected,this.state.selected===e.key),t)),onClick:function(){r.handleSelect(e.key)},"data-aspm-click":"c34618.d69452","data-aspm-param":"file_type=".concat(e.key,"^action_mode=").concat(o),"data-testid":"fileTypeSelectorItem-".concat(e.key)},u.a.createElement("div",{className:m.fileTypeIcon},u.a.createElement("img",{src:e.icon,className:""})),u.a.createElement("div",{className:m.fileTypeMeta},u.a.createElement("div",{className:m.fileTypeName},R[e.key]||e.name),u.a.createElement("div",{className:m.fileTypeExt},e.extensions.join(" "))));return n?u.a.createElement(a.a,{title:__("即将支持，敬请期待。")},i):"confluence"===e.key?u.a.createElement(a.a,{title:__("将 cf 导出的文件加上 .zip 后缀再导入")},i):"zip"===e.key?u.a.createElement(a.a,{title:__("将文件使用 zip 压缩后再导入")},i):i}},{key:"render",value:function(){var e=this,t=this.props.types;return u.a.createElement("div",{className:m.fileTypeSelector},u.a.createElement(n.a,{gutter:6},null==t?void 0:t.map((function(t){return u.a.createElement(o.a,{key:t.key,className:m.item},"import"!==e.props.mode||t.status||e.props.disableUpload(t)?e.renderItem(t):u.a.createElement(L,x({},e.props,{fileOption:t}),e.renderItem(t)))}))))}}])&&v(t.prototype,r),i&&v(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(l.PureComponent);C.defaultProps={onSelect:function(){},onBeforeUpload:function(){},onUploadChange:function(){},disableUpload:function(){return!1}},C.propTypes={types:f.a.array.isRequired,mode:f.a.oneOf(["import","export"]),importType:f.a.string,maxCount:f.a.number,getParamsOption:f.a.func,book:f.a.object,disableUpload:f.a.func,onSelect:f.a.func,onBeforeUpload:f.a.func,customRequest:f.a.func,onUploadChange:f.a.func},C.FileUpload=L;t.a=C},3167:function(e,t,r){"use strict";r(84);var n=r(45),o=(r(61),r(23)),a=r(0),i=r.n(a),c=r(8),l=r.n(c),u=r(1602),s=r(419),f=r(395),p=r.n(f),d=r(1882),y=r(3165),m=r(155),h=r(205),v=r(158),g=r(176),b="BookExport-module_docExport_44PUl",E="BookExport-module_title_Hezdm",_="BookExport-module_tips_VJJKo",w="BookExport-module_setting_PXAtw",O="BookExport-module_settingTitle_pEiZb",x="BookExport-module_settingUpload_sNiNV";function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(){j=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new S(o||[]);return n(i,"_invoke",{value:_(e,r,c)}),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function p(){}function d(){}function y(){}var m={};l(m,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(k([])));v&&v!==t&&r.call(v,a)&&(m=v);var g=y.prototype=p.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(n,a,i,c){var l=s(e[n],e,a);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==T(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return N()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function w(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return d.prototype=y,n(g,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),l(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new E(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),l(g,c,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function N(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){N(a,n,o,i,c,"next",e)}function c(e){N(a,n,o,i,c,"throw",e)}i(void 0)}))}}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var o=I(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}(this,r)}}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function F(e,t,r){return(t=A(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}var M=d.a.STATUS,D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(l,e);var t,r,a,c=C(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),F(B(t=c.call(this,e)),"handleExport",(function(e){t.setState({exportType:e,typeObj:p.a.THIRD_PARTY_FORMAT[e.toUpperCase()]}),t.settings[e]?t.setState({status:M.SETTING}):t.doExport(e)})),F(B(t),"doExport",function(){var e=P(j().mark((function e(r,n){var o,a;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({status:M.PROCESSING}),o=t.props.book,a={data:{id:o.id,type:r,title:n}},t["exportTo".concat(r)](a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),F(B(t),"_requestExports",(function(e){return h.a.books.exports(k(k({},t._exportParams),e.data))})),F(B(t),"exportTolakebook",(function(e){t.formRef&&(e.data.options=JSON.stringify(t.formRef.getValue())),t._requestExports(e).then((function(e){"success"===e.state&&(t.setState({exportResultUrl:e.url,status:M.SUCCESS}),v.b.download(e.url))})).catch((function(e){var r="";404===(null==e?void 0:e.status)&&(r=__("导出失败，知识库禁止导出，请检查权限")),t.setState({errorMessage:r,status:M.ERROR})}))})),F(B(t),"exportTopdf",function(){var e=P(j().mark((function e(r){var n,o,a,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.formRef&&(r.data.options=JSON.stringify(t.formRef.getValue())),n=1e4,o=66,a=0;case 4:if(!(a<o)){e.next=24;break}return e.prev=5,e.next=8,t._requestExports(r);case 8:i=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),t.setState({errorMessage:e.t0.message,status:M.ERROR}),e.abrupt("return");case 15:if("success"!==i.state){e.next=19;break}return t.setState({exportResultUrl:i.url,status:M.SUCCESS}),v.b.download(i.url),e.abrupt("return");case 19:return e.next=21,Object(s.a)(n);case 21:a++,e.next=4;break;case 24:t.setState({errorMessage:__("处理超时..."),status:M.ERROR});case 25:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()),F(B(t),"renderEntry",(function(){var e=window.appData.isYuque?"https://www.yuque.com/yuque/thyzgp/import-lake-to-lark#ebsrF":"https://yuque.antfin.com/lark/bsgp0v/import-lake-to-lark#ebsrF";return i.a.createElement("div",{className:"entry"},i.a.createElement("div",{className:E},__("导出知识库")),i.a.createElement("div",{className:_},__("知识库文档过多时，可能导致导出变慢或失败，可拆分知识库后重试。"),i.a.createElement("a",{href:e,target:"_blanck","data-desktopTarget":"_browser"},__("查看帮助文档")),__("。")),i.a.createElement(y.a,{mode:"export",types:t._formats,onSelect:t.handleExport}))})),t._exportParams=e.exportParams||{},t._formats=t.props.formats||p.a.BOOK_EXPORT_FORMATS,t.state={exportType:null,typeObj:null,status:M.INIT,errorMessage:"",exportResultUrl:""},t.settings={pdf:[{label:__("导出文档大纲到 PDF 中"),default:!0,name:"enableToc",value:1}]},t}return t=l,(r=[{key:"renderProcessing",value:function(){var e=this.state.typeObj;return e?i.a.createElement("div",{className:w},i.a.createElement("h1",{className:O},__("导出知识库为 {type}",{type:e.name})),i.a.createElement(d.a.Processing,{tip:__("正在导出中...")})):null}},{key:"renderSuccess",value:function(){var e=this,t=this.state.typeObj;return t?i.a.createElement("div",{className:w},i.a.createElement("h1",{className:O},__("导出知识库为 {type}",{type:t.name})),i.a.createElement(d.a.Success,{tip:__("文件生成成功"),action:i.a.createElement(g.a,{href:this.state.exportResultUrl,desktopDisableHref:!0,onClick:function(){v.b.download(e.state.exportResultUrl)},target:"_blank"},__("点击下载"))})):null}},{key:"renderSetting",value:function(){var e=this,t=this.state,r=t.typeObj,n=t.status;if(!r)return null;var a,c=this.settings[r.key];return c?(this._exportParams.toc_node_title&&(a="".concat(this.props.book.name," - ").concat(this._exportParams.toc_node_title)),i.a.createElement("div",{className:w,style:{display:n===M.SETTING?"block":"none"}},i.a.createElement("h1",{className:O},__("导出知识库为 {type}",{type:r.name})),i.a.createElement(d.a.AdvanceSetting,{wrappedComponentRef:function(t){e.formRef=t},title:a,target:this.props.book,type:r,settings:c,actions:i.a.createElement(o.a,{type:"primary","data-testid":"btn-export",className:x,onClick:function(){return e.doExport(e.state.exportType,a)}},__("导出"))}))):null}},{key:"renderError",value:function(){var e=this,t=this.state.typeObj;return t?i.a.createElement("div",{className:w},i.a.createElement("h1",{className:O},__("导出知识库为 {type}",{type:t.name})),i.a.createElement(d.a.Error,{tip:__("文件生成失败"),error:this.state.errorMessage,action:i.a.createElement(o.a,{icon:i.a.createElement(u.default,null),size:"small","data-testid":"btn-reload",onClick:function(){e.doExport(e.state.exportType)}},__("重新生成"))})):null}},{key:"render",value:function(){var e=this.state.status,t=this.props.wrapModal,r=void 0===t||t,o=null;return e===M.PROCESSING?o=this.renderProcessing():e===M.SUCCESS?o=this.renderSuccess():e===M.ERROR?o=this.renderError():e===M.INIT&&(o=this.renderEntry()),o=i.a.createElement("div",{"data-testid":"book-export",className:b,onClick:function(e){e.stopPropagation()}},o,this.renderSetting()),r?i.a.createElement(n.a,{visible:this.props.visible,title:null,footer:null,width:360,onCancel:this.props.onCancel,maskClosable:!1},o):o}}])&&R(t.prototype,r),a&&R(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.a.Component);D.propTypes={book:l.a.object.isRequired,visible:l.a.bool.isRequired,onCancel:l.a.func.isRequired,formats:l.a.array,exportParams:l.a.object,wrapModal:l.a.bool};t.a=Object(m.b)(D,!0)}}]);